"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["bundle.Grok-017e4cb9"],{671620:(e,t,a)=>{a.d(t,{o:()=>y});var n=a(202784),o=a(154003),r=a(392237),s=a(111677),l=a.n(s),i=a(786272),c=a(725405),d=a(125363),u=a(189953),m=a(601576),b=a(654917),p=a(752435);const g=l().a372681e,f=l().f88553c8,C=l().be37ecd4,h={label:g};function y(){const e=(0,b.uf)(),t=(0,d.v9)(e.selectConversationId),a=(0,d.v9)(e.selectMetadataForLastMessage),r=(0,d.v9)(e.selectStatus),s=r===u.Q_.TYPING||r===u.Q_.WAITING,l=(0,p.Z)({conversationId:t,metadata:a}),y=(0,c.Z)(),v=(0,d.I0)(),I=n.useCallback((async()=>{try{const e=new Promise(((e,t)=>{l((t=>e(t)),t)}));await navigator.clipboard.write([new ClipboardItem({"text/plain":e.then((e=>new Blob([e],{type:"text/plain"})))})]),y.scribe({element:"grok_conversation_copy_button",action:"click"}),v((0,m.fz)({text:f,withAutoDismiss:!0}))}catch(e){y.scribe({element:"grok_conversation_copy",action:"fail"}),v((0,m.fz)({text:C,withAutoDismiss:!0}))}}),[l,v,y]);return t?n.createElement(o.ZP,{"aria-label":g,backgroundColor:"transparent",borderColor:"transparent",hoverLabel:h,icon:n.createElement(i.default,null),onClick:e=>{I(),e.preventDefault(),e.stopPropagation()},size:"medium",style:[k.roundedSqaure,k.shareBtn,!a||s?k.fadeOut:null]}):null}const k=r.default.create((e=>({shareBtn:{transition:"opacity 0.4s",opacity:1},fadeOut:{opacity:0},roundedSqaure:{borderRadius:e.borderRadii.large}})))},764512:(e,t,a)=>{a.d(t,{q:()=>D});var n=a(202784),o=a(325686),r=a(67369),s=a(392237),l=a(929028),i=a(292546),c=a(807901),d=a(179175),u=a(107267),m=a(154003),b=a(111677),p=a.n(b),g=a(177826),f=a(837020),C=a(791632),h=a(428880),y=a(988290),k=a(671620);const v=p().gb5fb7d0,I={label:v},_=p().g5665caa,E={label:_};function w({isVerbose:e}){const{isEligible:t}=(0,c.Z)(),[a,r,s]=(0,h.ZP)(),l=(0,u.useHistory)(),{isCompactLayout:i}=(0,y.ZP)();return t?n.createElement(o.Z,{style:x.container},(0,C.HD)(l)||!s||a?null:n.createElement(m.ZP,{"aria-label":v,backgroundColor:"transparent",borderColor:"transparent",hoverLabel:I,icon:n.createElement(g.default,null),onClick:r,size:"medium",style:[x.flipX,x.button]}),s&&a?n.createElement(m.ZP,{"aria-label":_,backgroundColor:"transparent",borderColor:"transparent",hoverLabel:E,icon:n.createElement(f.default,null),onClick:r,size:"medium",style:x.button}):null,i&&n.createElement(k.o,null)):null}const x=s.default.create((e=>({container:{flexDirection:"row",alignItems:"center"},button:{borderRadius:e.borderRadii.large},flipX:{transform:[{scaleX:-1}]}})));var Z=a(579711);const D=()=>{const[e]=(0,i.Z)(),t=e.get("conversation")??void 0,{canClearConversation:a}=(0,c.Z)(),s=(0,r.yu)(),l=!a&&!t&&!s,u=n.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]);return n.createElement(o.Z,{onClick:u,style:P.container},n.createElement(o.Z,{style:P.leftColumn},n.createElement(w,{isVerbose:l})),n.createElement(o.Z,{style:P.centerColumn},n.createElement(d.V,null)),n.createElement(o.Z,{style:P.rightColumn},n.createElement(Z.Z,{isVerbose:l})))},P=s.default.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,alignItems:"center",justifyContent:"center",marginVertical:"unset",paddingTop:e.spaces.space16,height:50},focusContainer:{...l.Z.getBackgroundStyles(),flexGrow:1,flexShrink:1,position:"sticky",zIndex:e.componentZIndices.appBarZIndex,top:0,padding:e.spaces.space8},leftColumn:{flex:1,alignItems:"flex-start",justifyContent:"center"},centerColumn:{flex:1,justifyContent:"center",alignItems:"center"},rightColumn:{flex:1,justifyContent:"center",alignItems:"flex-end"}})))},579711:(e,t,a)=>{a.d(t,{Z:()=>S});var n=a(202784),o=a(325686),r=a(154003),s=a(392237),l=a(111677),i=a.n(l),c=a(73416),d=a(883069),u=a(715614),m=a(52735),b=a(125363),p=a(576466),g=a(281030),f=a(807901),C=a(654917),h=a(988290),y=a(917270),k=a(671620);const v=i().ica55d24,I={label:v},_=i().fbc79f6a,E=i().b61ad410,w={label:_},x=i().gb303814,Z=i().bb89cf46,D={label:x},P={label:Z};function S({isVerbose:e,withHistory:t}){const{canClearConversation:a,handleClearConversationClick:s,isEligible:l}=(0,f.Z)(),[i,S]=n.useState(!1),R=(0,b.I0)(),O=(0,C.uf)(),L=(0,b.v9)(O.selectConversationId),T=(0,b.v9)(O.selectIsConversastionPinned),z=n.useMemo((()=>a?void 0:{opacity:.5}),[a]),G=n.useCallback((e=>{S(!0),e.preventDefault(),e.stopPropagation()}),[S]),K=n.useCallback((()=>{S(!1)}),[S]),{isCompactLayout:F}=(0,h.ZP)();return l?n.createElement(o.Z,{style:M.container},!F&&n.createElement(k.o,null),L&&n.createElement(r.ZP,{"aria-label":T?Z:x,backgroundColor:"transparent",borderColor:"transparent",hoverLabel:T?P:D,icon:T?n.createElement(c.default,null):n.createElement(d.default,null),onClick:e=>{R(T?(0,g.l)(L):(0,p.v)(L)),e.preventDefault(),e.stopPropagation()},size:e?"small":"medium",style:M.roundedSqaure},e?E:void 0),n.createElement(r.ZP,{"aria-label":_,backgroundColor:"transparent",borderColor:"transparent",hoverLabel:w,icon:n.createElement(u.default,null),onClick:G,size:e?"small":"medium",style:M.roundedSqaure},e?E:void 0),e?null:n.createElement(r.ZP,{"aria-label":v,backgroundColor:"transparent",borderColor:"transparent",disabled:!a,hoverLabel:I,icon:n.createElement(m.default,{style:M.composeIcon}),onClick:s,size:"medium",style:[z,M.roundedSqaure]}),i?n.createElement(y.O,{onDrawerDismiss:K}):null):null}const M=s.default.create((e=>({roundedSqaure:{borderRadius:e.borderRadii.large},container:{flexDirection:"row",alignItems:"center"},composeIcon:{fill:"none",height:22,width:22}})))},204162:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(202784),o=a(325686),r=a(466792),s=a(731708),l=a(392237),i=a(837020),c=a(306677),d=a(725516),u=a(125363),m=a(389071),b=a(327597),p=a(448781),g=a(928831);function f({conversationKey:e,icon:t,id:a,imageGenerationCount:l,isAnimated:f,isCompactLayout:h,label:y,modelId:k}){const v=(0,d.z)(),I=(0,u.I0)(),[_,E]=n.useState(!0),w=(0,m.bD)(e),{isReasoningEnabled:x,isResearchEnabled:Z,selectDeepsearchFilterKey:D,selectReasoningFilterKey:P}=(0,g.w)(),S=(0,u.v9)(w.selectLastHumanMessage),M=n.useCallback((()=>{v.scribe({component:`follow_up_suggested_mode_${a}`,action:"impression"})}),[v,a]),R=n.useCallback((t=>{switch(v.scribe({component:`follow_up_suggested_mode_${t}`,action:"click"}),t){case"SEARCH":Z||D(),I((0,b.u)({analytics:v,conversationKey:e})({text:S?.message?.message,returnCitations:!0,isDeepsearch:!0,imageGenerationCount:l}));break;case"DEEPERSEARCH":Z||D(),I((0,b.u)({analytics:v,conversationKey:e})({text:S?.message?.message,returnCitations:!0,isDeepsearch:!0,deepsearchArgsOverride:{mode:p.z_},imageGenerationCount:l}));break;case"THINK":x||P(),I((0,b.u)({analytics:v,conversationKey:e})({text:S?.message?.message,returnCitations:!0,isReasoning:!0,imageGenerationCount:l}));break;case"THINK_HARDER":x||P(),I((0,b.u)({analytics:v,conversationKey:e})({text:S?.message?.message,returnCitations:!0,isReasoning:!0,promptMetadata:{promptSource:"FOLLOW_UP",action:"INPUT",properties:{followUpType:"THINK_HARDER",messageType:"TEXT"}},imageGenerationCount:l}));break;case"LOW":I((0,b.u)({analytics:v,conversationKey:e})({modelNameOverride:k,modelIdOverride:k,text:S?.message?.message,returnCitations:!0,metadata:{is_quick_answer:!1,is_think_harder:!0,requestModelDetails:{modelId:k}},imageGenerationCount:l}));break;case"HIGH":I((0,b.u)({analytics:v,conversationKey:e})({modelNameOverride:k,modelIdOverride:k,text:S?.message?.message,returnCitations:!0,metadata:{is_quick_answer:!0,is_think_harder:!1,requestModelDetails:{modelId:k}},imageGenerationCount:l}))}}),[S,v,e,I,x,Z,D,P,k,l]);return _?n.createElement(o.Z,{style:[C.container,f?C.animation:void 0]},n.createElement(r.Z,null,(({isHovered:e})=>n.createElement(o.Z,{onClick:()=>R(a),style:[C.button,e?C.hovered:void 0]},n.createElement(c.D,{id:`follow_up_mode_button_${a}`,onFullyVisible:M,position:"bottom",testID:`follow_up_mode_button_${a}`}),t,n.createElement(s.ZP,{size:"subtext2",style:C.suggestedModeText,weight:"medium"},y)))),n.createElement(r.Z,null,(({isHovered:e})=>n.createElement(o.Z,{onClick:()=>E(!1),style:[C.button,e?C.hovered:void 0]},n.createElement(i.default,{style:C.closeIcon}))))):null}const C=l.default.create((e=>({container:{maxWidth:"100%",marginStart:"auto",marginEnd:"auto",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.spaces.space8,position:"absolute",top:-48,start:0,end:0,bottom:0,height:"max-content"},button:{flexDirection:"row",padding:10,alignItems:"center",borderRadius:e.borderRadii.infinite,overflow:"hidden",cursor:"pointer",gap:e.spaces.space4,backgroundColor:e.colors.gray0,borderColor:e.colors.gray200,borderWidth:1,transition:"background-color 0.2s"},animation:{animationDelay:"0.2s",animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0,transform:"translateY(20px)"},"100%":{opacity:1,transform:"translateY(0px)"}}],animationTimingFunction:"ease",animationFillMode:"both"},hovered:{backgroundColor:e.colors.gray100},closeIcon:{width:e.spaces.space16,height:e.spaces.space16,color:e.colors.gray900},suggestedModeText:{color:e.colors.gray900}})))},583429:(e,t,a)=>{a.d(t,{W:()=>h});var n=a(202784),o=a(325686),r=a(351743),s=a.n(r),l=a(154003),i=a(392237),c=a(111677),d=a.n(c),u=a(725516),m=a(125363),b=a(389071),p=a(393261),g=a(975617);const f=d().a0428662,C=d().fe4fd310;function h({conversationKey:e,messageId:t}){const a=(0,u.z)(),r=(0,m.I0)(),i=(0,b.bD)(e),c=(0,m.v9)(b.t5),[d,h]=n.useState(),[k]=s()(p.Z),v=(0,m.v9)(i.selectConversationId),I=(0,m.v9)((e=>i.selectMetadataForMessageId(e,t))),_=n.useCallback((e=>{v&&I?.agentChatItemId&&k({variables:{basicFeedback:{feedback_button:e},conversationId:v,conversationItemId:I.agentChatItemId,modelVersion:c},onCompleted:t=>{t.create_grok_conversation_feedback?.grok_feedback_error?(0,g.J)(r):h(e)}})}),[v,I?.agentChatItemId,c,r,k]),E=n.useCallback((()=>{a.scribe({action:"click",component:"thumbs_up"}),_("Like")}),[a,_]),w=n.useCallback((()=>{a.scribe({action:"click",component:"thumbs_down"}),_("Dislike")}),[a,_]);return n.createElement(o.Z,{style:y.root},n.createElement(o.Z,{style:y.buttonsContainer},n.createElement(l.ZP,{disabled:!!d,onPress:E,size:"medium",style:[y.button,y.leftControl],type:"Like"===d?"primaryFilled":"primaryOutlined"},C),n.createElement(l.ZP,{disabled:!!d,onPress:w,size:"medium",style:[y.button,y.rightControl],type:"Dislike"===d?"primaryFilled":"primaryOutlined"},f)))}const y=i.default.create((e=>({root:{backgroundColor:e.colors.navigationBackground,borderRadius:e.borderRadii.small,overflow:"hidden"},buttonsContainer:{flexDirection:"row",justifyContent:"space-between"},button:{flexGrow:1,marginTop:e.spaces.space12,marginBottom:e.spaces.space12},leftControl:{marginStart:e.spaces.space12,marginEnd:e.spaces.space4},rightControl:{marginEnd:e.spaces.space12,marginStart:e.spaces.space4}})))},276522:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(202784),o=a(392237),r=a(67369),s=a(154003);function l({color:e,disabled:t,icon:a,label:l,onPress:c,renderMenu:d}){const[u,m]=n.useState(!1),b=n.useMemo((()=>({label:l})),[l]),p=n.useCallback((()=>m(!0)),[m]),g=n.useCallback((()=>m(!1)),[m]),f=e??("light"===o.default.theme.paletteName?"gray700":"gray900"),C=(0,r.Zz)()?"medium":"small";return n.createElement(s.ZP,{"aria-label":l,backgroundColor:"transparent",borderColor:"transparent",color:u?"primary":f,disabled:t,hoverLabel:b,icon:a,onMouseEnter:p,onMouseLeave:g,onPress:c,onPressIn:p,onPressOut:g,onTouchEnd:g,onTouchStart:p,renderMenu:d,size:C,style:i.button})}const i=o.default.create((e=>({button:{justifyContent:"flex-start",animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"}})))},603416:(e,t,a)=>{a.d(t,{Z:()=>Ee});var n=a(202784),o=a(325686),r=a(392237),s=a(323265),l=a(734907),i=a(952793),c=a(125363),d=a(389071),u=a(155918),m=a(305442),b=a(988290),p=a(111677),g=a.n(p),f=a(720526),C=a(725516),h=a(601576),y=a(730372),k=a(276522);const v=g().b8c06820,I=g().f88553c8;function _({text:e,textContainer:t}){const a=(0,c.I0)(),o=(0,C.z)(),r=n.useCallback((()=>{(0,y.OR)(t.current,e),o.scribe({element:"grok_response_copy_button",action:"click"}),a((0,h.fz)({text:I,withAutoDismiss:!0}))}),[t,e,a,o]);return n.createElement(k.Z,{icon:n.createElement(f.default,null),label:v,onPress:r})}var E=a(351743),w=a.n(E),x=a(922449),Z=a(671212),D=a(946474),P=a(517330),S=a(908118),M=a(393261),R=a(430506),O=a(975617);const L=g().ca0f5894,T=g().fe731016;function z({allMediaIds:e,allMediaUrls:t,conversationKey:a,messageId:r}){const s=(0,C.z)(),l=(0,c.I0)(),u=(0,d.bD)(a),m=(0,c.v9)(d.t5),[p,g]=n.useState(),[f]=w()(M.Z),{isCompactLayout:h}=(0,b.ZP)();n.useEffect((()=>{r||g(void 0)}),[r]);const y=(0,c.v9)(u.selectConversationId),v=(0,c.v9)((e=>u.selectMetadataForMessageId(e,r))),I=(0,i.hC)("responsive_web_grok_feedback_label_dropdown"),_={};e&&(_.allMediaIds=e),t&&(_.allMediaUrls=t);const E=Object.keys(_).length>0?JSON.stringify(_):void 0,z=n.useCallback((e=>{y&&v?.agentChatItemId&&f({variables:{basicFeedback:{feedback_button:e},conversationId:y,conversationItemId:v.agentChatItemId,modelVersion:m},onCompleted:t=>{t.create_grok_conversation_feedback?.grok_feedback_error?(0,O.J)(l):g(e)}})}),[y,v?.agentChatItemId,m,l,f]),[K,F]=n.useState(!1),[A,H]=n.useState(!1),q=n.useCallback((()=>{s.scribe({action:"click",component:"thumbs_up",data:{event_info:E}}),z("Like")}),[s,z,E]),B=n.useCallback((()=>{s.scribe({action:"click",component:"thumbs_down",data:{event_info:E}}),z("Dislike"),F(!0)}),[s,z,E]),V=n.useCallback((()=>{y&&v?.agentChatItemId&&(s.scribe({action:"click",component:"feedback_comment",data:{event_info:E}}),H(!0),F(!1))}),[s,y,v,E]),N=n.useCallback((e=>{y&&v?.agentChatItemId&&(s.scribe({action:"click",component:"feedback_label",data:{event_info:E}}),F(!1),f({variables:{contextualFeedback:{label_id:e},conversationId:y,conversationItemId:v.agentChatItemId??"",modelVersion:m},onCompleted:e=>{e.create_grok_conversation_feedback?.grok_feedback_error?(0,O.J)(l):(0,O.P)(l)}}))}),[y,v?.agentChatItemId,m,l,f,s,E]);return y&&v?.agentChatItemId?n.createElement(o.Z,{style:[G.container,h?void 0:G.noGap]},p?n.createElement(k.Z,{color:"primary",disabled:!0,icon:"Like"===p?n.createElement(x.default,null):n.createElement(Z.default,null),label:"Like"===p?T:L}):n.createElement(n.Fragment,null,n.createElement(k.Z,{icon:n.createElement(D.default,null),label:T,onPress:q}),n.createElement(k.Z,{icon:n.createElement(P.default,null),label:L,onPress:B})),I&&K&&n.createElement(S.Z,{feedbackLabels:v.feedbackLabels,onClose:()=>{F(!1)},onSelect:N,onSelectOtherOption:V}),I&&A&&n.createElement(R.Z,{conversationId:y,conversationItemId:v.agentChatItemId,modelVersion:m,onClose:()=>{H(!1)}})):null}const G=r.default.create((e=>({container:{flexDirection:"row",gap:e.spaces.space8},noGap:{gap:0}})));var K=a(615455),F=a(799027);function A({memoryReferences:e}){const[t,a]=n.useState(!1),o=n.useCallback((()=>{a(!0)}),[]),r=n.useCallback((()=>{a(!1)}),[]);return n.createElement(n.Fragment,null,n.createElement(k.Z,{icon:n.createElement(K.default,null),label:F.i,onPress:o}),t&&n.createElement(F.Z,{memoryReferences:e,onDrawerDismiss:r}))}var H=a(807896),q=(a(136728),a(797553)),B=a(143670),V=a(837020),N=a(737691),U=a(14284),j=a(97369),W=a(725405),$=a(530326);const J=g().idf94bac,X={withoutSearch:g().f7614f92,withSearch:g().c5ade3ba,withoutImage:g().c16e5b1a,withImage:g().i2ca65fa},Y={imageGen:!1},Q={imageGen:!0},ee={webSearch:!1,xSearch:!1},te={webSearch:!0,xSearch:!0,imageGen:!1},ae=e=>()=>n.createElement(o.Z,{style:ne.container},n.createElement(e,null),n.createElement(V.default,{style:ne.strike})),ne=r.default.create((e=>({container:{flex:1,position:"relative"},strike:{position:"absolute",bottom:0,right:-2,width:e.spaces.space12,height:e.spaces.space12,backgroundColor:e.colors.navigationBackground}})));function oe({analysisEntityId:e,conversationKey:t,hasImages:a,hasSearch:r,imageGenerationCount:s,promptSource:l,uiLayout:d,userChatItemId:u}){const m=(0,c.I0)(),b=(0,W.Z)(),p=(0,i.hC)("responsive_web_grok_show_citations"),g=(0,i.hC)("responsive_web_grok_regen_configs")&&-1===l?.indexOf("post_analysis"),f=n.useCallback((({metadata:a,modelId:n,toolOverrides:o})=>{m((0,$.f)({analytics:b,userChatItemId:u,conversationKey:t})({analysisEntityId:e,returnCitations:p,imageGenerationCount:s,toolOverrides:o,modelIdOverride:n,metadata:a}))}),[m,b,u,t,e,p,s]),C=n.useCallback((()=>{f({toolOverrides:Y})}),[f]),h=n.useCallback((()=>{f({toolOverrides:ee})}),[f]),y=n.useCallback((()=>{f({toolOverrides:Q})}),[f]),v=n.useCallback((()=>{f({toolOverrides:te})}),[f]),I=n.useCallback((()=>{f({})}),[f]),[_,E]=n.useState(!1),w=n.useCallback((()=>{E(!_)}),[_]),x=n.useMemo((()=>{const e=[];return g?(e.push({Icon:N.default,actionText:J,onClick:()=>f({})}),r?e.push({Icon:ae(U.default),actionText:X.withoutSearch,onClick:h}):e.push({Icon:U.default,actionText:X.withSearch,onClick:v}),a?e.push({Icon:ae(j.default),actionText:X.withoutImage,onClick:C}):e.push({Icon:j.default,actionText:X.withImage,onClick:y}),e):e}),[r,a,g,f,y,C,v,h]);return n.createElement(o.Z,null,n.createElement(k.Z,{icon:n.createElement(N.default,null),label:J,onPress:x.length?w:I}),_&&n.createElement(q.default,{isFixed:!0,onDismiss:w,preferredHorizontalOrientation:"right"},x.map((e=>n.createElement(B.Z,(0,H.Z)({},e,{onClick:()=>{e.onClick()},key:e.actionText}))))))}var re=a(107267),se=a(811176),le=a(731708),ie=a(630715),ce=a(186444),de=a(324922),ue=a(786272),me=a(752435);const be=g().e05c00b4,pe=g().d3927f88,ge=g().f61c4bb0,fe=g().ifea3114,Ce=g().f88553c8,he=g().be37ecd4,ye=g().h708a4c0,ke=g().g06a67e2;function ve({allMediaIds:e,allMediaUrls:t,conversationKey:a,messageId:r}){const l=(0,c.I0)(),i=(0,re.useHistory)(),u=(0,C.z)(),m=(0,d.bD)(a),b=(0,c.v9)((e=>m.selectMetadataForMessageId(e,r))),p=(0,c.v9)(m.selectConversationId),g={};e&&(g.allMediaIds=e),t&&(g.allMediaUrls=t);const f=Object.keys(g).length>0?JSON.stringify(g):void 0,y=(0,me.Z)({conversationId:p,metadata:b}),v=n.useCallback((async()=>{try{const e=new Promise(((e,t)=>{y((t=>e(t)),t)}));await navigator.clipboard.write([new ClipboardItem({"text/plain":e.then((e=>new Blob([e],{type:"text/plain"})))})]),u.scribe({element:"grok_response_copy_share_link_button",action:"click",data:{event_info:f}}),l((0,h.fz)({text:Ce,withAutoDismiss:!0}))}catch(e){u.scribe({element:"grok_response_copy_share_link",action:"fail",data:{event_info:f}}),l((0,h.fz)({text:he,withAutoDismiss:!0}))}}),[y,l,u,f]),I=n.useCallback((()=>{y((e=>{u.scribe({element:"grok_response_post_button",action:"click",data:{event_info:f}}),s.ZP.isTwitterApp()?window.location.href=`https://x.com/compose/tweet?text=${e}`:i.push({pathname:"/compose/post",query:{text:e}})}),(()=>{}))}),[y,i,u,f]),_=n.useCallback((()=>{y((e=>{u.scribe({element:"grok_response_share_dm_button",action:"click",data:{event_info:f}}),s.ZP.isTwitterApp()?window.location.href=`https://x.com/messages/compose?text=${e}`:i.push({pathname:"/messages/compose",query:{text:e}})}),(()=>{}))}),[y,i,u,f]),E=n.useMemo((()=>[{Icon:ie.default,text:be,onClick:()=>{v()}},{Icon:ce.default,text:pe,onClick:I},{Icon:de.default,text:ge,onClick:_}]),[v,I,_]);return p&&b?n.createElement(k.Z,{icon:n.createElement(ue.default,null),label:fe,renderMenu:e=>n.createElement(se.Z,{description:n.createElement(o.Z,{style:Ie.container},n.createElement(le.ZP,{weight:"bold"},ye),n.createElement(le.ZP,{color:"gray700",size:"subtext1",style:Ie.description},ke)),items:E,onCloseRequested:e,preferredHorizontalOrientation:"right",shouldCloseOnClick:!0})}):null}const Ie=r.default.create((e=>({container:{gap:e.spaces.space8,padding:e.spaces.space16,paddingBottom:e.spaces.space12,borderBottomWidth:e.spaces.space1,borderBottomColor:e.colors.borderColor,maxWidth:300},description:{lineHeight:"140%"}}))),_e=s.ZP.isTwitterApp();function Ee({allowRetry:e,analysisEntityId:t,conversationKey:a,customLeftContent:r,customRightContent:s,messageId:p,promptSource:g,showPostButton:f,textContainer:C,uiLayout:h}){const y=(0,d.bD)(a),k=(0,c.v9)(y.selectFirstMessage),v=(0,c.v9)((e=>y.selectMessageById(e,p))),I=(0,m.Z)("regenerate"),E=g&&-1!==g.indexOf("post_analysis")&&(0,l.I)(k&&k.message||""),w=(0,i.hC)("responsive_web_grok_show_message_reply_button"),x=!_e&&w&&E,{isCompactLayout:Z}=(0,b.ZP)(),D=v.fileAttachments&&v.fileAttachments.length>0&&v.fileAttachments.every((e=>e.mimeType.startsWith("image"))),{mediaIds:P,mediaUrls:S}=(0,u.VU)(v),M=v.memoryReferences&&v.memoryReferences.length;return n.createElement(o.Z,{style:we.expandedDrawer},n.createElement(o.Z,{style:[we.expandedDrawerLeft,Z?we.smallerGap:null]},p&&!1!==e?n.createElement(oe,{analysisEntityId:t,conversationKey:a,hasImages:!!v.fileAttachments?.length,hasSearch:!!v.webResults?.length,imageGenerationCount:I,promptSource:g,uiLayout:h,userChatItemId:v.userChatItemId}):null,!p||!v.message||v.isDeleted||x||D?null:n.createElement(_,{text:v.message,textContainer:C}),v.isDeleted?null:n.createElement(ve,{allMediaIds:P,allMediaUrls:S,conversationKey:a,messageId:p}),M&&n.createElement(A,{memoryReferences:v.memoryReferences||[]}),v.isDeleted?null:n.createElement(z,{allMediaIds:P,allMediaUrls:S,conversationKey:a,messageId:p}),!!r&&r))}const we=r.default.create((e=>({expandedDrawer:{flexDirection:"row",justifyContent:"space-between",width:"100%",alignItems:"center"},expandedDrawerLeft:{flexDirection:"row",alignItems:"center"},expandedDrawerRight:{flexDirection:"row",gap:e.spaces.space16,alignItems:"center"},smallerGap:{gap:e.spaces.space8}})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Grok-017e4cb9.6778cefa.js.map