"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["bundle.Grok-f8a31592"],{791278:(e,t,a)=>{a.d(t,{Z:()=>f});a(543673),a(240753),a(128399);var n=a(202784),o=a(325686),s=a(992942),i=a(530732),r=a(731708),l=a(392237),c=a(630715),m=a(725516),d=a(916559),p=a(966488);function u({analyticsMetricPrefix:e="message-steps",isAnimated:t,style:a,webResults:l}){const u=(0,m.z)(),[g,f]=n.useState(null),[h,b]=n.useState(!1),[C,w]=n.useState(!1),x=n.useCallback((e=>{f(e)}),[]);return n.createElement(o.Z,{style:[y.container,a]},n.createElement(o.Z,{style:y.results},l.slice(0,5).map(((a,l)=>n.createElement(o.Z,{key:a.url,style:[y.webResultContainer,t?[y.animatedWebResultContainer,{animationDelay:.1*l+.5+"s"}]:void 0]},a.favicon&&!C?n.createElement(s.Z,{onError:()=>w(!0),source:a.favicon,style:y.favicon}):n.createElement(c.default,{style:y.favicon}),a.title&&n.createElement(i.Z,{interactiveStyles:y.interactiveWebResultContainer,onClick:()=>{x(a),u.scribe({element:`${e}-web-results`,action:"click",data:{event_info:a.url}})},style:y.titleContainer},(({isHovered:e})=>n.createElement(r.ZP,{numberOfLines:1,style:[y.title,e?y.hoveredTitle:void 0]},a.title))),n.createElement(o.Z,{style:y.urlContainer},n.createElement(r.ZP,{numberOfLines:1,style:y.url},new URL(a.url).hostname))))),l.length>5&&n.createElement(p.Z,{count:l.length-5,onClick:()=>{b(!0),u.scribe({element:`${e}-web-results`,action:"click",data:{event_info:"see-all"}})}})),g?n.createElement(d.E,{onDrawerDismiss:()=>f(null),webResults:[g]}):null,h?n.createElement(d.E,{onDrawerDismiss:()=>b(!1),paginationOptions:{numResultsPerPage:25},webResults:l}):null)}const y=l.default.create((e=>({container:{display:"flex",flex:1,opacity:1,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},results:{display:"flex",flexDirection:"column",gap:e.spaces.space8},interactiveWebResultContainer:{backgroundColor:"transparent"},webResultContainer:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"100%",gap:e.spaces.space8,borderBottomWidth:1,borderBottomColor:"transparent",borderBottomStyle:"solid",transition:"border-bottom-color 0.1s ease"},animatedWebResultContainer:{animationDuration:"0.2s",animationKeyframes:[{"0%":{backgroundColor:e.colors.gray50},"50%":{backgroundColor:e.colors.gray100},"100%":{backgroundColor:e.colors.gray50}}]},favicon:{width:e.spaces.space12,height:e.spaces.space12,borderRadii:e.borderRadii.medium},titleContainer:{maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",flexGrow:0,flexShrink:1},title:{fontSize:e.fontSizes.subtext2,color:e.colors.gray900,cursor:"pointer"},hoveredTitle:{textDecorationLine:"underline"},urlContainer:{},url:{fontSize:e.fontSizes.subtext2,color:e.colors.gray700}}))),g=(e,t)=>e.webResults.length===t.webResults.length&&e.style===t.style&&e.isAnimated===t.isAnimated,f=n.memo(u,g)},229177:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(202784),o=a(214997),s=a(325686),i=a(721266),r=a(392237),l=a(725516),c=a(520595),m=a(966488),d=a(530732),p=a(823161),u=a(366635),y=a(966886),g=a(650028),f=a(451051),h=a(915813),b=a(125363),C=a(836255);function w({onClick:e,outerContainerStyle:t,style:a,xPostId:o}){const i=n.useMemo((()=>C.Z.createHydratorForTweet(o||"")),[o]),r=(0,b.v9)(i);if(!r)return null;const{created_at:l,text:c,user:m}=r;return n.createElement(d.Z,{onClick:e||(()=>{window.open(r.permalink,"_blank")}),style:[x.outerContainer,t],withoutInteractiveStyles:!0},(({isHovered:t})=>n.createElement(s.Z,{style:[x.container,t?x.hoveredContainer:void 0,a]},n.createElement(s.Z,{style:x.headerContainer},n.createElement(s.Z,{style:x.nameContainer},n.createElement(p.default,{"aria-label":m.name,borderColor:"gray700",borderWidth:"small",screenName:m.screen_name,size:"medium",uri:m.profile_image_url_https}),n.createElement(u.Z,{affiliateBadgeInfo:m.highlightedLabel,isBlueVerified:m.is_blue_verified,isVerified:m.verified,name:m.name,nameSize:"subtext2",screenName:m.screen_name,screenNameSize:"subtext3",screenNameStyle:x.screenName,screenNameSuffixContainerStyle:{marginStart:0},style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},verifiedType:m.verified_type,withHoverCard:!0,withStackedLayout:!0})),n.createElement(y.Z,{humanReadable:!1,onPress:e,style:x.timestamp,timestamp:l})),r.in_reply_to_screen_name&&n.createElement(g.ZP,{displayTextRange:r.display_text_range,inReplyToName:r.in_reply_to_name,inReplyToScreenName:r.in_reply_to_screen_name,inReplyToUserIdStr:r.in_reply_to_user_id_str,linkType:g.ZP.ReplyContextLinkTypes.none,size:"subtext2",tweetPermalink:r.permalink}),n.createElement(f.Z,{displayTextRange:r.display_text_range,entities:r.entities,isCondensed:!0,numberOfLines:3,style:x.tweetText,text:c}),!c&&(r.extended_entities?.media??[]).map((e=>{const t={...e,ext_alt_text:void 0};return n.createElement(h.Z,{displayMediaTags:!1,hasSensitiveMedia:r.possibly_sensitive,isCondensed:!0,key:`media_${r.id_str}_${e.id_str}`,mediaContentStyles:x.media,mediaDetails:[t],mediaVisibilityResults:r.mediaVisibilityResults,preventPlayback:!0,shouldShowAltLabelAlways:!1,showAltTranslation:!1,showBorder:!1,singleImageMaxAspectRatio:2,singleImageMinAspectRatio:2,tweetId:r.id_str,videoAspectRatio:2,videoOptions:{displayOptions:{badgeConfiguration:{hideDataSize:!0,hideViewCount:!0,hideDuration:!0}},hidePreviewPlayButton:!0},withCenterCrop:!0,withMediaTagsIcon:!1})})))))}const x=r.default.create((e=>({outerContainer:{height:"100%",overflow:"hidden"},container:{borderRadius:e.borderRadii.medium,backgroundColor:e.colors.gray50,padding:e.spaces.space12,textOverflow:"ellipsis",cursor:"pointer",transition:"background-color 0.2s ease",display:"flex",flexDirection:"column",gap:e.spaces.space8,width:250,height:"100%"},hoveredContainer:{backgroundColor:e.colors.gray100},headerContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:e.spaces.space8,textOverflow:"ellipsis",overflow:"hidden"},nameContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8,textOverflow:"ellipsis"},screenName:{color:e.colors.gray700},timestamp:{color:e.colors.gray700,fontSize:e.fontSizes.subtext3,lineHeight:e.fontSizes.subtext3,textOverflow:"ellipsis",position:"relative",top:3},tweetText:{fontSize:e.fontSizes.subtext2,color:e.colors.gray900},media:{}})));function S({analyticsMetricPrefix:e="message-steps",isAnimated:t,scrollViewContentContainerStyle:a,seeMoreButtonStyle:r,style:d,xPostIds:p}){const u=(0,l.z)(),[y,g]=n.useState(null),[f,h]=n.useState(!1),b=n.useCallback((e=>{g(e)}),[]),C=n.useCallback((()=>{h(!0)}),[]),x=n.useCallback((()=>{h(!1)}),[]);return n.createElement(s.Z,{style:[E.container,d]},n.createElement(o.Z,{contentContainerStyle:[E.scrollViewContentContainer,a],horizontal:!0,showsHorizontalScrollIndicator:!1,style:E.scrollView},p.slice(0,5).map(((t,a)=>n.createElement(w,{key:t,onClick:()=>{b(t),u.scribe({element:`${e}-x-post`,action:"click",data:{event_info:t}})},xPostId:t}))),n.createElement(i.Z,{size:"space12"})),y?n.createElement(c.a,{onDrawerDismiss:()=>g(null),postIds:[y]}):null,f?n.createElement(c.a,{onDrawerDismiss:x,paginationOptions:{numResultsPerPage:15},postIds:p}):null,p.length>5&&n.createElement(m.Z,{count:p.length-5,onClick:()=>{C(),u.scribe({element:`${e}-x-post`,action:"click",data:{event_info:"see-all"}})},style:r}))}const E=r.default.create((e=>({container:{flex:1,opacity:1,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},scrollView:{width:"100%",flex:1},scrollViewContentContainer:{display:"flex",flexDirection:"row",gap:e.spaces.space12,paddingBottom:e.spaces.space8,flex:1}}))),v=(e,t)=>e.xPostIds.length===t.xPostIds.length&&e.style===t.style&&e.isAnimated===t.isAnimated,k=n.memo(S,v)},673787:(e,t,a)=>{a.d(t,{Z:()=>Z});a(136728);var n=a(202784),o=a(325686),s=a(392237),i=a(721266),r=a(731708),l=a(187669),c=a(952793),m=a(988290),d=a(630961),p=a(25825),u=a(956272),y=a(323265),g=a(397159),f=a(20716),h=a(207683),b=a(791278),C=a(229177);function w({analyticsMetricPrefix:e,handleStepLayout:t,isAnimated:a,isCompactLayout:i,isLoading:r,step:l,style:c}){const m=n.useCallback((e=>{if(e.summary)return n.createElement(o.Z,{style:[v.subStepContainer,i&&v.compactSubStepContainer]},n.createElement("div",{className:"message-steps-card-sub-step-markdown-text"},n.createElement(h.default,{citations:e.webResults,disableLinks:y.ZP.isWebView(),isAnimated:a,isStreaming:r,markdownText:e.summary||"",toolUsageCardResults:e.toolUsageCardResults})))}),[a,i,r]),d=n.useCallback((e=>{if(e.actionMarkdownSummary){const t=e.actionIcon,a=e.actionMarkdownSummary,r=e.actionState,l=t&&(0,f.wG)(t)||u.default;return n.createElement(o.Z,{style:[v.subStepContainer,v.decisionSubStepContainer,i&&v.compactSubStepContainer]},n.createElement(o.Z,{style:v.subStepIconContainer},n.createElement(p.Z,{color:s.default.theme.colors.gray900,size:"small",style:[v.decisionIcon,"STARTED"===r?v.showActivityDecisionIcon:void 0,"STARTED"!==r?v.hideActivityDecisionIcon:void 0]}),n.createElement(l,{style:[v.subStepIcon,v.decisionIcon,"COMPLETED"===r?v.showDecisionIcon:void 0]})),n.createElement("div",{className:"message-steps-card-sub-step-markdown-text"},n.createElement(h.default,{disableLinks:y.ZP.isWebView(),isAnimated:!1,markdownText:a})))}}),[i]),w=n.useCallback((t=>t.webResults&&t.webResults.length>0?n.createElement(o.Z,{style:[v.subStepContainer,v.resultsSubStepContainer,i&&v.compactSubStepContainer]},n.createElement(o.Z,{style:v.subStepIconContainer}),n.createElement(b.Z,{analyticsMetricPrefix:e,isAnimated:a,style:v.resultsContainer,webResults:t.webResults})):t.xPostIds&&t.xPostIds.length>0?n.createElement(C.Z,{analyticsMetricPrefix:e,isAnimated:a,scrollViewContentContainerStyle:[v.xPostsScrollViewContentContainer,i&&v.compactXPostsScrollViewContentContainer],seeMoreButtonStyle:[v.xPostsSeeMoreButton,i&&v.compactXPostsSeeMoreButton],style:v.resultsContainer,xPostIds:t.xPostIds}):void 0),[a,e,i]);return n.createElement(o.Z,{onLayout:t&&t(l.id),style:[v.step,c]},l.subSteps.map(((e,t)=>n.createElement(o.Z,{key:`${l.id}-${e.messageTag}-${e.messageStepId}-${t}`},e.messageTag===g.iS.SUMMARY&&m(e),e.messageTag===g.iS.DECISION&&n.createElement(n.Fragment,null,d(e),w(e))))))}const x=s.default.theme.spacesPx.space20,S=s.default.theme.spacesPx.space12,E=s.default.theme.spacesPx.space16,v=s.default.create((e=>({step:{display:"flex",flexDirection:"column"},subStepContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8,paddingHorizontal:x},decisionSubStepContainer:{paddingHorizontal:e.spaces.space28},resultsSubStepContainer:{paddingHorizontal:e.spaces.space28},compactSubStepContainer:{paddingHorizontal:S},subStepIconContainer:{width:E,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},subStepIcon:{width:e.spaces.space16,height:e.spaces.space16,color:e.colors.gray900},decisionIcon:{position:"absolute",top:"50%",start:"50%",transform:"translate(-50%, -50%) scale(0)",opacity:0},showDecisionIcon:{opacity:1,transform:"translate(-50%, -50%) scale(1)",animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0,transform:"translate(-50%, -50%) scale(0)"},"50%":{opacity:.5,transform:"translate(-50%, -50%) scale(1.1)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"}}]},showActivityDecisionIcon:{opacity:1,transform:"translate(-50%, -50%) scale(0.7)",animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0,transform:"translate(-50%, -50%) scale(0)"},"50%":{opacity:.5,transform:"translate(-50%, -50%) scale(0.8)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(0.7)"}}]},hideActivityDecisionIcon:{opacity:0,transform:"translate(-50%, -50%) scale(0)",animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:1,transform:"translate(-50%, -50%) scale(0.7)"},"100%":{opacity:0,transform:"translate(-50%, -50%) scale(0)"}}]},resultsContainer:{marginTop:e.spaces.space8},xPostsScrollViewContentContainer:{paddingHorizontal:x+E+e.spacesPx.space8},compactXPostsScrollViewContentContainer:{paddingHorizontal:S+E+e.spacesPx.space8},xPostsSeeMoreButton:{marginStart:x+E+e.spacesPx.space8},compactXPostsSeeMoreButton:{marginStart:S+E+e.spacesPx.space8}}))),k=n.memo(w);function Z({analyticsMetricPrefix:e="message-steps",handleStepLayout:t,isLoading:a,messageStepAccumulator:p,onCancelAutoScroll:u,onRestartAutoScroll:y,onShowTrace:g,scrollViewRef:f,style:h}){const{isPastSummary:b,steps:C}=p,{isCompactLayout:w,isGrokDrawer:x}=(0,m.ZP)(),S=(0,c.hC)("responsive_web_grok_animated_text_enabled");(0,l.q)((()=>{const e="message-steps-card-sub-step";if(document.getElementById(e))return;const t=document.createElement("style");t.setAttribute("id",e),t.textContent=`\n        .message-steps-card-sub-step-markdown-text {\n          flex: 1;\n          max-width: 100%;\n        }\n  \n        .message-steps-card-sub-step-markdown-text li {\n          margin-top: 4px !important;\n          padding-left: 5px !important;\n        }\n  \n        .message-steps-card-sub-step-markdown-text ul {\n          margin-bottom: 0px !important;\n          position: relative !important;\n          left: -4px !important;\n        }\n  \n        .message-steps-card-sub-step-markdown-text span {\n          ${x||w?`font-size: ${s.default.theme.fontSizes.subtext1} !important;`:""}\n        }\n      `;const a=document.head;return a&&a.appendChild(t),()=>{const t=document.getElementById(e);t&&t.remove()}}));const E=S&&!b,v=n.useMemo((()=>{const e=[];for(let t=0;t<3*C.length;t+=3)e.push(t);return e}),[C]);return n.createElement(o.Z,{style:[T.container,h]},n.createElement(i.Z,{size:"space8"}),n.createElement(d.Z,{gradientColor:"transparent",onCancelAutoScroll:u,onRestartAutoScroll:y,scrollViewContentContainerStyle:T.scrollViewContentContainerStyle,scrollViewRef:f,stickyHeaderIndices:v},n.createElement(n.Fragment,null,C.flatMap(((s,l)=>[n.createElement(o.Z,{key:`${s.id}-header`,style:[T.headerContainer,{zIndex:l+1}]},n.createElement(r.ZP,{style:T.header,weight:"bold"},s.header)),n.createElement(k,{analyticsMetricPrefix:e,handleStepLayout:t,isAnimated:E,isCompactLayout:w,isLoading:a,key:`${s.id}-step`,step:s}),n.createElement(i.Z,{key:`${s.id}-spacer`,size:"space16"})])),n.createElement(i.Z,{size:"space8"}))))}const T=s.default.create((e=>({container:{flex:1,position:"relative"},scrollViewContentContainerStyle:{display:"flex",flexDirection:"column"},headerContainer:{paddingHorizontal:e.spacesPx.space20,backgroundColor:e.colors.gray0,paddingVertical:e.spaces.space12,opacity:1,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},compactHeaderContainer:{paddingHorizontal:e.spacesPx.space12},header:{},traceButton:{width:"max-content",position:"absolute",bottom:e.spaces.space16,end:e.spaces.space16},traceIcon:{width:e.spaces.space16,height:e.spaces.space16,color:e.colors.gray900},traceText:{fontWeight:e.fontWeights.regular,color:e.colors.gray900,fontSize:e.fontSizes.subtext2}})))},767075:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(202784),o=a(107267),s=a(725516);function i({analyticsMetricPrefix:e="message-steps",completedTimestamp:t,fromTimestamp:a,messageStepAccumulator:i}){const r=(0,s.z)(),l=(0,o.useLocation)(),{state:c}=i,m="STARTED"===c,d="COMPLETED"===c;return n.useEffect((()=>{const t=()=>{"hidden"===document.visibilityState?m&&a&&r.scribe({component:`${e}-in-progress-visibility`,action:"hide",data:{event_info:JSON.stringify({to:"off-app"}),duration_ms:Date.now()-a}}):"visible"===document.visibilityState&&m&&r.scribe({component:`${e}-in-progress-visibility`,action:"show",data:{event_info:JSON.stringify({from:"off-app"})}})};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}),[m,r,a,t,e]),n.useEffect((()=>(m?r.scribe({component:`${e}-in-progress-visibility`,action:"show",data:{event_info:JSON.stringify({from:"in-app"})}}):d&&r.scribe({component:`${e}-completed`,action:"view"}),()=>{m&&a&&r.scribe({component:`${e}-in-progress-visibility`,action:"hide",data:{event_info:JSON.stringify({to:"in-app"}),duration_ms:Date.now()-a}})})),[l]),null}},235493:(e,t,a)=>{a.d(t,{Z:()=>u});var n=a(202784),o=a(731708),s=a(392237),i=a(111677),r=a.n(i);const l=r().bf780b13,c=r().bb7e2143;function m({aborted:e,completed:t,completedTimestamp:a,fromTimestamp:s,style:i,weight:r}){const[m,p]=n.useState((()=>s&&a&&0!==a?Math.max(0,Math.floor((a-s)/1e3)):s?Math.max(0,Math.floor((Date.now()-s)/1e3)):0)),u=n.useMemo((()=>null===s?Date.now():s),[s]),y=n.useRef(null);return n.useEffect((()=>{if(!t&&!e){if(u){const e=()=>{const e=Math.max(0,Math.floor((Date.now()-u)/1e3));p(e)};y.current=window.setInterval(e,1e3)}return()=>window.clearInterval(y.current)}window.clearInterval(y.current)}),[u,t,e]),n.createElement(o.ZP,{style:[d.elapsedSeconds,i],weight:r},m<60?c({seconds:m}):l({minutes:Math.floor(m/60),seconds:m%60}))}const d=s.default.create((e=>({elapsedSeconds:{color:e.colors.gray700,fontSize:e.fontSizes.subtext2,lineHeight:e.fontSizes.subtext2}}))),p=(e,t)=>e.completed===t.completed&&e.aborted===t.aborted&&e.completedTimestamp===t.completedTimestamp&&e.fromTimestamp===t.fromTimestamp,u=n.memo(m,p)},630961:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(202784),o=a(214997),s=a(325686),i=a(757483),r=a(392237),l=a(215337);function c({children:e,gradientColor:t,onCancelAutoScroll:a,onRestartAutoScroll:c,scrollViewContentContainerStyle:d,scrollViewRef:p,scrollViewStyle:u,stickyHeaderIndices:y,style:g}){const f=n.useCallback((()=>[i.Z.hexToCss(t||r.default.theme.colors.gray50,0),i.Z.hexToCss(t||r.default.theme.colors.gray50,.8),i.Z.hexToCss(t||r.default.theme.colors.gray50,1)]),[t]),h=n.useRef(0);return n.createElement(s.Z,{style:[m.container,g]},n.createElement(l.Z,{angle:0,colors:f(),style:m.traceGradientTop}),n.createElement(l.Z,{colors:f(),style:m.traceGradientBottom}),n.createElement(o.Z,{contentContainerStyle:[m.scrollViewContentContainer,d],onScroll:e=>{const{contentOffset:t,contentSize:n,layoutMeasurement:o}=e.nativeEvent,s=t.y;t.y+o.height>=n.height-50?c():s<h.current&&s-h.current<-5&&a(),h.current=s},ref:p,scrollEventThrottle:16,showsVerticalScrollIndicator:!1,stickyHeaderIndices:y,style:[m.scrollView,u]},e))}const m=r.default.create((e=>({container:{flex:1,position:"relative"},scrollView:{},scrollViewContentContainer:{position:"relative"},traceGradientTop:{position:"absolute",width:"100%",height:"5%",top:0,zIndex:1},traceGradientBottom:{position:"absolute",width:"100%",height:"5%",bottom:0,zIndex:1}})))},966488:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(202784),o=a(154003),s=a(731708),i=a(392237),r=a(111677);const l=a.n(r)().aa7c96bb;function c({count:e,onClick:t,style:a}){return n.createElement(o.ZP,{backgroundColor:"transparent",borderColor:"transparent",onPress:t,size:"smallCompact",style:[m.seeAllButton,a]},n.createElement(s.ZP,{style:m.seeAllText,weight:"normal"},l({numResults:e})))}const m=i.default.create((e=>({seeAllButton:{width:"max-content"},seeAllText:{fontSize:e.fontSizes.subtext2,color:e.colors.gray700}})))},299399:(e,t,a)=>{a.d(t,{Z:()=>A});var n=a(202784),o=a(214997),s=a(325686),i=a(392237),r=a(757483),l=a(530732),c=a(215337),m=a(721266),d=a(323265),p=a(725405),u=a(465086),y=a(207683),g=a(988290),f=a(617568),h=a(731708),b=a(111677),C=a.n(b),w=a(408814),x=a(58399),S=a(970205),E=a(235493);const v=C().f5a2377e,k=C().g3ce0132,Z=C().a4d9dbfa,T=C().f8007364,P=C().ca53f780;function I({completed:e,completedTimestamp:t,expanded:a,fromTimestamp:o,id:i,isPastSummary:r=!1}){const l=n.useCallback((()=>n.createElement(s.Z,{style:D.thinkingLabel,weight:"bold"},n.createElement(s.Z,{style:D.iconContainer},n.createElement(w.default,{style:[D.lightBulbIcon,e||r?D.iconVisible:void 0]}),n.createElement(S.Z,{style:{...D.loadingIcon,...e?{}:D.iconVisible,...e?D.iconHide:{}}})),0!==t&&r||0!==o&&!r?n.createElement(h.ZP,{weight:"medium"},e?k:v):n.createElement(h.ZP,{weight:"medium"},Z),0!==t&&r||0!==o&&!r?n.createElement(E.Z,{completed:e,completedTimestamp:t,fromTimestamp:o,style:D.elapsedTime,weight:"medium"}):null)),[e,r,t,o]);return n.createElement(s.Z,{style:D.headerContainer},n.createElement(s.Z,{style:D.cardHeader},n.createElement(s.Z,{style:D.infoContainer},l(),n.createElement(h.ZP,{color:"gray700",size:"subtext1"},a?P:T)),n.createElement(x.default,{style:[D.icon,a?D.expandedIcon:null]})))}const D=i.default.create((e=>({headerContainer:{width:"100%",transition:"background-color 0.2s ease"},cardHeader:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"center"},infoContainer:{color:e.colors.gray700,display:"flex",flexDirection:"column",gap:6},icon:{color:e.colors.gray700,transition:"transform 0.2s ease",height:e.spaces.space24,width:e.spaces.space16},expandedIcon:{transform:"rotate(90deg)"},thinkingLabel:{flexDirection:"row",gap:e.spaces.space4,alignItems:"center"},elapsedTime:{color:e.colors.text,fontSize:e.fontSizes.body},iconContainer:{position:"relative",width:e.spaces.space24,height:e.spaces.space24},lightBulbIcon:{fill:"none",color:e.colors.text,position:"absolute",top:"50%",start:"50%",transform:"translate(-50%, -50%) scale(0.8)",width:"100%",height:"100%",opacity:0},loadingIcon:{width:"100%",height:"100%",opacity:0},iconVisible:{opacity:1,animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},iconHide:{opacity:0,animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:1},"100%":{opacity:0}}]}})));function R({completed:e,endStreamTimestamp:t,fromTimestamp:a,hasResponseText:h,id:b,isPastThinkingTrace:C,shownTrace:w}){const x=(0,p.Z)(),[S,E]=n.useState(!1),[v,k]=n.useState(null),[Z]=(0,u.h)({scrollingFrame:v?.getScrollableNode(),enabled:!C&&!e,autoStart:!C&&!e}),{isCompactLayout:T,isGrokDrawer:P}=(0,g.ZP)(),D=i.default.theme.colors.gray0,R=n.useCallback((()=>[r.Z.hexToCss(D||i.default.theme.colors.gray0,0),r.Z.hexToCss(D||i.default.theme.colors.gray0,.8),r.Z.hexToCss(D||i.default.theme.colors.gray0,1)]),[D]);return n.useEffect((()=>{e&&E(!1)}),[e]),n.createElement(s.Z,{style:[z.container,T?z.compactContainer:void 0]},n.createElement(l.Z,{interactiveStyles:z.interactiveHeaderContainer,onClick:()=>{x.scribe({element:"grok-reasoning-card-"+(S?"collapse":"expand"),action:"click"}),E(!S)},style:z.headerContainer},(({isHovered:o})=>n.createElement(s.Z,{style:z.headerContainer},n.createElement(I,{completed:e,completedTimestamp:t,expanded:S,fromTimestamp:a,id:b,isPastSummary:C}),C?null:n.createElement(s.Z,{style:[{width:"100%",height:150,position:"relative"},{display:h||S?"none":"flex"}]},n.createElement(f.w,{charLimit:2e3,text:w}),n.createElement(c.Z,{angle:0,colors:R(),style:z.traceGradientTop}),n.createElement(c.Z,{angle:180,colors:R(),style:z.traceGradientBottom}))))),n.createElement(s.Z,{style:[z.collapsedOuterThinkingContainer,S?z.expandedOuterThinkingContainer:void 0]},n.createElement(s.Z,{style:{position:"relative"}},n.createElement(m.Z,{size:"space8"}),n.createElement(o.Z,{contentContainerStyle:z.thinkingContentContainer,ref:k,showsVerticalScrollIndicator:!1,style:[z.thinkingContainer,T?z.compactThinkingContainer:void 0,P?z.drawerThinkingContainer:void 0]},n.createElement(y.default,{disableCodeBlockStickyHeader:!0,disableLinks:d.ZP.isWebView(),isAnimated:!1,markdownText:w,style:z.markdownStyle}),n.createElement(s.Z,{ref:Z,style:{position:"relative",top:-250,width:100,height:1}})),n.createElement(m.Z,{size:"space8"}),n.createElement(c.Z,{angle:0,colors:R(),style:z.thinkingGradientTop}),n.createElement(c.Z,{angle:180,colors:R(),style:z.thinkingGradientBottom}))))}const z=i.default.create((e=>({container:{marginHorizontal:e.spaces.space12,marginBottom:e.spaces.space16,opacity:1,animationDuration:"0.5s",borderStyle:"solid",borderColor:e.colors.gray200,borderWidth:1,animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],overflow:"hidden",borderRadius:e.spaces.space24,backgroundColor:e.colors.gray0,padding:e.spaces.space20},compactContainer:{marginBottom:e.spaces.space12,marginHorizontal:e.spaces.space16,padding:e.spaces.space16},interactiveHeaderContainer:{backgroundColor:"transparent",cursor:"pointer"},collapsedOuterThinkingContainer:{display:"grid",gridTemplateRows:"0fr",transition:"250ms grid-template-rows ease",position:"relative"},expandedOuterThinkingContainer:{gridTemplateRows:"1fr"},thinkingContainer:{maxHeight:"35vh"},drawerThinkingContainer:{maxHeight:"45vh"},compactThinkingContainer:{maxHeight:"30vh"},thinkingContentContainer:{paddingVertical:e.spaces.space32},thinkingGradientTop:{position:"absolute",width:"100%",height:"5%",top:0},thinkingGradientBottom:{position:"absolute",width:"100%",height:"5%",bottom:0},headerContainer:{position:"flex",flexDirection:"column"},markdownStyle:{width:"100%"},thinkingLabelContainer:{position:"relative"},thinkingLabel:{opacity:1},traceContainer:{marginTop:5,display:"flex",color:e.colors.gray1000,flexDirection:"column",flex:1,overflow:"hidden"},traceGradientTop:{position:"absolute",width:"100%",height:"40%",top:0},traceGradientBottom:{position:"absolute",width:"100%",height:"20%",bottom:0}}))),A=n.memo(R)},996172:(e,t,a)=>{a.d(t,{N:()=>w});var n=a(202784),o=a(325686),s=a(154003),i=a(731708),r=a(392237),l=a(111677),c=a.n(l),m=a(546351),d=a(725516),p=a(125363),u=a(450622),y=a(654917),g=a(988290);const f=c().d09bf5d0,h=c().f4d7b184,b=c().f9305f48,C=c().cc232e3c,w=({backoffMultiplier:e=2,conversationKey:t,initialBackoffMs:a=1e3,maxRetries:r=5})=>{const l=(0,p.I0)(),c=(0,d.z)(),w=(0,y.uf)(),{isCompactLayout:S,isGrokDrawer:E}=(0,g.ZP)(),v=S||E,k=(0,p.v9)(w.selectConversationId),[Z,T]=n.useState(!1),P=n.useCallback((()=>{k&&(T(!0),l((0,u.$)(k,t,c)))}),[c,k,l,t]),I=n.createElement(s.ZP,{disabled:Z,icon:n.createElement(m.default,null),onPress:P,size:"small",style:x.button,type:"primaryFilled"},Z?C:b);return v?n.createElement(o.Z,{style:x.compactContainer},n.createElement(i.ZP,{color:"gray900"},`${f} ${h}`),I):n.createElement(o.Z,{style:x.container},n.createElement(o.Z,{style:x.content},n.createElement(i.ZP,{size:"subtext1"},f),n.createElement(i.ZP,{color:"gray900",size:"subtext1"},h)),I)},x=r.default.create((e=>({container:{marginVertical:e.spaces.space8,marginHorizontal:e.spaces.space16,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:e.spaces.space12,width:"max-content",maxWidth:"100%",borderWidth:1,borderStyle:"solid",borderColor:e.colors.gray300,borderRadius:e.spaces.space16,backgroundColor:e.colors.gray0,padding:e.spaces.space16,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},compactContainer:{marginVertical:e.spaces.space8,marginHorizontal:e.spaces.space16,display:"flex",flexDirection:"column",gap:e.spaces.space16,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},icon:{width:e.spaces.space24,height:e.spaces.space24},content:{display:"flex",flexDirection:"column",gap:e.spaces.space8},button:{width:"max-content"}})))},545519:(e,t,a)=>{a.d(t,{V:()=>r});var n=a(202784),o=a(400752),s=a(420182);const i="rweb.grok.resumability";function r(e,t,a){const r=(0,o.Dv)(s.lZ),[l,c]=n.useState(0),[m,d]=n.useState(0),[p,u]=n.useState("");n.useEffect((()=>{t&&u(t)}),[t]);const y=async e=>{try{const t=await r.get(i),a=t?.timers||new Map,n=a.get(p)||{startStreamTime:0,endStreamTime:0};n.startStreamTime=e,a.set(p,n),await r.set(i,{timers:a}),c(e)}catch(e){}},g=async e=>{try{const t=await r.get(i),a=t?.timers||new Map,n=a.get(p)||{startStreamTime:0,endStreamTime:0};n.endStreamTime=e,a.set(p,n),await r.set(i,{timers:a}),d(e)}catch(e){}},f=async()=>{try{const e=await r.get(i);return(e?.timers instanceof Map?e.timers.get(p):null)||null}catch(e){return null}};return n.useEffect((()=>{let e=!0;return(async()=>{try{const t=await f();if(!e)return;t&&(c(t.startStreamTime||0),d(t.endStreamTime||0)),!a?.startStreamTime||t&&t.startStreamTime||await y(a.startStreamTime);const n=a?.thinkingTraceEnd||a?.deepsearchEnd||a?.endStreamTime;!n||t&&t.endStreamTime||await g(n)}catch(e){}})(),()=>{e=!1}}),[p,a]),{setStartTime:y,setEndTime:g,getStreamTimes:f,deleteStreamTimes:async()=>{try{const e=await r.get(i);if(e?.timers instanceof Map){const t=e.timers;t.has(p)&&(t.delete(p),await r.set(i,{timers:t}))}}catch(e){}},persistenceKey:p,fromTimestamp:l,completedTimestamp:m}}},238910:(e,t,a)=>{a.d(t,{nJ:()=>ye,ZP:()=>fe,YM:()=>ge});var n=a(202784),o=a(325686),s=a(392237),i=a(111677),r=a.n(i),l=a(725516),c=a(448781),m=a(744610),d=a(721266),p=a(154003),u=a(647174),y=a(841972),g=a(19197),f=a(731708),h=a(664345),b=a(970205),C=a(235493);const w=r().ee000b0d;function x({aborted:e,completed:t,completedTimestamp:a,fromTimestamp:s,isPast:i,numSources:r,title:l}){const c=0!==s;return n.createElement(o.Z,{style:S.container},n.createElement(o.Z,{style:S.iconContainer},t||e?n.createElement(h.default,{style:S.searchIcon}):n.createElement(b.Z,{style:S.loadingIcon})),n.createElement(o.Z,{style:S.headerContainer},n.createElement(f.ZP,{style:S.header,weight:"medium"},l),n.createElement(o.Z,{style:S.subHeaderContainer},i||!c?n.createElement(n.Fragment,null,n.createElement(f.ZP,{style:S.sources},w({numSources:r}))):n.createElement(n.Fragment,null,n.createElement(C.Z,{aborted:e,completed:t,completedTimestamp:a,fromTimestamp:s}),void 0!==r&&r>0&&n.createElement(n.Fragment,null,n.createElement(o.Z,{style:S.dot}),n.createElement(f.ZP,{style:S.sources},w({numSources:r})))))))}const S=s.default.create((e=>({container:{display:"flex",flexDirection:"row",gap:e.spaces.space8},iconContainer:{width:e.spaces.space20,display:"flex",flexDirection:"column",alignItems:"center"},searchIcon:{position:"relative",width:e.spaces.space16,height:e.spaces.space16,top:2},loadingIcon:{position:"relative",top:-1},headerContainer:{display:"flex",flexDirection:"column"},header:{},subHeaderContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8},dot:{width:e.spaces.space4,height:e.spaces.space4,borderRadius:e.spaces.space4,backgroundColor:e.colors.gray700},sources:{color:e.colors.gray700,fontSize:e.fontSizes.subtext2}}))),E=(e,t)=>e.completed===t.completed&&e.aborted===t.aborted&&e.numSources===t.numSources&&e.title===t.title&&e.fromTimestamp===t.fromTimestamp&&e.completedTimestamp===t.completedTimestamp,v=n.memo(x,E);var k=a(630961),Z=a(25825),T=a(530732),P=a(293723),I=a(227674),D=a(397159);const R=r().c2745fa4;function z({active:e,header:t,onStepClick:a,style:i}){const r=t.state===D.Fi.IN_PROGRESS,l=t.state===D.Fi.COMPLETED,c=t.state===D.Fi.FAILED;return n.createElement(T.Z,{interactiveStyles:A.stepInteractiveStyle,onClick:()=>{c||a(t.id)},style:[A.step,i]},(({isHovered:a})=>n.createElement(n.Fragment,null,n.createElement(o.Z,{style:A.statusIconContainer},n.createElement(Z.Z,{color:s.default.theme.colors.gray900,size:"small",style:[A.statusIcon,r?A.statusIconVisible:void 0,r?void 0:A.statusIconHide]}),n.createElement(P.default,{style:[A.statusIcon,A.completeFailedIcon,l?A.completeFailedIconVisible:void 0,t.isCompleteHeader?A.isSpecialCompleteIcon:void 0]}),n.createElement(I.default,{style:[A.statusIcon,A.completeFailedIcon,c?A.completeFailedIconVisible:void 0]})),c?n.createElement(f.ZP,{style:A.title},R):n.createElement(f.ZP,{style:[A.title,l?A.completedTitle:void 0,a?A.hoveredTitle:void 0,e?A.hoveredTitle:void 0]},t.label))))}const A=s.default.create((e=>({stepInteractiveStyle:{backgroundColor:"transparent"},step:{display:"flex",flexDirection:"row",gap:e.spaces.space8},statusIconContainer:{position:"relative",width:e.spaces.space20,height:e.spaces.space20,backgroundColor:e.colors.gray50},statusIcon:{position:"absolute",top:"50%",start:"50%",transform:"translate(-50%, -50%)",opacity:0,width:"100%",height:"100%"},statusIconVisible:{opacity:1,animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},statusIconHide:{opacity:0,animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:1},"100%":{opacity:0}}]},completeFailedIcon:{color:e.colors.gray900,width:e.spaces.space20,height:e.spaces.space20},completeFailedIconVisible:{opacity:1,transform:"translate(-50%, -50%) scale(1)",animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0,transform:"translate(-50%, -50%) scale(0.8)"},"50%":{opacity:.8,transform:"translate(-50%, -50%) scale(1.2)"},"75%":{opacity:.9,transform:"translate(-50%, -50%) scale(0.95)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"}}]},isSpecialCompleteIcon:{color:e.colors.green500},title:{fontSize:e.fontSizes.subtext1,color:e.colors.gray700,transition:"color 0.2s ease"},completedTitle:{},hoveredTitle:{color:e.colors.brandColor}})));var M=a(557707),B=a(165243),V=a(74514),_=a(405303),L=a(125363),H=a(654917);const $=r().e258000e,O=r().d591a772,N=r().bc49b728,F=r().d8aadeba,W=r().db832e38,G=r().a910cac6,K=r().cbdddb0a;function j({analyticsMetricPrefix:e="message-steps",completed:t}){const a=(0,l.z)(),s=(0,H.uf)(),i=(0,L.v9)(s.selectLastHumanMessage),[r,c]=n.useState(!1),[m,d]=n.useState(!1),[u,y]=n.useState(!1),[g,f]=n.useState(!1),[h,b]=n.useState(!1);n.useEffect((()=>{t&&h&&"granted"===Notification.permission&&(b(!1),new Notification(K,{body:i?.message.message||""}))}),[t,h,i]);return n.createElement(o.Z,null,!t&&("denied"===Notification.permission?n.createElement(p.ZP,{borderColor:"transparent",color:"gray700",hoverLabel:{label:O},icon:n.createElement(B.default,{style:X.icon}),onClick:()=>{y(!0),a.scribe({element:`${e}-notification-denied`,action:"click"})},size:"small",style:X.button}):h?n.createElement(p.ZP,{borderColor:"transparent",color:"gray700",hoverLabel:{label:$},icon:n.createElement(V.default,{style:X.icon}),onClick:()=>{b(!1),d(!0),a.scribe({element:`${e}-notification-off`,action:"click"})},size:"small",style:X.button}):n.createElement(p.ZP,{borderColor:"transparent",color:"gray700",hoverLabel:{label:$},icon:n.createElement(_.default,{style:X.icon}),onClick:()=>{(async()=>{"granted"===Notification.permission?(b(!0),c(!0)):"default"===Notification.permission&&("granted"===await Notification.requestPermission()?(b(!0),c(!0)):(b(!1),f(!0)))})(),a.scribe({element:`${e}-notification-on`,action:"click"})},size:"small",style:X.button})),r&&n.createElement(M.ZP,{autoDismissDelay:2e3,onClose:()=>c(!1),style:X.toast,text:N,withAutoDismiss:!0,withClearButton:!0}),m&&n.createElement(M.ZP,{autoDismissDelay:2e3,onClose:()=>d(!1),style:X.toast,text:F,withAutoDismiss:!0,withClearButton:!0}),u&&n.createElement(M.ZP,{autoDismissDelay:2e3,onClose:()=>y(!1),style:X.toast,text:W,withAutoDismiss:!0,withClearButton:!0}),g&&n.createElement(M.ZP,{autoDismissDelay:2e3,onClose:()=>f(!1),style:X.toast,text:G,withAutoDismiss:!0,withClearButton:!0}))}const X=s.default.create((e=>({button:{borderRadius:e.borderRadii.xLarge},icon:{},toast:{opacity:1,transform:[{translateY:0}],animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0,transform:[{translateY:5}]},"100%":{opacity:1,transform:[{translateY:0}]}}]}}))),q=r().j7d0e836,U=r().eaf55eb4;function J({aborted:e,activeStepId:t,analyticsMetricPrefix:a="message-steps",completed:s,completedTimestamp:i,expanded:r,finalAnswerStreamCompleted:c,fromTimestamp:f,headers:h,hideHeader:b,isPast:C,numSources:w,onCancelAutoScroll:x,onOpenTrace:S,onRestartAutoScroll:E,onStepClick:Z,rawTraceEnabled:T,scrollViewRef:P,setExpanded:I,style:D,title:R}){const A=(0,l.z)(),M=n.useRef(new m.Z.Value(0)).current,B=n.useMemo((()=>h.slice(void 0,-1)),[h]),V=n.useMemo((()=>h[h.length-1]),[h]),_=n.useCallback((e=>{m.Z.spring(M,{toValue:e.nativeEvent.layout.height,useNativeDriver:!1,speed:5}).start()}),[M]);return n.createElement(o.Z,{style:[Y.container,D]},!b&&n.createElement(v,{aborted:e,completed:s,completedTimestamp:i,fromTimestamp:f,isPast:C,numSources:w,title:R||""}),n.createElement(k.Z,{gradientColor:"transparent",onCancelAutoScroll:x,onRestartAutoScroll:E,scrollViewContentContainerStyle:Y.scrollViewContentContainerStyle,scrollViewRef:P},n.createElement(o.Z,{onLayout:_,style:Y.headerSteps},n.createElement(m.Z.View,{style:[Y.lineContainer,{height:M}]},n.createElement(o.Z,{style:Y.line})),B.map(((e,a)=>n.createElement(z,{active:t===e.id,header:e,key:e.id,onStepClick:Z,style:Y.stepHeaderStatusContainer})))),V&&n.createElement(z,{header:V,key:V.id,onStepClick:Z,style:Y.stepHeaderStatusContainer}),n.createElement(d.Z,{size:"space8"})),n.createElement(o.Z,{style:Y.buttonsContainer},n.createElement(p.ZP,{borderColor:"transparent",color:"gray700",hoverLabel:{label:q},icon:r?n.createElement(u.default,{style:Y.icon}):n.createElement(y.default,{style:Y.icon}),onClick:()=>{I(!r),A.scribe({element:`${a}-expand`,action:"click",data:{event_info:(!r).toString()}})},size:"small",style:Y.button}),T&&n.createElement(p.ZP,{borderColor:"transparent",color:"gray700",hoverLabel:{label:U},icon:n.createElement(g.default,{style:Y.icon}),onClick:()=>{S(),A.scribe({element:`${a}-open-trace`,action:"click"})},size:"small",style:Y.button}),!C&&n.createElement(j,{analyticsMetricPrefix:a,completed:s&&c})))}const Y=s.default.create((e=>({container:{display:"flex",flexDirection:"column",gap:e.spaces.space4,backgroundColor:e.colors.gray50,padding:e.spaces.space20,paddingBottom:e.spaces.space8},scrollViewContentContainerStyle:{paddingEnd:e.spaces.space12},headerSteps:{position:"relative"},lineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:e.spaces.space20,position:"absolute",start:0,top:0,height:"100%",paddingTop:e.spaces.space8},line:{width:2,height:"100%",backgroundColor:e.colors.gray300},step:{marginBottom:e.spaces.space16},buttonsContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8},button:{borderRadius:e.borderRadii.xLarge},icon:{},stepHeaderStatusContainer:{paddingBottom:e.spaces.space16}}))),Q=n.memo(J);var ee=a(673787),te=a(767075),ae=a(214997),ne=a(525271),oe=a(187669),se=a(323265),ie=a(465086),re=a(207683);const le=r().a4d9dbfa;function ce({completed:e,gradientColor:t,isPastSummary:a,onDismissed:i,style:r,trace:l}){const[c,m]=n.useState(null),[d]=(0,ie.h)({scrollingFrame:c?.getScrollableNode(),enabled:!a&&!e,autoStart:!a&&!e});return(0,oe.q)((()=>{const e="message-steps-drawer-sub-step";if(document.getElementById(e))return;const t=document.createElement("style");t.setAttribute("id",e),t.textContent=`\n    .message-steps-drawer-sub-step-markdown-text li {\n      margin-top: 0px !important;\n    }\n\n    .message-steps-drawer-sub-step-markdown-text ul {\n      margin-bottom: 0px !important;\n    }\n\n    .message-steps-drawer-sub-step-markdown-text span {\n      font-size: ${s.default.theme.fontSizes.subtext1} !important;\n      color: ${s.default.theme.colors.gray900} !important;\n      line-height: 24px;\n    }\n  `;const a=document.head;return a&&a.appendChild(t),()=>{const t=document.getElementById(e);t&&t.remove()}})),n.createElement(ne.Z,{align:"right",buttonType:"primaryText",onDismissed:i,title:le},n.createElement(o.Z,{style:me.traceScrollViewContainer},n.createElement(ae.Z,{automaticallyAdjustKeyboardInsets:!0,contentContainerStyle:me.traceScrollViewContentContainer,ref:m,style:me.traceScrollView},n.createElement("div",{className:"message-steps-drawer-sub-step-markdown-text"},n.createElement(re.default,{disableLinks:se.ZP.isWebView(),isAnimated:!1,markdownText:l})),n.createElement(o.Z,{ref:d,style:{position:"relative",top:-250,width:100,height:1}}),n.createElement(o.Z,{style:{position:"relative",width:100,height:300}}))))}const me=s.default.create((e=>({thinkingTraceLabel:{color:e.colors.gray800,fontSize:e.fontSizes.subtext3},markdownText:{position:"relative",fontSize:e.fontSizes.subtext2,lineHeight:e.fontSizes.subtext2},traceScrollViewContainer:{flex:1,width:"100%",maxWidth:500,position:"relative"},traceScrollView:{flex:1,width:"100%"},traceScrollViewContentContainer:{flexGrow:1,padding:e.spaces.space16},traceGradientBottom:{position:"absolute",width:"100%",height:"20%",bottom:0},interactivePinButton:{backgroundColor:"transparent"},pinButtonContainer:{position:"absolute",bottom:e.spaces.space16,start:"50%",transform:"translateX(-50%)"},pinButton:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8,borderRadius:e.borderRadii.xLarge,backgroundColor:"transparent",transition:"background-color 0.2s ease",paddingVertical:e.spaces.space8,paddingHorizontal:e.spaces.space12},hoveredPinButton:{backgroundColor:e.colors.gray0},pinIcon:{width:e.spaces.space16,height:e.spaces.space16,color:e.colors.gray900},pinText:{fontSize:e.fontSizes.subtext1,color:e.colors.gray900}}))),de=n.memo(ce),pe=r().b1ac6016,ue=r().f766feca,ye="grok-deepsearch";function ge(e,t,a){return t&&e?a?ue:pe:a?c.p9:c.XD}function fe({completedTimestamp:e,fromTimestamp:t,isLoading:a,messageStepAccumulator:s}){const i=(0,l.z)(),r=n.useRef(null),c=n.useRef(null),m=n.useRef({}),[d,p]=n.useState(!1),[u,y]=n.useState(!1),[g,f]=n.useState(null),[h,b]=n.useState(!1),[C,w]=n.useState(!1),{accumulatedTrace:x,deepsearchArgs:S,isPastSummary:E,state:v,steps:k,traceEnabled:Z}=s,T="COMPLETED"===v,P="ABORTED"===v,I=!!S&&"deeper"===S.mode,D=n.useRef(null);n.useEffect((()=>{const e=()=>{c.current&&!u&&c.current.scrollToEnd({animated:!0}),r.current&&!d&&r.current.scrollToEnd({animated:!0})};return E||(D.current=window.setInterval(e,1e3)),()=>window.clearInterval(D.current)}),[d,u,E]),n.useEffect((()=>{T&&!E&&(c.current&&!u&&c.current.scrollToEnd({animated:!0}),r.current&&!d&&r.current.scrollToEnd({animated:!0}),window.clearInterval(D.current))}),[T,u,d,E]);const R=n.useCallback((e=>{c.current&&c.current.scrollTo({y:e,animated:!0})}),[]),z=n.useCallback((e=>{if(f(e),void 0!==m.current[e]){const t=40;R(Math.max(m.current[e]-t,0))}i.scribe({component:`${ye}-header-click`,action:"click",element:k.find((t=>t.id===e))?.header||""})}),[R,i,k]),A=n.useMemo((()=>k.map((e=>({id:e.id,label:e.header,state:e.state,isCompleteHeader:e.isCompleteHeader})))),[k]);return n.createElement(o.Z,{style:[he.container,C?he.expandedContainer:void 0]},n.createElement(Q,{aborted:P,activeStepId:g,analyticsMetricPrefix:ye,completed:T,completedTimestamp:e,expanded:C,finalAnswerStreamCompleted:!1===a,fromTimestamp:t,headers:A,isPast:E,numSources:s.getNumSources(),onCancelAutoScroll:()=>{p(!0)},onOpenTrace:()=>b(!0),onRestartAutoScroll:()=>{p(!1)},onStepClick:z,rawTraceEnabled:Z,scrollViewRef:r,setExpanded:w,style:he.leftPanel,title:ge(T,!1,I)}),n.createElement(ee.Z,{analyticsMetricPrefix:ye,handleStepLayout:e=>t=>{if(e){const a=t.nativeEvent.layout;m.current[e]=a.y}},messageStepAccumulator:s,onCancelAutoScroll:()=>{y(!0)},onRestartAutoScroll:()=>{y(!1)},scrollViewRef:c,style:he.rightPanel}),h&&n.createElement(de,{completed:T,isPastSummary:E,onDismissed:()=>{b(!1),i.scribe({element:`${ye}-close-trace`,action:"click"})},trace:x}),n.createElement(te.Z,{analyticsMetricPrefix:ye,completedTimestamp:e,fromTimestamp:t,messageStepAccumulator:s}))}const he=s.default.create((e=>({container:{marginBottom:e.spaces.space16,opacity:1,animationDuration:"0.5s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],overflow:"hidden",borderWidth:1,borderStyle:"solid",borderColor:e.colors.gray300,borderRadius:e.spaces.space24,marginHorizontal:e.spaces.space16,display:"flex",flexDirection:"row",height:400,backgroundColor:e.colors.gray0,transition:"all 0.2s ease",start:0},expandedContainer:{height:500,width:"110%",start:-40},leftPanel:{width:200},rightPanel:{flex:1}})))},848957:(e,t,a)=>{a.d(t,{Z:()=>S});var n=a(202784),o=a(706307),s=a(325686),i=a(731708),r=a(392237),l=a(111677),c=a.n(l),m=a(725405),d=a(125363),p=a(623494),u=a(207683),y=a(819102),g=a(674756);const f=c().b52484b6,h=c().f4146dda,b=c().a2c2be32,C=c().g01599b6,w=c().e02694e0,x=c().h6867fcc;function S({conversationId:e,grokModule:t,isLoading:a,message1:r,message2:l}){const c=(0,y.u)(r?.message??"",!1),S=(0,y.u)(l?.message??"",!1),v=(0,d.I0)(),k=(0,m.Z)(),Z=(m,d)=>n.createElement(s.Z,{style:E.messageContainer},n.createElement(s.Z,{style:E.contentContainer},n.createElement(i.ZP,{style:E.responseLabel},0===d?C:w),(e=>n.createElement(n.Fragment,null,n.createElement(s.Z,{style:E.searchButtonsContainer},n.createElement(g.R,{isAnimated:!0,postIds:e?.postIds??[],webResults:e?.webResults??[]})),a&&""===e?.message&&(null!=e?.webResults&&e?.webResults.length>0||null!=e?.postIds&&e?.postIds.length>0)&&n.createElement(s.Z,{style:E.searchingLabelContainer},n.createElement(i.ZP,{style:E.searchingLabel},n.createElement("span",null,f)))))(m),n.createElement(s.Z,{style:E.labelSpacer}),n.createElement(u.default,{citations:[...m.webResults??[],...m.citedWebResults??[]],disableLinks:!1,isAnimated:!1,markdownText:0===d?c:S,style:E.markdownText})),!a&&n.createElement(o.Z,{onPress:()=>{(0,p.G$)(k,{conversationId:e,preferredMessage:m,nonPreferredMessage:0===d?l:r,preferredMessageIndex:d,nonPreferredMessageIndex:0===d?1:0}),v(t.setPreferredResponse(d)),v(t.setUsingExperiment(!1))},style:E.preferButton},n.createElement(i.ZP,{style:E.preferButtonText},x)));return n.createElement(s.Z,{style:E.container},n.createElement(i.ZP,{style:E.questionBold},h),n.createElement(i.ZP,{style:E.questionRegular},b),n.createElement(s.Z,{style:E.sideBySideContainer},Z(r,0),n.createElement(s.Z,{style:E.gap}),Z(l,1)))}const E=r.default.create((e=>({container:{width:"80%",alignItems:"center",marginBottom:e.spaces.space48},sideBySideContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%",padding:e.spaces.space16},messageContainer:{flex:1,backgroundColor:e.colors.gray0,padding:e.spaces.space16,borderRadius:e.borderRadii.medium,flexDirection:"column",justifyContent:"space-between"},questionBold:{fontWeight:"bold",marginBottom:e.spaces.space4},questionRegular:{marginBottom:e.spaces.space8},searchButtonsContainer:{paddingHorizontal:e.spaces.space4,marginBottom:e.spaces.space4},buttonContainer:{alignItems:"center",justifyContent:"center"},searchingLabelContainer:{position:"relative",width:"fit-content",animationDuration:"0.3s",opacity:1,animationTimingFunction:"linear",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},searchingLabel:{color:e.colors.transparent,backgroundImage:`linear-gradient(to right, ${e.colors.gray600} 0%, ${e.colors.gray900} 20%, ${e.colors.gray500} 40%, ${e.colors.gray600} 100%)`,opacity:1,display:"inline-block",backgroundClip:"text",animationDuration:"0.7s",backgroundRepeat:"no-repeat",animationIterationCount:"infinite",animationTimingFunction:"linear",animationKeyframes:[{"0%":{backgroundPositionX:"-2em"},"100%":{backgroundPositionX:"7em"}}]},preferButton:{marginTop:e.spaces.space24,padding:e.spaces.space8,backgroundColor:e.colors.gray100,borderRadius:20,alignItems:"center",borderColor:e.colors.gray600,borderWidth:1},contentContainer:{flex:1},hoverButton:{backgroundColor:e.colors.gray50},preferButtonText:{color:e.colors.brandColor,fontWeight:"semi-bold"},gap:{width:20},responseLabel:{fontWeight:"bold",marginBottom:e.spaces.space4,textAlign:"start",color:e.colors.gray600},labelSpacer:{height:e.spaces.space8},markdownText:{textAlign:"start"}})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Grok-f8a31592.1aa2722a.js.map