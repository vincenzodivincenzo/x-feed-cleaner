"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606"],{582129:(A,e,t)=>{t.d(e,{E3:()=>V,HQ:()=>U,Hi:()=>O,JE:()=>AA,Mf:()=>P,QJ:()=>W,RB:()=>nA,Tx:()=>z,V$:()=>K,VL:()=>eA,_C:()=>D,aG:()=>tA,dq:()=>N,j:()=>L,ts:()=>J,zr:()=>X});t(136728),t(571372);var n=t(614983),s=t.n(n),o=t(565058),a=t(400752),r=t(987809),c=t(910626),i=t(840590),l=t(668260),d=t(111677),u=t.n(d),p=t(239496),m=t(420182),_=t(42134),h=t(545937),w=t(484633),y=t(381904),f=t(610214),g=t(390387),S=t(601576),b=t(905710),E=t(811233),v=t(110138),I=t(163889),B=t(427266),M=t(774717),Z=t(934871),C=t(625555),G=t(41931),k=t(4427),R=t(790997),j=t(688327),Q=t(942428),x=t(302217),T=t(895229),F=t(509599),H=t(261703);const D=(0,o.cn)((A=>p.FH.getRegion())),W=(0,o.cn)(null,((A,e,t)=>{const{addToast:n,conversationControls:s,isSuperFollowersOnly:o,onClose:a,options:r,title:c}=t;return r.content_type&&e(f.HM,r.content_type),A(D).then((A=>(e(Q.WG,A.region),e(H.D,{broadcastOptions:{...r,region:A.region},title:c,conversationControls:s})))).then((A=>(a?.(),L({contentType:r.content_type,id:A.audioSpaceId,isAnonymous:!1,isLive:!0,isReplay:!1,isSuperFollowersOnly:o,mediaKey:A.mediaKey,role:w.Q.host,clearAndLoadSpace:A=>e(y.e,A),resetExpandedDockStore:A=>e(f.wM,A)}),A.audioSpaceId))).catch((()=>{a?.(),n&&n({text:$})}))})),N=(0,o.cn)(null,((A,e,{isEnded:t,isKicked:n})=>{const s=A(_.rm),o=A(_.cI);return e(j.Q),t&&s?i.default.push((0,b.e)(s),{forceRenderEnded:!0}):A(k.MG)&&n&&i.default.push(A(E.P)),s?e(R.Hs,{spaceUserRole:o,spaceId:s,wasKicked:n}):Promise.resolve()})),P=(0,o.cn)(null,(async(A,e,t)=>{const n=A(_.cI);e(j.Q),await e(R.pI),await e(C.Dn,t),await e(R.Hs,{spaceUserRole:n,spaceId:t})}));function X(){return(0,a.b9)(j.R)}const Y=(0,o.cn)(!1);function J(){return(0,a.Dv)(Y)}const z=(0,r.xu)((A=>(0,o.cn)(null,(async(e,t)=>{t(k.fJ,!0),t(Y,!0);const n=await e((0,k.Xk)(A));return t(K,{conferenceId:A,broadcastId:n})})))),K=(0,o.cn)(null,(async(A,e,{broadcastId:t,conferenceId:n})=>{try{return e(k.fJ,!0),e(Y,!0),A(T.p_)||(await A((0,F.tq)(t)),A(G.v)||await e(Z.yw)),e(U,t)}catch(e){throw A(T.Fn)&&i.default.goBack(),e}})),U=(0,o.cn)(null,((A,e,t)=>{A(T.p_)||e(x.FF,t),e(k.fJ,!0),e(Y,!0);const n=M.P_();return A((0,F.tq)(t)).then((n=>{if(!n)return Error("failed to find space");if(n.disallow_join)return Error("cannot join space");if(!n.media_key)return Error("failed to find space key");const s=n.media_key,o=(n.is_space_available_for_replay&&[l.default.SpaceState.Ended,l.default.SpaceState.TimedOut].includes(n.state))??!1,a=n.narrow_cast_space_type===l.default.AudienceEnum.superFollowersOnly,r=(0,g._h)(A(m.qc).getState()),c=n.host?.user_id===r?w.Q.host:w.Q.speaker;return L({contentType:n.content_type,id:t,isAnonymous:!1,isLive:n.state===l.default.SpaceState.Running,isReplay:o,isSuperFollowersOnly:a,mediaKey:s,origin:void 0,role:c,started_at:n?.started_at,clearAndLoadSpace:A=>e(y.e,A),resetExpandedDockStore:A=>e(f.wM,A)}),c===w.Q.host?e(eA,n.rest_id):A(T.p_)?e(R.Sk,{spaceId:n.rest_id,role:c}):e(AA,{spaceId:n.rest_id,role:c,shouldAutoJoin:!0})})).then((A=>{const e=n.end();return M.IM("conferences:join:success",e),A}),(e=>{const t=n.end();M.IM("conferences:join:failure",t);const{dispatch:s}=A(m.qc);s((0,S.fz)({text:"failed to connect to the conference"})),(0,I.Hj)(e)})).finally((()=>e(Y,!1)))}));function V(A){let e="live_not_recording";return A?.is_space_available_for_replay&&(e=A?.state===l.default.SpaceState.Running?"live_recording":"replay"),e}function O(A){let e;return A?.narrow_cast_space_type===l.default.AudienceEnum.superFollowersOnly?e="super_followers":A?.narrow_cast_space_type===l.default.AudienceEnum.employeesOnly?e="employees":A?.community&&(e="community"),e}function L(A){const{contentType:e,id:t,addToast:n,isAnonymous:s,isLive:o,isReplay:a,isSuperFollowersOnly:r,mediaKey:i,origin:l,scribe:d,started_at:u,role:p=w.Q.listener,clearAndLoadSpace:m,resetExpandedDockStore:_}=A;v.Z.proxsee.login().then((()=>{i&&(o||a)&&(h.mc(),_({contentType:(0,B.dW)(e),isReplay:a,isAnonymous:s,isSuperFollowersOnly:r,started_at:u}),a&&d&&d(":audiospace:replay:recording:play:click",{origin:l}),m({id:t,isAnonymous:!!s,isLive:o,mediaKey:i,role:p}),d&&d(":audiospace:event:join:listener:success",{origin:l}),l===c.Y.spacebar&&d&&d(":*:*:*:audiospace_fleet:join",{origin:l}))})).catch((()=>{n&&n({text:q})}))}const q=u().c60ed9b0,$=u().d8227e16,AA=(0,o.cn)(null,(async(A,e,t)=>{const{role:n,spaceId:s}=t,o=await e(C.Yn,t),{can_auto_join:a,session_uuid:r}=o;return a&&r?e(R.$R,{spaceId:s,negotiate:!0,createRoom:!1}).then((()=>{e(_.cI,n)})):e(C.K7,s)})),eA=(0,o.cn)(null,(async(A,e,t)=>{const n=A(C.F6),o=await n.reconnectHost(t);if(!o?.broadcast)return Promise.reject(new Error("Broadcast call did not return a broadcast!"));const a=o.access_token;e(C.re,""),await A(C.yj).initialize(a);const r={roomID:o.room_id,streamName:o.stream_name,vidManToken:o.credential,janusURL:o.webrtc_gw_url,isAudioOnly:!0,isPrivate:!1,guestServicesSessionUuid:o.session_uuid};e(R.YX,r),await e(R.$R,{spaceId:t,negotiate:!1,createRoom:!1});const c=A(R.kw),i=A(R.Eg);return s()(c,"Could not reconnect to space due to lack of publisherId"),n.publishBroadcast({broadcast_id:t,webrtc_handle_id:i.config.handlerId,webrtc_session_id:i.config.janusSessionId,janus_publisher_id:c,janus_room_id:t})})),tA=(0,o.cn)(null,(async(A,e,t)=>{const n=A(C.F6),o=await n.prePublishScheduledAudioBroadcast(t),a=await v.Z.audioSpace(t);s()(a,"expected to get audio space metadata");const r=a;s()(o,"expected details");const c=o,i=c.access_token;e(C.re,""),await A(C.yj).initialize(i);const l={roomID:c.room_id,streamName:c.stream_name,vidManToken:c.credential,janusURL:c.webrtc_gw_url,isAudioOnly:!0,isPrivate:!1,guestServicesSessionUuid:""};e(R.YX,l),await e(R.$R,{spaceId:t,negotiate:!1,createRoom:!0});const d=A(R.kw),u=A(R.Eg);return s()(d,"Could not create space due to lack of publisherId"),await n.publishBroadcast({broadcast_id:t,webrtc_handle_id:u.config.handlerId,webrtc_session_id:u.config.janusSessionId,janus_publisher_id:d,janus_room_id:t,status:c.broadcast.status,conversation_controls:r?.conversation_controls||0}),await e(C.TM,{broadcast_id:t,twitter_user_ids:[c.broadcast.twitter_id]}),{broadcast:c.broadcast,audioSpaceMetadata:r}})),nA=(0,o.cn)(null,((A,e,t)=>{A((0,F.tq)(t)).then((A=>{if(!A||!A.media_key||A.disallow_join)return;const n=A.media_key,s=(A.is_space_available_for_replay&&[l.default.SpaceState.Ended,l.default.SpaceState.TimedOut].includes(A.state))??!1;L({contentType:A?.content_type,id:t,mediaKey:n,isLive:A.state===l.default.SpaceState.Running,isReplay:s,isAnonymous:!1,isSuperFollowersOnly:A.narrow_cast_space_type===l.default.AudienceEnum.superFollowersOnly,started_at:A?.started_at,origin:void 0,role:w.Q.listener,clearAndLoadSpace:A=>e(y.e,A),resetExpandedDockStore:A=>e(f.wM,A)})}))}))},625555:(A,e,t)=>{t.d(e,{Bl:()=>g,Dn:()=>Y,F6:()=>z,FS:()=>T,FX:()=>S,H_:()=>k,Ht:()=>N,K7:()=>f,N8:()=>W,NG:()=>v,Sd:()=>C,TM:()=>G,TU:()=>Q,Vp:()=>E,X8:()=>M,Yn:()=>y,Yy:()=>H,ZN:()=>P,bX:()=>R,cH:()=>j,fP:()=>X,hs:()=>F,iq:()=>I,oZ:()=>b,rc:()=>B,re:()=>h,t9:()=>J,w:()=>D,wr:()=>w,xB:()=>Z,yj:()=>K});var n=t(614983),s=t.n(n),o=t(565058),a=t(741810),r=t(650556),c=t(304148),i=t(420182),l=t(42134),d=t(484633),u=t(390387),p=t(692822),m=t(536387),_=t(509599);const h=(0,m.Yh)(),w=(0,o.cn)((A=>{if(A(l.lR)&&A(h.isInit))return A(h)})),y=(0,o.cn)(null,((A,e,t)=>{const{role:n,shouldAutoJoin:s,spaceId:o}=t;return A((0,_.Go)(o)).then((A=>A.joinAsSpeaker(o,{join_as_admin:n===d.Q.cohost||n===d.Q.host,should_auto_join:s}).then((A=>{const{can_auto_join:t,session_uuid:n}=A;return t&&n&&e(h,n),A}))))})),f=(0,o.cn)(null,((A,e,t)=>A((0,_.Go)(t)).then((A=>A.submitSpeakerRequest(t).then((A=>{e(h,A.session_uuid)})))))),g=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.negotiateStream(n)))})),S=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.muteSpeaker(n,t)))})),b=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.unmuteSpeaker(n,t)))})),E=(0,o.cn)(null,((A,e)=>{const t=A(l.rm);if(!t)return Promise.resolve();const n=A(h);return A((0,_.Go)(t)).then((A=>A.cancelSpeakerRequest(t,n)))})),v=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.endStream({session_uuid:n})))})),I=(0,o.cn)(null,((A,e)=>{const t=A(l.rm);if(!t)return Promise.resolve();const n=(0,u._h)(A(i.qc).getState());return n?e(B,t,n):Promise.resolve()})),B=(0,o.cn)(null,((A,e,t,n)=>{const s=A(h);return A((0,_.Go)(t)).then((A=>A.removeAdmin({broadcast_id:t,twitter_user_id:n,session_uuid:s})))})),M=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.lowerHand({session_uuid:n,broadcast_id:t})))})),Z="✋",C=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.raiseHand({session_uuid:n,broadcast_id:t,emoji:Z})))})),G=(0,o.cn)(null,((A,e,t)=>A((0,_.Go)(t.broadcast_id)).then((A=>A.adminInvite(t))))),k=(0,o.cn)(null,((A,e,t,n,s,o)=>A((0,_.Go)(t)).then((A=>A.setSpaceSettings(t,n,s,o))))),R=(0,o.cn)(null,((A,e,t)=>A((0,_.Go)(t)).then((A=>A.muteSpace(t))))),j=(0,o.cn)(null,((A,e,t)=>A((0,_.Go)(t)).then((A=>A.unmuteSpace(t))))),Q=(0,o.cn)(null,((A,e,t)=>{const n=A(h);return A((0,_.Go)(t)).then((A=>A.cancelSpeakerRequest(t,n)))})),x=(0,o.cn)((A=>{const e=A(l.rm);return e?A((0,_.Go)(e)):Promise.resolve(A(K))})),T=(0,o.cn)(null,((A,e,t)=>{const n=A(c.Cl).get(t);return s()(n,"expected session"),A(x).then((A=>A.approveRequest(n.session_uuid)))})),F=(0,o.cn)(null,((A,e,t)=>{const n=A(c.Cl).get(t);return s()(n,"expected session"),A(x).then((A=>A.rejectRequest(n.session_uuid)))})),H=(0,o.cn)(null,((A,e,t,n,s)=>{const o=JSON.stringify({guestBroadcastingEvent:p._M.InviteViewersToCallIn});return A((0,_.Go)(t)).then((A=>(A.sendPrivateMessage(o,p.gK.HydraControlMessage,s,t),A.inviteToSpeak(n,t))))})),D=(0,o.cn)(null,((A,e,t,n)=>A((0,_.Go)(t)).then((A=>A.addAdmin({broadcast_id:t,twitter_user_id:n}))))),W=(0,o.cn)(null,((A,e,t,n)=>{const o=A(c.Cl).get(n);return s()(o,"expected session"),A((0,_.Go)(t)).then((A=>A.muteSpeaker(o.session_uuid,t)))})),N=(0,o.cn)(null,((A,e,t,n)=>A((0,_.Go)(t)).then((A=>A.muteSpeaker(n,t))))),P=(0,o.cn)(null,((A,e,t,n)=>A((0,_.Go)(t)).then((A=>A.removeParticipants([n],t))))),X=(0,o.cn)(null,((A,e,t)=>{const{handlerId:n,janusSessionId:o,janusTargetId:a,periscopeUserId:r,spaceId:i}=t,l=A(c.Cl).get(r);return s()(l,"expected session"),A((0,_.Go)(i)).then((A=>A.streamEject({session_uuid:l.session_uuid,webrtc_handle_id:n,webrtc_session_id:o,janus_room_id:i,janus_participant_id:a})))})),Y=(0,o.cn)(null,((A,e,t)=>A((0,_.Go)(t)).then((A=>A.endAudioSpace(t))))),J=(0,o.cn)((A=>A(z).periscopeUserId())),z=(0,o.cn)((A=>a.E)),K=(0,o.cn)((A=>r.VI))},136397:(A,e,t)=>{t.d(e,{D0:()=>x,TP:()=>P,ZJ:()=>G,_j:()=>F});var n=t(202784),s=t(400752),o=t(565058),a=t(325686),r=t(844685),c=t(154003),i=t(392237),l=t(111677),d=t.n(l),u=t(370751),p=t(516951),m=t(741810),_=t(614646),h=t(420182),w=t(142202),y=t(736063),f=t(125363),g=t(601576),S=t(114084),b=t(692822),E=t(526250),v=t(582129),I=t(625555),B=t(4427),M=t(302217),Z=t(847982),C=t(509599);function G(){const A=(0,s.b9)(R),e=(0,s.oR)();n.useEffect((()=>{const t=w.Z.subscribe(e,b.gK.ConferenceJoinRequest,A);return()=>{t()}}),[A,e]);const t=(0,s.b9)(k);n.useEffect((()=>()=>t([])),[t]),(0,E.N)(J)}const k=(0,o.cn)([]),R=(0,o.cn)(null,((A,e,t)=>{for(const n of t){const t=A(M.Zd);t.log({message:"askToJoin received",chatMessage:JSON.stringify(n)});const s=n.data.sender;if(!s)continue;const{display_name:o,twitter_id:a,username:r}=s;if(!r||!o||!a)continue;if(A(k).includes(a))continue;e(k,(A=>A.concat(a)));const{dispatch:c}=A(h.qc),i=Q({displayName:o,username:r});t.log(`adding toast: ${a}`),c((0,g.fz)({text:i,action:{label:"Allow",onAction:()=>{e(j,a)}},autoDismissDelay:3e4,withClearButton:!0}))}return{clearHeapForMessageType:!0}})),j=(0,o.cn)(null,((A,e,t)=>{const n=A(B.sB);if(!n)return;const s=A(I.F6);s.getConference(n).then((({attendees_twitter_user_ids:A})=>s.updateConference({key:n,attendees_twitter_user_ids:A.concat(t)}))).then((()=>e(C.jQ)))}));function Q({displayName:A,username:e}){return`${A} · @${e} would like to join the conference`}function x(){const A=(0,s.oR)(),e=(0,f.v9)(g.BZ),t=(0,f.I0)();n.useEffect((()=>{if(!e.length)return;const n=A.sub(C.RS,(()=>{const n=A.get(C.RS),s=(0,u.Z)(n.map((({guest_display_name:A,guest_username:e})=>Q({displayName:A,username:e})))),o=e.filter((({text:A})=>"string"==typeof A&&s.has(A)));o.length&&t((0,g.VU)(o.map((({id:A})=>A))))}));return()=>n()}),[t,A,e])}const T=(0,o.cn)(null,((A,e,t,n)=>new Promise(((s,o)=>{i();const a=setInterval(i,5e3),r=()=>{clearInterval(a),clearTimeout(c)},c=setTimeout(r,3e4);function i(){m.E.joinConference(t,{requestToJoin:!0}).then((()=>{e(B.oK,t).then((A=>{e(v.HQ,A),r(),s()}))}),(e=>{if(e instanceof _.$){if(403===e.status)return;if(412===e.status){const{dispatch:e}=A(h.qc),t="No one is in the room to let you in";e((0,g.fz)({text:t})),r(),s()}}r(),o(e)}))}n.addEventListener("abort",r,{once:!0})}))));function F(){const[A]=n.useState((()=>new AbortController));n.useEffect((()=>()=>{A.abort()}),[A]);const e=(0,s.b9)(T),t=(0,s.Dv)(B.sB),o=(0,s.b9)(H);return(0,s.Dv)(H),n.useCallback((()=>{t&&o(e(t,A.signal))}),[A.signal,e,t,o])}const H=(0,o.cn)(),D=d().c3b5b829,W="Requested to Join",N=d().i22835de;function P(){const A=(0,s.Dv)(k);return A.length?n.createElement(a.Z,null,n.createElement(r.Z,{subtext:D({count:A.length}),text:W}),A.map((A=>n.createElement(y.H,{errorConfig:X},n.createElement(Y,{userId:A}))))):null}const X={context:"CONFERENCE_ASK_TO_JOIN"};function Y({userId:A}){const e=(0,Z.$)(A),t=(0,s.b9)(j),o=n.useCallback((()=>{t(A)}),[t,A]);return e?n.createElement(a.Z,{style:z.prospectiveSpeakerUserRow},n.createElement(S.H,{displayMode:"UserCompact",style:z.userCell,user:e,withLink:!1}),n.createElement(a.Z,{style:z.prospectiveSpeakerUserRowButtonsContainer},n.createElement(c.ZP,{onPress:o,size:"small",style:z.prospectiveSpeakerUserRowButton},N))):null}const J=(0,E.v)(((A,e)=>{const t=A(k);if(!t.length)return p.Z;const n=A(C.F$),s=new Set(A(C.Xn)),o=t.filter((A=>!n.has(A)&&!s.has(A)));return o.length!==t.length&&e(k,o),p.Z})),z=i.default.create((A=>({userCell:{flex:1},prospectiveSpeakerUserRow:{width:"100%",justifyContent:"center"},prospectiveSpeakerUserRowButtonsContainer:{flexDirection:"row",gap:A.spaces.space16,marginStart:A.spaces.space16,marginEnd:A.spaces.space16,justifyContent:"center"},prospectiveSpeakerUserRowButton:{flex:1}})))},405070:(A,e,t)=>{t.d(e,{U:()=>r});var n=t(565058),s=t(25252),o=t(536387);const a="data:video/mp4;base64,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",r=(0,n.cn)((A=>{if(A(s.Y))return A(c),A(c.resolved)})),c=(0,o.K9)((()=>function(){const A=document.createElement("video");if(!("captureStream"in A))return;return A.autoplay=!0,A.loop=!0,A.muted=!0,A.src=a,A.play(),new Promise((e=>{const t=A.captureStream();A.onloadedmetadata=()=>{e(t.getVideoTracks()[0]),A.onloadedmetadata=void 0}}))}()))},94751:(A,e,t)=>{t.d(e,{Fz:()=>y,Pm:()=>m,U9:()=>h,_$:()=>g,ce:()=>w,qw:()=>p});var n=t(565058),s=t(516951),o=t(420182),a=t(142202),r=t(23425),c=t(692822),i=t(526250),l=t(811322),d=t(396636),u=t(65178);const p=(0,n.cn)([]),m=(0,n.cn)(""),_=((0,u.g)(),(0,d.Q)((()=>p),((A,e,t)=>{if(A(o.zE).get(r.xK))return e(h,[]),s.Z;e(y,!0),e(h,(A=>[...A,t]));let n=setTimeout((()=>{e(w(t),!0),n=setTimeout((()=>{e(h,(A=>A.filter((A=>A!==t))))}),500)}),5e3);return()=>clearTimeout(n)}))),h=(0,n.cn)([]),w=(0,l.X)((()=>(0,n.cn)(!1))),y=(0,n.cn)(!1),f=(0,i.v)(((A,e)=>(A(r.xK)&&(e(y,!1),e(h,[])),s.Z))),g=(0,n.cn)(null,((A,e)=>{const t=A(o.zE),n=a.Z.subscribe(t,c.gK.Chat,(A=>(A.forEach((A=>{const t=A.body.uuid,n=A.body.body,s=A.data.sender?.twitter_id;if(!n||!s||!t)return;const o={id:t,text:n,timeSent:A.data.timestamp?A.data.timestamp/1e6:0,userId:s};e(p,(A=>[...A,o]))})),{clearHeapForMessageType:!0}))),s=e(_),r=e(f);return()=>{n(),s(),r(),e(S)}})),S=(0,n.cn)(null,((A,e)=>{e(p,[]),e(h,[]),e(m,"")}))},41931:(A,e,t)=>{t.d(e,{S:()=>a,v:()=>r});var n=t(565058),s=t(856642),o=t(4427);const a=(0,n.cn)(!1),r=(0,n.cn)((A=>A(o.MG)&&(c||A(a)))),c="1"===(0,s.parse)(window.location.search.substr(1)).companion},176559:(A,e,t)=>{t.d(e,{V:()=>i,Z:()=>u});var n=t(565058),s=t(516951),o=t(420182),a=t(526250),r=t(934871),c=t(251836);const i=(0,a.v)(((A,e)=>{if(!A(o.f0).isTrue("rweb_conf_composite_video_enabled"))return s.Z;const t=A(c.mb),n=A(r.nq);if(t&&n){const A=new MediaStream;A.addTrack(t);const s=new MediaStream;s.addTrack(n);let o=!1;return e(l,A,s).then((A=>{o?A():o=A})),()=>{"function"==typeof o?o():o=!0}}return s.Z})),l=(0,n.cn)(null,(async(A,e,t,n)=>{const s=document.createElement("video"),o=document.createElement("video");s.muted=o.muted=!0,s.srcObject=t,o.srcObject=n,await Promise.all([s.play(),o.play()]);const a=document.createElement("canvas");let r=a.width=s.videoWidth,c=a.height=s.videoHeight;const i=a.getContext("2d");s.onresize=A=>{r=a.width=s.videoWidth,c=a.height=s.videoHeight};const l=await a.captureStream();let u;return e(d,l),function A(){i.drawImage(s,0,0);const e=o.videoWidth,t=o.videoHeight,n=c/3,a=n*(e/t);i.save();const l=Math.min(e,t),d=l/2,p=Math.min(n,a),m=p/2;(function(A,e){const{radius:t,x:n,y:s}=e;A.beginPath(),A.arc(n,s,t,0,2*Math.PI),A.closePath(),A.clip()})(i,{radius:m,x:r-m,y:0+m}),i.translate(r,0),i.scale(-1,1);const _=e/2-d,h=t/2-d;i.drawImage(o,_,h,l,l,0,0,p,p),i.restore(),u=requestAnimationFrame(A)}(),()=>{A(d)===l&&e(d,void 0),void 0!==u&&cancelAnimationFrame(u)}}));const d=(0,n.cn)(),u=(0,n.cn)((A=>A(d)?.getVideoTracks()[0]))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606.18cbaf2a.js.map