"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67"],{521288:(e,t,i)=>{i.d(t,{Z:()=>V});var r=i(807896),n=i(202784),a=i(325686),s=i(111677),o=i.n(s),l=i(908478),d=i(161821),c=i(731708),p=i(766661),h=i(12686),m=i(276563),w=i(235902),u=i(847224),_=i(950152),g=i(519102),C=i(649846),y=i(952428),T=i(470397),S=i(966886),v=i(126962),x=i(287826),k=i(392237),f=i(530338),E=i(16037),b=i(915813),Z=i(278957),I=i(650028),P=i(451051),R=i(143628),B=i(5273),L=i(528647),A=i(782261),M=i(586035),H=i(454363),D=i(395379);const W=o().bb5c5864,X=o().a8b58cf4,N=o().i5f742fe,q="quote_tweet",U=16/9,V=e=>{const{shouldRenderIfBlocked:t,tweet:i,withBirdwatchPivot:a}=e,s=!!i&&!A.Z.isQuotedTweetUnavailable({is_quote_status:!0,quoted_status:i},t),o=w.ZP.useProps(),l=i?.extended_entities?.media,d=l&&l.length>1&&o.withMediaCarousel();return i&&s?n.createElement(z,(0,r.Z)({},e,{isCarouselItem:o.isCarouselItem(),renderArticleCardInTweet:o.renderArticleCardInTweet(),tweet:i,withBirdwatchPivot:a,withEditAnatomy:i.isEdited&&o.isEditTweetConsumptionEnabled(),withMediaCarousel:d})):n.createElement(R.Z,null)};class z extends n.Component{constructor(...e){super(...e),this._renderForwardPivot=()=>{const{forwardPivotInfo:e,tweet:t}=this.props;if(e&&e.displayType===_.x.SoftIntervention){const{displayType:i,landingUrl:r,softInterventionDisplayType:a,text:s}=e;return n.createElement(u.Z,{displayType:i,inQuoteTweet:!0,isTweetNonCompliant:"non_compliant"===t.limited_actions,landingUrl:r,softInterventionDisplayType:a,text:s,tweetId:t.id_str})}},this._renderBirdwatchPivotTranslationHeader=()=>{const e=this.props.tweet.birdwatch_pivot?.grokTranslation;return e?n.createElement(g.Z,{grokTranslationMode:"auto",style:F.birdwatchTranslationHeader,translateTargetType:"community_note",translationStatus:"translated"}):null},this._renderBirdwatchPivot=()=>{const{tweet:e,withBirdwatchPivot:t}=this.props;if(e.birdwatch_pivot&&t){const t=e.birdwatch_pivot.grokTranslation;return t?n.createElement(p.Z,(0,r.Z)({},e.birdwatch_pivot,{isForQuoteTweet:!0,renderGrokTranslationHeader:this._renderBirdwatchPivotTranslationHeader,subtitle:t.subtitle,tweetId:e.id_str})):n.createElement(p.Z,(0,r.Z)({},e.birdwatch_pivot,{isForQuoteTweet:!0,tweetId:e.id_str}))}},this._renderStaleEditCallout=()=>{const{isCondensed:e}=this.props,t=this.shouldRenderRichContent&&!e;return n.createElement(a.Z,{style:[F.textContentSpacing,t&&F.marginTopSmall]},n.createElement(E.Z,{editType:"stale",textMode:"inline",textSize:"subtext2"}))},this._renderLatestEditIcon=()=>n.createElement(E.Z,{editType:"latest"}),this._mediaCarouselStyle=[F.marginHorizontalSmall,F.marginTopXXSmall,F.marginBottomSmall],this._renderPreviewCta=()=>{const{tweet:e}=this.props;return e.isPreviewDisplay&&e.cta&&n.createElement(a.Z,{style:[F.quotePreview,F.marginBottomSmall]},n.createElement(Z.Z,(0,r.Z)({},e.cta,{renderInQuoteTweet:!0})))},this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e)}}shouldComponentUpdate(e){return!(0,l.Z)(e,this.props)}render(){const{tweet:e}=this.props;return this._isWithheldTweet(e)?this._renderWithheldTweet():this._renderTweet()}_getTweetLink(){const{tweet:e,withEditAnatomy:t}=this.props;let i=e.permalink;return e.isStaleEdit&&t&&(i=A.Z.getTweetLatestVersionPermalink(e)),{pathname:`https://twitter.com${i}`,anchorless:!0}}_renderTweet(){const{id:e,shouldShowBorder:t,style:i,withLink:r}=this.props,s=[F.quoteTweetContainer,t&&F.quoteTweetContainerBorder,!r&&F.quoteTweetWithoutLink,i];return n.createElement(a.Z,{id:e},n.createElement(c.ZP,{style:k.default.visuallyHidden},W),n.createElement(y.Z,{link:r?this._getTweetLink():void 0,onPress:this._handlePress,style:s,withInteractiveStyling:!!r,withOutsetFocusRing:!0},this._renderTweetContent(),this._renderForwardPivot(),this._renderBirdwatchPivot()))}_renderTweetContent(){const{isCondensed:e,tweet:t,withEditAnatomy:i}=this.props;return n.createElement(a.Z,null,this._renderHeader(),e?this._renderTweetContentCondensed():this._renderTweetContentExpanded(),t.isStaleEdit&&i?this._renderStaleEditCallout():null)}_renderTweetContentCondensed(){return n.createElement(a.Z,{style:F.condensedContentBody},this._renderArticleContent(),this.shouldRenderRichContent?n.createElement(a.Z,{style:[F.marginTopXSmall,F.condensedMediaSide,this.props.isCarouselItem?F.carouselStyleMediaSide:void 0],testID:"testCondensedMedia"},this._renderTweetRichContent(!0)):null,n.createElement(a.Z,{style:F.condensedContentSide},this._renderTextContent(!0)),this._renderPreviewCta())}_renderTweetContentExpanded(){const{withMediaCarousel:e}=this.props;return n.createElement(n.Fragment,null,this._renderTextContent(!1),this._renderArticleContent(),this._renderPreviewCta(),this.shouldRenderRichContent?n.createElement(a.Z,{style:e?this._mediaCarouselStyle:F.marginTopXXSmall},this._renderTweetRichContent(!1)):null)}_renderHeader(){const{socialContextProps:e,tweet:t}=this.props,i=t.user||{};return n.createElement(a.Z,{style:F.headerContainer},e?this._renderSocialContext():null,n.createElement(a.Z,{style:[i.highlightedLabel?F.attributionWrapperFlexStart:F.attributionWrapperCenter,F.attributionWrapper]},this._renderUserName(i)))}_renderSocialContext(){const{socialContextProps:e}=this.props;if(e){const{iconStyle:t,style:i,...a}=e;return n.createElement(v.Z,(0,r.Z)({iconStyle:[F.socialContextIconSpacing,t],style:[F.socialContextSpacing,i],withLeftPadding:!1},a))}}_renderTextContent(e){const{isCarouselItem:t,tweet:i,withEditAnatomy:r}=this.props,s=!this.shouldRenderRichContent&&i.isStaleEdit&&r;return n.createElement(a.Z,{style:[F.textContentSpacing,s&&F.marginBottomXXSmall]},i.self_thread?null:this._renderReplyContext(),this._renderTweetText(e),t?null:this._renderShowLinks())}_renderShowLinks(){const{tweet:e}=this.props;return this.shouldRenderShowPollText?this._renderShowText(N):e.self_thread?this._renderShowText(X):null}_renderTweetText(e){const{renderArticleCardInTweet:t,tweet:i,withEditAnatomy:r,withMediaAsTextLinks:a}=this.props,s=i.isStaleEdit&&r,o=i.grok_translated_post,l=i.note_tweet&&i.note_tweet.is_expandable,d=(o?null!=o?.preview_translation:l)?i.permalink:void 0,c=o?.preview_translation??o?.translation??"",p=o?n.createElement(g.Z,{grokTranslationMode:"auto",style:F.translationHeader,translateTargetType:"post",translationStatus:"translated"}):null,h=o?o?.destination_language:i.lang;return n.createElement(n.Fragment,null,p,n.createElement(P.Z,{article:t?i.article:void 0,color:s?"gray700":"text",displayTextRange:o?[0,c.length]:i.display_text_range,entities:o?o?.entities??{}:i.entities,isCondensed:e,isPreviewDisplay:i.isPreviewDisplay,lang:h,numberOfLines:this._renderReplyContext()?4:5,quotedTweetPermalink:i.quoted_status_permalink,style:e?F.marginTopXSmall:F.marginTopXXSmall,text:o?c:i.text,withCardLinks:!0,withMediaLinks:a||i.possibly_sensitive||this._hasSensitiveMediaWarnings(),withQuoteLinks:!0,withShowMore:d}))}_renderUserName(e){const{tweet:t,withHeaderLinks:i,withUserHoverCard:r}=this.props,s=t.author_community_relationship?.role;return n.createElement(a.Z,{style:F.userNameRoot},n.createElement(a.Z,{style:F.userNameWrapper},n.createElement(B.Z,{onClick:this.props.onAvatarClick,onHoverCardScreenNameClick:this.props.onScreenNameClick,screenName:e.screen_name,size:"medium",style:F.userAvatar,uri:e.profile_image_url_https,withHoverCard:r,withLink:i}),n.createElement(L.Z,{onLinkClick:this.props.onScreenNameClick,onScreenNameClick:this.props.onScreenNameClick,screenNameSuffix:(()=>n.createElement(T.Z,null,this._renderTimestamp(t.created_at)))(),tweetId:t.id_str,userData:{affiliateBadgeInfo:e.highlightedLabel,communityModeratorStatus:s,isBlueVerified:e.is_blue_verified,isProtected:e.protected,isVerified:e.verified,name:e.name,screenName:e.screen_name,userId:e.id_str,verifiedType:e.verified_type},withHoverCard:r,withLink:i})),e.highlightedLabel?n.createElement(C.Z,{label:e.highlightedLabel}):null)}_renderArticleContent(){const{renderArticleCardInTweet:e,tweet:t}=this.props;if(e&&t.article)return n.createElement(a.Z,{style:[F.quoteArticle,F.marginBottomSmall]},n.createElement(f.Z,{articleEntity:t.article,hasSensitiveContent:t.possibly_sensitive,mediaVisibilityResults:t.mediaVisibilityResults,renderInQuoteTweet:!0}))}_renderTweetRichContent(e){const{forwardPivotInfo:t,loggedInUserId:i,mediaContentStyles:r,mediaMaxHeight:s,nudges:o,onMediaClick:l,preventVideoPlayback:d,promotedContent:c,shouldShowAltLabelAlways:p,singleImageMaxAspectRatio:w,singleImageMinAspectRatio:u,tweet:_,withActionsDisabled:g,withCenterCrop:C,withLink:y}=this.props;if(M.B(_))return n.createElement(a.Z,{style:F.marginTopXXSmall},n.createElement(H.Z,{tweet:_,withStraightBorders:!0}));if(_.card&&m.default.isSpaceCard(_.card.name))return n.createElement(a.Z,{style:F.marginTopXXSmall},n.createElement(x.Z,{audioSpaceId:_.card.binding_values.id?.string_value,clipMetadata:_.card.binding_values.clip_metadata?.string_value,withStraightBorders:!0}));if(_.card&&m.default.isBroadcastCard(_.card.name))return n.createElement(h.Z,{card:_.card,cardContext:{locationKey:q,tweetId:_.id_str,tweetPermalink:_.permalink,tweetUserId:_.user.id_str,viewerUserId:i,withActionsDisabled:g},preventVideoPlayback:d,promotedContent:c,withBorder:!1,withDetail:!1,withRoundBorder:!1});const T=e?1:U,S=e?1:void 0,v=e?"quote_tweet_small":q,k=Boolean(_.extended_entities?.media&&_.extended_entities?.media.length>1),f={displayOptions:{badgeConfiguration:e?{hideDuration:!1,hideDataSize:!0,hideViewCount:!0}:void 0,hideLeftBadges:e&&k},hidePreviewPlayButton:e},E=!!s&&!e;return n.createElement(b.Z,{authorId:_.user.id_str,authorScreenName:_.user.screen_name,cacheLocationKey:v,containerAspectRatio:T,displayMediaTags:!1,forwardPivotInfo:t,hasSensitiveMedia:_.possibly_sensitive,hideAcceptOverlay:e,isCondensed:e,loggedInUserId:i,mediaContentStyles:r,mediaDetails:_.extended_entities?.media,mediaMaxHeight:s,mediaTagsLink:`${_.permalink}/media_tags`,mediaVisibilityResults:_.mediaVisibilityResults,nudges:o,onClick:l,preventPlayback:e||d,shouldShowAltLabelAlways:p,showBorder:e,showRoundCorners:e,singleImageMaxAspectRatio:e?S:w,singleImageMinAspectRatio:e?S:u,style:E?F.centerItems:void 0,tweetCreatedAt:_.created_at,tweetId:_.id_str,tweetText:_.text,videoAspectRatio:T,videoOptions:f,withCenterCrop:C,withLink:y,withPostPlayback:!0})}_renderTimestamp(e){const{tweet:t,withHeaderLinks:i}=this.props,r=i?{pathname:`https://twitter.com${t.permalink}`}:void 0;return n.createElement(S.Z,{link:r,timestamp:e})}_renderReplyContext(){const{isCarouselItem:e,tweet:t}=this.props;return t.in_reply_to_status_id_str?n.createElement(I.ZP,{displayTextRange:t.display_text_range,inReplyToName:t.in_reply_to_name,inReplyToScreenName:t.in_reply_to_screen_name,inReplyToUserIdStr:t.in_reply_to_user_id_str,linkType:I.ZP.ReplyContextLinkTypes.none,style:[F.marginTopXXSmall,e?F.textOverflowEllipsis:void 0],tweetPermalink:t.permalink,userMentionsEntities:t.entities?.user_mentions}):null}_renderShowText(e){const{withLink:t}=this.props;return n.createElement(c.ZP,{color:"link",style:[F.marginTopXXSmall,!t&&F.disabledLink]},e)}_renderWithheldTweet(){const{style:e,tweet:t}=this.props;return n.createElement(a.Z,{style:e},n.createElement(D.Z,{displayTextRange:t.display_text_range,entities:t.withheld_entities||t.entities,inline:!0,lang:t.lang,text:t.withheld_text||t.text}))}get shouldRenderRichContent(){const{hideMedia:e,tweet:t}=this.props;return!e&&this._hasRichContent(t)&&!t.possibly_sensitive&&!this._hasSensitiveMediaWarnings()}get shouldRenderShowPollText(){const{tweet:e}=this.props;return e.card&&m.default.isPollCard(e.card.name)}_hasRichContent(e){const{extended_entities:t}=e,{withMediaAsTextLinks:i}=this.props;return this._canRenderAudioSpaceCard(e)||this._canRenderBroadcastCard(e)||!!e.article||!(!(t&&t.media&&t.media.length)||i)}_hasSensitiveMediaWarnings(){const{tweet:e}=this.props;return!!e.extended_entities?.media?.flatMap((e=>e.sensitive_media_warning?(0,d.Z)(e.sensitive_media_warning):[])).some(Boolean)}_canRenderAudioSpaceCard(e){return Boolean(e.card&&m.default.isSpaceCard(e.card.name)&&!this.props.isCondensed)}_canRenderBroadcastCard(e){return Boolean(e.card&&m.default.isBroadcastCard(e.card.name)&&!this.props.isCondensed)}_isWithheldTweet(e){return!!e.withheld_scope}}z.defaultProps={hideMedia:!1,onPress:void 0,onMediaClick:void 0,onAvatarClick:void 0,onScreenNameClick:void 0,shouldShowBorder:!0,withCenterCrop:!1,withEditAnatomy:!1,withMediaAsTextLinks:!1,withHeaderLinks:!1,withLink:!0,withUserHoverCard:!0,isCarouselItem:!1,withBirdwatchPivot:!1,renderArticleCardInTweet:!1};const F=k.default.create((e=>({attributionWrapper:{flexShrink:1,flexDirection:"row"},attributionWrapperCenter:{alignItems:"center"},attributionWrapperFlexStart:{alignItems:"flex-start"},carouselStyleMediaSide:{flex:4,maxHeight:`calc(2 * ${e.spaces.space64})`,maxWidth:`calc(2* ${e.spaces.space64})`},centerItems:{alignItems:"center"},condensedMediaSide:{flex:2,alignSelf:"flex-start",marginVertical:e.spaces.space12,marginStart:e.spaces.space12,overflow:"hidden",borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderColor:"transparent"},condensedContentSide:{flex:8,flexBasis:"0%"},condensedContentBody:{flexDirection:"row"},disabledLink:{opacity:.5},headerContainer:{flexDirection:"column",marginHorizontal:e.spaces.space12,marginTop:e.spaces.space12},marginBottomXXSmall:{marginBottom:e.spaces.space4},marginTopXXSmall:{marginTop:e.spaces.space4},marginTopXSmall:{marginTop:e.spaces.space8},marginBottomSmall:{marginBottom:e.spaces.space12},marginHorizontalSmall:{marginHorizontal:e.spaces.space12},marginTopSmall:{marginTop:e.spaces.space12},quoteTweetContainer:{overflow:"hidden",minHeight:e.spaces.space64},quoteTweetContainerBorder:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.xLarge},quoteTweetWithoutLink:{cursor:"default"},socialContextIconSpacing:{marginEnd:e.spaces.space4},socialContextSpacing:{marginBottom:e.spaces.space2,marginStart:e.spaces.space8},textOverflowEllipsis:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},userNameRoot:{flexShrink:1,overflow:"hidden"},userNameWrapper:{alignItems:"center",flexDirection:"row",maxWidth:"100%"},textContentSpacing:{marginHorizontal:e.spaces.space12,marginBottom:e.spaces.space12},timestampWrapper:{flexShrink:0,whiteSpace:"pre"},userAvatar:{marginEnd:e.spaces.space4},quoteArticle:{maxWidth:"100%",paddingHorizontal:e.spaces.space12},quotePreview:{paddingHorizontal:e.spaces.space12,marginTop:e.spaces.space8},translationHeader:{marginBottom:0,marginTop:e.spaces.space8},birdwatchTranslationHeader:{marginBottom:e.spaces.space8}})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67.3fb9116a.js.map