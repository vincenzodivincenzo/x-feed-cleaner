"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-e851f17f"],{192464:(t,e,r)=>{r.d(e,{Z:()=>a});r(571372);var s=r(2138),n=r(666536),o=r(624479),i=r(163889);const a=new class{constructor(){this.usersInApp={},this._throttledInitialFetch=(0,s.Z)((()=>{this.store.dispatch(o.ZP.fetchManyIfNeeded(Object.keys(this.usersInApp)))}),1500)}init(t){this.store=t,this.usersInApp={}}registerUserInApp(t){Object.keys(this.usersInApp).length>50&&(this.usersInApp={},(0,i.ZP)(new Error("Registered users in app has exceeded 50"),{level:"warning"})),this.usersInApp[t]?this.usersInApp[t]=this.usersInApp[t]+1:(this.usersInApp[t]=1,(0,n.Z)(this._throttledInitialFetch(),100))}deregisterUserInApp(t){this.usersInApp[t]&&this.usersInApp[t]>1?this.usersInApp[t]=this.usersInApp[t]-1:delete this.usersInApp[t]}}},4463:(t,e,r)=>{r.d(e,{Z:()=>n});r(571372);function s(t){this.name="AssertionError",this.message=t,this.stack=(new Error).stack}s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;const n=(t,e)=>{if(!t)throw new s(e?`Assertion failed: ${e}`:"Assertion failed (also, no message was provided)")}},988566:(t,e,r)=>{r.d(e,{D$:()=>a,Du:()=>E,GK:()=>_,Iv:()=>S,pz:()=>u,rl:()=>d});var s=r(202784),n=r(688715),o=r(946409),i=r(788993);const a=(t,e,r)=>t.retweeted_status?c(t,e):t.community_id_str&&r?_(t,r):void 0,c=(t,e)=>{if(t.retweeted_status)return{contextType:i.Z.Retweet,isSelfRetweet:t.user.id_str===e,name:t.user.name,screenName:t.user.screen_name}},_=(t,e)=>({contextType:i.Z.Community,landingUrl:{url:(0,n.ju)(`https://x.com/i/communities/${e.id_str}`),urlType:"ExternalUrl"},text:e.name}),E=({isCellWithProminentSocialContext:t,socialContext:e,topic:r})=>{if(e?.topicContext){const s=e.topicContext;return{contextType:t?i.Z.TextOnly:i.Z.Topic,landingUrl:{url:`twitter://topics_timeline?id=${s.topicId}`,urlType:"DeepLink"},text:r?.name,topicContext:s}}if(e?.generalContext)return{...e.generalContext}},d=t=>{const{contextType:e,landingUrl:r,text:s}=t;return{link:r?(0,o.s9)(r):void 0,text:s,contextType:e}},S={contextType:i.Z.Pin,text:""},u=s.createContext(void 0)},618566:(t,e,r)=>{r.d(e,{P:()=>n,a:()=>o});var s=r(421575);const n=t=>({topicId:t.topicId,functionalityType:t.functionalityType}),o=t=>t===s.q.Star?s.q.Star:t===s.q.Favorite?s.q.Favorite:t===s.q.Interested?s.q.Interested:s.q.Default},214647:(t,e,r)=>{r.d(e,{Mt:()=>A,V4:()=>l,aT:()=>u,pG:()=>w,rT:()=>p});r(202784);var s=r(950152),n=r(111677),o=r.n(n),i=r(500040),a=r(161821),c=r(395067);const _=o().fcad707a,E=o().f1824804,d="/i/report/appeal_tweet_warning",S=i.default;function u(t){const e=t.tweet.retweeted_status||t.tweet;return!(e.user.id_str!==t.viewerUserId||!e.self_thread&&e.in_reply_to_status_id_str)}const T=t=>!!t.extended_entities?.media?.flatMap((t=>t.sensitive_media_warning?(0,a.Z)(t.sensitive_media_warning):[])).some(Boolean);function l(t){const{featureSwitches:e,isNsfwUser:r,tweet:s,viewerUserId:n}=t,o=s.retweeted_status||s;return!(n!==o.user?.id_str||s.tombstoneInfo||!o.possibly_sensitive||r||T(o)||!e.isTrue("enable_label_appealing_sensitive_content_enabled"))}function w(t){const{displaySensitiveMedia:e,...r}=t;return!!e&&l(r)}function p(t){const e=t.tweet.retweeted_status||t.tweet;return t.viewerUserId===e.user.id_str&&!t.tweet.tombstoneInfo&&t.forwardPivotDisplayType===s.x.SoftIntervention&&t.featureSwitches.isTrue("enable_label_appealing_misinfo_enabled")}function A(t,e,r){const s=t.retweeted_status||t,n=c.C2.AppealTweetWarning;let o;if(r&&(0,c.Yw)(r,n)){const t=(s?.extended_entities?.media?.length||0)>0,r=!!s.promoted_content,i=(0,c.j_)({clientReferer:window.location.pathname,isMedia:t,isPromoted:void 0!==r,reportType:n,reportedTweet:s,reportedUser:s.user.id_str,scribeNamespace:e});o={pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(i)}}}}else o={pathname:`${d}/${s.id_str}`,state:{scribeNamespace:e}};return{text:_,action:{label:E,link:o},Icon:S,withThumbnail:!0}}},666932:(t,e,r)=>{r.d(e,{Z:()=>s});const s=Object.freeze({Author:"author",LikedByAuthor:"liked-by-author"})},988823:(t,e,r)=>{r.d(e,{M:()=>i});var s=r(807896),n=r(202784),o=r(190286);const i=t=>e=>{const[r,i]=n.useState(null),a=t=>new Promise(((e,r)=>{i({resolve:e,reject:r,confirmationSheetProps:t})}));if(r){const{confirmationSheetProps:t,reject:e,resolve:a}=r;return n.createElement(o.Z,(0,s.Z)({},t,{onCancel:()=>{e(),i(null)},onConfirm:()=>{a(),i(null)}}))}return n.createElement(t,(0,s.Z)({},e,{confirm:a}))}},794057:(t,e,r)=>{r.d(e,{C0:()=>i,DC:()=>s,_e:()=>o,iN:()=>_,kd:()=>a,pc:()=>n});const s=Object.freeze({MEDIA:"MEDIA",TWEET:"TWEET",MARKDOWN:"MARKDOWN",DIVIDER:"DIVIDER",LATEX:"LATEX"}),n=Object.freeze({IMMUTABLE:"IMMUTABLE",MUTABLE:"MUTABLE"}),o=Object.freeze({GIF:"DraftTweetGif",IMAGE:"DraftTweetImage",VIDEO:"DraftTweetVideo"}),i=Object.freeze({TWITTER_ARTICLES_TAB:"TWITTER_ARTICLES_TAB",TWITTER_ARTICLE_VIEW:"TWITTER_ARTICLE_VIEW",LONGFORM_COMPOSER:"LONGFORM_COMPOSER"}),a={content_state:{blocks:[],entity_map:[]}},c=Object.freeze({DRAFT:"Draft",PUBLISHED:"Published"}),_=Object.freeze({DRAFT:c.DRAFT,PUBLISHED:c.PUBLISHED})},575652:(t,e,r)=>{r.d(e,{Ji:()=>C,L4:()=>A,T2:()=>I,cb:()=>p,ex:()=>b});var s=r(449633),n=r.n(s),o=r(370751),i=r(337511),a=r(499627),c=r(390387);const _="articles",E="rweb.articlesVisited",d="rweb.articleDomains",S="rweb/articles/ADD_DOMAINS",u="rweb/articles/ADD_VISITED_ARTICLES",T=t=>({payload:t,type:S}),l=t=>({payload:t,type:u}),w=Object.freeze({domains:void 0,articles:new Set});const p=t=>t[_].domains,A=(t,e)=>{const r=p(t);return b(r,e)},b=(t,e)=>!!t&&!!e&&t.includes((e||"").replace("www.","")),I=(t,e,r)=>{const s=!!r&&A(t,r);if(e&&s){const r=(t=>t[_].articles)(t)||new Set,s=n()("",e);return r.has(s)}return!1},C=t=>(e,r,{userPersistence:s})=>{const o=n()("",t);return e(l([o])),N(o,s)},N=(t,e)=>e.get(E).then((r=>{const s=r?.articles||new Set;s.add(t);const n=r?.lastSeenMap||{},o=Date.now();n[t]=o;for(const[t,e]of Object.entries(n))o-Number(e)>6048e5&&(s.delete(t),delete n[t]);return e.set(E,{articles:s,lastSeenMap:n})}));a.Z.register({[_]:function(t=w,e){if(!e)return t;switch(e.type){case S:return{...t,domains:e.payload};case u:return e.payload instanceof Array?{...t,articles:(0,o.Z)([...t.articles,...e.payload])}:t;default:return t}}},(()=>(t,e,r)=>c.Qb(e())?Promise.all([r.devicePersistence.get(d).then((e=>{const s=e?.domains,n=e?.updatedTime,o=Date.now();(!n||o-n>864e5)&&r.api.withEndpoint(i.Z).fetchArticleDomainsGraphQL().then((e=>{r.devicePersistence.set(d,{domains:e||[],updatedTime:o}),t(T(e||void 0))})).catch((()=>{})),e&&t(T(s))})),r.userPersistence.get(E).then((e=>{const r=e?.articles;r&&t(l(Array.from(r)))}))]).then((()=>{})):Promise.resolve()))},979090:(t,e,r)=>{r.d(e,{$e:()=>Ft,$z:()=>Tt,BG:()=>ct,Bb:()=>Gt,Bs:()=>Et,C7:()=>Dt,EW:()=>Lt,HO:()=>bt,JL:()=>lt,Jn:()=>Nt,Kc:()=>Ht,Ld:()=>Mt,Lt:()=>nt,Ly:()=>et,OV:()=>at,PL:()=>dt,Pi:()=>mt,Qg:()=>V,SZ:()=>kt,V0:()=>Wt,Vc:()=>tt,Wk:()=>ot,X3:()=>vt,_T:()=>Kt,_b:()=>qt,aZ:()=>gt,ap:()=>ut,cS:()=>_t,dw:()=>rt,eD:()=>St,eY:()=>Ut,et:()=>J,f3:()=>It,f_:()=>Bt,gH:()=>At,gP:()=>zt,jm:()=>$,kT:()=>xt,kX:()=>jt,lC:()=>Pt,lW:()=>wt,lw:()=>yt,mZ:()=>Vt,mv:()=>Rt,oV:()=>$t,pN:()=>ft,qm:()=>Zt,r9:()=>K,sz:()=>st,tk:()=>X,vF:()=>ht,w6:()=>pt,wK:()=>Qt,wd:()=>Ct,ww:()=>Ot});r(571372),r(136728);var s=r(744531),n=r(401388),o=r(465233),i=r(106067),a=r(256563),c=r(497461),_=r(163889),E=r(499627),d=r(917799),S=r(312771),u=r(56519),T=r(3693),l=r(926597),w=r(298219);const p="birdwatchNotes",A=`rweb/${p}`,b=(0,d.dg)(A,"DELETE_NOTE"),I=(0,d.dg)(A,"CREATE_RATING"),C=(0,d.dg)(A,"DELETE_RATING"),N=(0,d.dg)(A,"SELECT_ALIAS"),h=(0,d.dg)(A,"CREATE_APPEAL"),m=(0,d.dg)(A,"EDIT_NOTIFICATION_SETTINGS"),R=Object.freeze({REQUEST:"rweb/birdwatchNotes/CREATE_BIRDWATCH_BAT_SIGNAL_REQUEST",SUCCESS:"rweb/birdwatchNotes/CREATE_BIRDWATCH_BAT_SIGNAL_SUCCESS",FAILURE:"rweb/birdwatchNotes/CREATE_BIRDWATCH_BAT_SIGNAL_FAILURE"}),U=Object.freeze({REQUEST:"rweb/birdwatchNotes/DELETE_BIRDWATCH_BAT_SIGNAL_REQUEST",SUCCESS:"rweb/birdwatchNotes/DELETE_BIRDWATCH_BAT_SIGNAL",FAILURE:"rweb/birdwatchNotes/DELETE_BIRDWATCH_BAT_SIGNAL"}),O=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_BIRDWATCH_BAT_SIGNAL_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_BIRDWATCH_BAT_SIGNAL_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_BIRDWATCH_BAT_SIGNAL_FAILURE"}),f=(Object.freeze({REQUEST:"rweb/birdwatchNotes/EDIT_SHOW_MOBILE_NAVIGATION_SETTINGS_REQUEST",SUCCESS:"rweb/birdwatchNotes/EDIT_SHOW_MOBILE_NAVIGATION_SETTINGS_SUCCESS",FAILURE:"rweb/birdwatchNotes/EDIT_SHOW_MOBILE_NAVIGATION_SETTINGS_FAILURE"}),Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_DATA_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_DATA_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_DATA_FAILURE"})),L=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_CAN_BE_MEDIA_NOTE_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_CAN_BE_MEDIA_NOTE_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_CAN_BE_MEDIA_NOTE_FAILURE"}),D=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_NOTE_TRANSLATION_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_NOTE_TRANSLATION_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_NOTE_TRANSLATION_FAILURE"}),y=Object.freeze({REQUEST:"rweb/birdwatchNotes/ADMIT_USER_REQUEST",SUCCESS:"rweb/birdwatchNotes/ADMIT_USER_SUCCESS",FAILURE:"rweb/birdwatchNotes/ADMIT_USER_FAILURE"}),F=Object.freeze({REQUEST:"rweb/birdwatchNotes/REMOVE_USER_REQUEST",SUCCESS:"rweb/birdwatchNotes/REMOVE_USER_SUCCESS",FAILURE:"rweb/birdwatchNotes/REMOVE_USER_FAILURE"}),P=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_ALIAS_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_ALIAS_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_ALIAS_FAILURE"}),g=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_SIGNUP_ELIGIBILITY_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_SIGNUP_ELIGIBILITY_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_SIGNUP_ELIGIBILITY_FAILURE"}),Z=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_SOURCE_LINK_TWEET_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_SOURCE_LINK_TWEET_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_SOURCE_LINK_TWEET_FAILURE"}),H=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_ALIAS_SELECT_OPTIONS_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_ALIAS_SELECT_OPTIONS_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_ALIAS_SELECT_OPTIONS_FAILURE"}),v=Object.freeze({REQUEST:"rweb/birdwatchNotes/CREATE_NOTE_REQUEST",SUCCESS:"rweb/birdwatchNotes/CREATE_NOTE_SUCCESS",FAILURE:"rweb/birdwatchNotes/CREATE_NOTE_FAILURE"}),B=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_TWEET_NOTES_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_TWEET_NOTES_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_TWEET_NOTES_FAILURE"}),W=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_BIRDWATCH_PROFILE_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_BIRDWATCH_PROFILE_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_BIRDWATCH_PROFILE_FAILURE"}),x=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_SHOW_ALIAS_SELECT_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_SHOW_ALIAS_SELECT_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_SHOW_ALIAS_SELECT_FAILURE"}),M=Object.freeze({REQUEST:"rweb/birdwatchNotes/FETCH_NOTE_REQUEST",SUCCESS:"rweb/birdwatchNotes/FETCH_NOTE_SUCCESS",FAILURE:"rweb/birdwatchNotes/FETCH_NOTE_FAILURE"}),G=Object.freeze({REQUEST:"rweb/birdwatchNotes/PROFILE_ACKNOWLEDGE_EARN_OUT_REQUEST",SUCCESS:"rweb/birdwatchNotes/PROFILE_ACKNOWLEDGE_EARN_OUT_SUCCESS",FAILURE:"rweb/birdwatchNotes/PROFILE_ACKNOWLEDGE_EARN_OUT_FAILURE"}),Q="rweb/birdwatchNotes/UPDATE_STREAMED_NOTE_TRANSLATION",q="rweb/birdwatchNotes/SAVE_FORM_DRAFT",k="rweb/birdwatchNotes/SAVE_BIRDWATCH_PATH",j={drafts:{},notes:{},streamedNoteTranslation:{},noteRequests:{},tweetNotes:{},contributor:{},publicData:{},matchData:{fetchStatus:S.ZP.LOADING},sourceLinks:{},sources:{},paths:{}};E.Z.register({[p]:function(t=j,e){if(!e)return t;switch(e.type){case v.SUCCESS:{const r=e.payload?.result;if(r){const s=e.payload?.entities?.birdwatchNotes[r],n=s.tweet.rest_id,o="MisinformedOrPotentiallyMisleading"===s.data_v1?.classification;return{...t,notes:{...t.notes,[r]:s},tweetNotes:{...t.tweetNotes,[n]:{...t.tweetNotes&&t.tweetNotes[n],misleadingIds:o?[...t.tweetNotes[n].misleadingIds,r]:t.tweetNotes[n].misleadingIds,notMisleadingIds:o?t.tweetNotes[n].notMisleadingIds:[...t.tweetNotes[n].notMisleadingIds,r],ownNoteId:r,fetchStatus:S.ZP.LOADED}}}}return t}case U.SUCCESS:{const r=e.meta?.tweet_id;return r?{...t,noteRequests:(0,s.Z)(t.noteRequests,r)}:t}case b.SUCCESS:{const r=e.meta?.note_id;return r?{...t,notes:(0,s.Z)(t.notes,r)}:t}case L.REQUEST:{const r=e.meta?.tweetId;return r?{...t,matchData:{fetchStatus:S.ZP.LOADING}}:t}case L.SUCCESS:{const r=e.meta?.tweetId;return r?{...t,matchData:{canBeMediaNote:e.payload.tweet_result_by_rest_id.result.can_be_media_note,canBeUrlNote:e.payload.tweet_result_by_rest_id.result.can_be_url_note,mediaNoteCategory:e.payload.tweet_result_by_rest_id.result.media_note_category,noteMatchUrl:e.payload.tweet_result_by_rest_id.result.note_match_url,fetchStatus:S.ZP.LOADED}}:t}case D.REQUEST:{const r=e.meta?.note_id;return r?{...t,notes:{...t.notes,[r]:{...t.notes[r],noteTranslation:{fetchStatus:S.ZP.LOADING}}}}:t}case D.SUCCESS:{const r=e.meta?.note_id;if(r){const s=e.payload.birdwatch_note_by_rest_id.translated_summary;return{...t,notes:{...t.notes,[r]:{...t.notes[r],noteTranslation:{result:s&&(0,a.Z)((0,c.$)(),s),fetchStatus:S.ZP.LOADED}}}}}return t}case D.FAILURE:{const r=e.meta?.noteId;return r?{...t,notes:{...t.notes,[r]:{...t.notes[r],noteTranslation:{fetchStatus:S.ZP.FAILED}}}}:t}case g.SUCCESS:{const r=e.payload;return{...t,signupEligibility:r?.birdwatch_sign_up_eligibility?.eligible}}case O.REQUEST:{const r=e.meta?.tweet_id;return r?{...t,noteRequests:{...t.noteRequests,[r]:{fetchStatus:S.ZP.LOADING}}}:t}case O.FAILURE:{const r=e.meta?.tweet_id;return r?{...t,noteRequests:{...t.noteRequests,[r]:{fetchStatus:S.ZP.FAILED}}}:t}case O.SUCCESS:{const r=e.meta?.tweet_id,s=e.payload?.birdwatch_bat_signal_by_rest_id.created_at;return r?{...t,noteRequests:{...t.noteRequests,[r]:{created_at:s,fetchStatus:S.ZP.LOADED}}}:t}case R.SUCCESS:{const r=e.meta?.tweet_id,s=e.payload?.created_at;return r&&s?{...t,noteRequests:{...t.noteRequests,[r]:{created_at:s}}}:t}case I.SUCCESS:{const r=e.meta?.note_id,s=e.payload;return r?{...t,notes:{...t.notes,[r]:{...t.notes[r],rating:s}}}:t}case C.SUCCESS:{const r=e.meta?.note_id;if(r){const{rating:e,...s}=t.notes[r];return{...t,notes:{...t.notes,[r]:{...s}}}}return t}case B.REQUEST:{const r=e.meta?.tweet_id;return r?{...t,tweetNotes:{...t.tweetNotes,[r]:{...t.tweetNotes&&t.tweetNotes[r],fetchStatus:S.ZP.LOADING}}}:t}case B.FAILURE:{const r=e.meta?.tweet_id;return r?{...t,tweetNotes:{...t.tweetNotes,[r]:{...t.tweetNotes[r],fetchStatus:S.ZP.FAILED}}}:t}case B.SUCCESS:{const r=e.payload?.result,s=e.meta?.tweet_id;if(r){const n=e.payload?.entities?.birdwatchNotes[r],o=n?.misleading_ids||[],i=o.reduce(((t,e)=>(t[e.rest_id]=e,t)),{}),a=o.map((t=>t.rest_id)),c=n?.not_misleading_ids||[],_=c.reduce(((t,e)=>(t[e.rest_id]=e,t)),{}),E={misleadingIds:a,notMisleadingIds:c.map((t=>t.rest_id)),fetchStatus:S.ZP.LOADED};return n?.ownNoteId&&(E.ownNoteId=n?.ownNoteId),E.canUserWriteNotesOnPost=n?.canUserWriteNotesOnPost,e.meta?{...t,notes:{...t.notes,...i,..._},tweetNotes:{...t.tweetNotes,[s]:E}}:t}return s?{...t,tweetNotes:{...t.tweetNotes,[s]:{fetchStatus:S.ZP.LOADED}}}:t}case W.REQUEST:{const r=e.meta?.alias;return r?{...t,contributor:{...t.contributor,[r]:{...t.contributor[r],fetchStatus:S.ZP.LOADING}}}:t}case W.FAILURE:{const r=e.meta?.alias;return r?{...t,contributor:{...t.contributor,[r]:{...t.contributor[r],fetchStatus:S.ZP.FAILED}}}:t}case W.SUCCESS:{const r=e.meta?.alias,s=e.payload?.result;if(s&&e.meta){const r=e.payload?.entities?.birdwatchNotes[s],n=r?.notes||[],o=n.reduce(((t,e)=>(t[e.rest_id]=e,t)),{}),i=n.map((t=>t.rest_id)),a=r?.ratings_count,c=r?.notes_count,_=r?.is_top_writer,E=r?.is_api_contributor;return{...t,notes:{...t.notes,...o},contributor:{...t.contributor,[s]:{ratingsCount:a,notesCount:c,isTopWriter:_,isApiContributor:E,deletedNotesCount:r?.deleted_notes_count,notes:i,fetchStatus:S.ZP.LOADED}}}}return r?{...t,contributor:{...t.contributor,[r]:{...t.contributor[r],fetchStatus:S.ZP.FAILED}}}:t}case P.SUCCESS:{const r=e.payload;return{...t,contributor:{...t.contributor,notificationSettings:r?.notification_settings?.needs_your_help_frequency,ownAlias:r?.alias,canWriteNotes:r?.can_write_notes,enrollmentStatus:r?.user_enrollment,isTopWriter:r?.is_top_writer,isApiContributor:r?.is_api_contributor,showMobileNavigationSettings:r?.user_settings?.show_in_app_navigation}}}case x.SUCCESS:{const r=e.payload;return{...t,contributor:{...t.contributor,showAliasSelfSelect:r?.can_select&&!r?.has_selected}}}case H.SUCCESS:{const r=e.payload;return{...t,contributor:{...t.contributor,aliasSelfSelectOptions:r}}}case M.SUCCESS:{const r=e.payload,s=r?.result;return s?{...t,notes:{...t.notes,[s]:{...r?.entities?.birdwatchNotes[s],fetchStatus:S.ZP.LOADED}}}:t}case M.REQUEST:{const r=e.meta?.note_id;return{...t,notes:{...t.notes,[r]:{...t.notes&&t.notes[r],fetchStatus:S.ZP.LOADING}}}}case M.FAILURE:{const r=e.meta?.note_id;return{...t,notes:{...t.notes,[r]:{...t.notes[r],fetchStatus:S.ZP.FAILED}}}}case f.SUCCESS:{const r=e.payload;return r?{...t,publicData:r}:t}case N.SUCCESS:{const r=e.meta?.alias;return{...t,contributor:{...t.contributor,ownAlias:r}}}case q:{const r=e.payload;if((0,n.Z)(r))return t;{const e=r.updates,s=r.tweetId;return{...t,drafts:{...t.drafts,[s]:e}}}}case k:{const r=e.payload;if((0,n.Z)(r))return t;{const e=r.count,s=r.path;return{...t,paths:{...t.paths,[e]:s}}}}case G.SUCCESS:return{...t,contributor:{...t.contributor,enrollmentStatus:{...t.contributor.enrollmentStatus,enrollment_state:"EarnedOutAcknowledged"}}};case Z.REQUEST:{const r=e.meta?.tweetId;return r?{...t,matchData:{fetchStatus:S.ZP.LOADING}}:t}case Z.FAILURE:{const r=e.meta?.tweet_id;return r?{...t,sourceLinks:{...t.sourceLinks,[r]:{fetchStatus:S.ZP.FAILED}}}:t}case Z.SUCCESS:{const r=e.meta?.tweet_id;return r?{...t,sourceLinks:{...t.sourceLinks,[r]:{source_preview_tweet_for_notes:e.payload.tweet_result_by_rest_id.result.source_preview_tweet_for_notes,source_tweet_count_for_notes:e.payload.tweet_result_by_rest_id.result.source_tweet_count_for_notes,has_note_request:e.payload.tweet_result_by_rest_id.result.has_note_request,fetchStatus:S.ZP.LOADED}}}:t}case Q:{const{note_id:r,translation:s}=e.payload;return{...t,streamedNoteTranslation:{[r]:s}}}default:return t}}});const z=[],V=(t,e)=>t[p].notes[e],K=(t,e)=>t[p].noteRequests[e],$=t=>t[p].paths,Y=(t,e)=>t[p].tweetNotes[e]?.misleadingIds,J=t=>t[p].matchData,X=(t,e)=>t[p].sourceLinks[e],tt=(t,e)=>t[p].streamedNoteTranslation[e],et=(t,e)=>{const r=t[p].tweetNotes[e];return r?r.canUserWriteNotesOnPost:void 0},rt=(t,e)=>{if(!e)return null;const r=((t,e)=>t[p].tweetNotes[e]?.ownNoteId)(t,e);return r?V(t,r):null},st=t=>t[p].publicData,nt=(t,e)=>{const r=e?Y(t,e):void 0;if(r){return r.map((e=>V(t,e))).filter(Boolean)}return z},ot=(t,e)=>{const r=e?((t,e)=>t[p].tweetNotes[e]?.notMisleadingIds)(t,e):void 0;if(r){return r.map((e=>V(t,e))).filter(Boolean)}return z},it=(t,e)=>{const r=t[p].contributor[e];return r?r.notes:void 0},at=t=>{const e=t[p].contributor;return e?e.ownAlias:void 0},ct=t=>{const e=t[p].contributor;return e?e.showAliasSelfSelect:void 0},_t=t=>{const e=t[p]?.contributor?.ownAlias;if(!e)return!1;const r=`birdwatchContributorNotesSlice-${e}`,s=t.slices[r];return s?.items?.length>0||!1},Et=t=>{const e=t[p].contributor;return e?e.aliasSelfSelectOptions:void 0},dt=t=>{const e=t[p].contributor;return e?e.enrollmentStatus:void 0},St=(t,e)=>!!(t[p].contributor[e]?.isTopWriter||t[p].contributor?.isTopWriter),ut=(t,e)=>t[p].contributor[e]?.isTopWriter||!1,Tt=(t,e)=>t[p].contributor[e]?.isApiContributor||!1,lt=t=>{const e=t[p].contributor;return e?e.notificationSettings:void 0},wt=t=>{const e=t[p].contributor;return e?e.canWriteNotes:void 0},pt=(t,e)=>{if(!e)return;const r=t[p].contributor[e];return r?r.ratingsCount:void 0},At=(t,e)=>{if(!e)return;const r=t[p].contributor[e];return r?r.notesCount:void 0},bt=(t,e)=>{const r=t[p].contributor[e];return r?r.deletedNotesCount:void 0},It=(t,e)=>{const r=t[p].tweetNotes[e];return r?r.fetchStatus:S.ZP.NONE},Ct=(t,e)=>{const r=t[p].notes[e];return r?r.fetchStatus:S.ZP.NONE},Nt=(t,e)=>{if(!e)return;const r=t[p].drafts;return r?r[e]:void 0},ht=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchBirdwatchBatSignal,params:t})({actionTypes:O,context:"FETCH_BIRDWATCH_BAT_SIGNAL",meta:{tweet_id:t}}),mt=t=>(e,r,{api:s})=>{const n=!!Y(r(),t),o=It(r(),t)===S.ZP.LOADING;return n||o?Promise.resolve():e((t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchNotes,params:{tweet_id:t}})({actionTypes:B,context:"FETCH_TWEET_NOTES",meta:{tweet_id:t}},(t=>{if(t){const{entities:e}=t;return e?[(0,u.dP)(e)]:void 0}})))(t))},Rt=t=>(e,r,{api:s})=>{const n=!!t&&!!it(r(),t),o=((t,e)=>{const r=t[p].contributor[e];return r?r.fetchStatus:S.ZP.NONE})(r(),t)===S.ZP.LOADING;return n||o?Promise.resolve():e((t=>(e,r,{api:s})=>t?(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchBirdwatchProfile,params:{alias:t}})({actionTypes:W,context:"FETCH_BIRDWATCH_PROFILE",meta:{alias:t}},(t=>{if(t){const{entities:e}=t;return e&&[(0,u.dP)(e)]}})):Promise.resolve())(t))},Ut=()=>(t,e,{api:r})=>!!dt(e())?Promise.resolve():t(Pt()),Ot=t=>(e,r,{api:s})=>{const n=!!V(r(),t),o=Ct(r(),t)===S.ZP.LOADING;return n||o?Promise.resolve():e((t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchOneNote,params:{note_id:t}})({actionTypes:M,context:"FETCH_NOTE",meta:{note_id:t}}))(t))},ft=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchCanTweetBeMediaNote,params:t})({actionTypes:L,context:"FETCH_CAN_BE_MEDIA_NOTE",meta:{tweetId:t}}),Lt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchNoteTranslation,params:t})({actionTypes:D,context:"FETCH_NOTE_TRANSLATION",meta:{note_id:t}}),Dt=(t,e)=>async(r,s,{api:n})=>{const i=Date.now(),a={content_type:"COMMUNITY_NOTE",id:t},c={fetchStatus:S.ZP.LOADING,result:{text:"",entities:[]}},E=(t,e)=>{var s;r((s={note_id:t,translation:(0,o.Z)(e)},{type:Q,payload:s}))};E(t,c);const d=new AbortController;try{const r=await n.fetchClient.dispatch("/2/grok/translation.json",{method:"POST",credentials:"include",body:JSON.stringify(a),signal:d.signal});if(!r.ok)throw c.state=T.H.ERROR,c.fetchStatus=S.ZP.FAILED,E(t,c),new Error(`invalid response ${r.status}`);const s=r.body?.getReader();if(!s)throw c.state=T.H.ERROR,c.fetchStatus=S.ZP.FAILED,E(t,c),new Error("reader not present");const o=new TextDecoder;let u="";const p=async r=>{const{done:n,value:a}=await(0,w.yE)("COMMUNITY_NOTE_TIMEOUT_BETWEEN_CHUNKS",(()=>s.read()),r?"FIRST_CHUNK":"BETWEEN_CHUNKS");if(n){e.scribe({component:"grok_button_translation",element:"time_to_last_token_community_note",action:"complete",data:{duration_ms:Date.now()-i}});if(0===(c.result.text.length??0))throw new Error("empty string when done");return c.state=T.H.SUCCESS,c.fetchStatus=S.ZP.LOADED,void E(t,c)}if(a){r&&e.scribe({component:"grok_button_translation",element:"time_to_first_token_community_note",action:"complete",data:{duration_ms:Date.now()-i}});const s=o.decode(a);if(u+=s,u.includes("\n")){const e=u.split("\n");u=e.pop();for(const r of e){const e=JSON.parse(r);if(e.error)throw new Error(JSON.stringify(e.error));if(e.result&&(e.result.text&&(c.result.text+=e.result.text),e.result.rich_text_entities)){const r=c.result.entities,{errors:s,result:n}=(0,l.Tw)(e.result.rich_text_entities);s.length>0&&(0,_.ZP)(`invalid entities in translating community note:${t} - ${s.join(",")}`),r.push(...n)}E(t,c)}}}await p()};await p(!0)}catch(r){c.state=T.H.ERROR,c.fetchStatus=S.ZP.FAILED,E(t,c),(0,_.ZP)(`Failed to translate community note:${t} - ${String(r)}`),d.abort(),r instanceof w.mn?e.scribe({component:"grok_button_translation",element:"FIRST_CHUNK"===r.type?"error_timeout_first_token_community_note":"error_timeout_within_tokens_community_note",action:"error"}):e.scribe({component:"grok_button_translation",element:"error_community_note",action:"error"})}},yt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).fetchTweetSourceLink,params:t})({actionTypes:Z,context:"FETCH_SOURCE_LINK_TWEET",meta:{tweet_id:t}}),Ft=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).fetchSignUpEligiblity})({actionTypes:g,context:"FETCH_SIGNUP_ELIGIBILITY"}),Pt=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).fetchAuthenticatedUserProfile,params:{}})({actionTypes:P,context:"FETCH_AUTHENTICATED_USER_PROFILE"}),gt=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).fetchAliasSelfSelectStatus,params:{}})({actionTypes:x,context:"FETCH_SHOW_ALIAS_SELECT",meta:{}}),Zt=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).fetchAliasSelfSelectOptions,params:{}})({actionTypes:H,context:"FETCH_ALIAS_SELECT_OPTIONS",meta:{}}),Ht=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).selectAlias,params:{alias:t}})({actionTypes:N,context:"SELECT_ALIAS",meta:{alias:t}}),vt=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).acknowledgeEarnOut,params:{}})({actionTypes:G,context:"PROFILE_ACKNOWLEDGE_EARN_OUT",meta:{}}),Bt=t=>({meta:{note_id:t},type:b.SUCCESS}),Wt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).deleteBirdwatchBatSignal,params:{tweet_id:t}})({actionTypes:U,context:"DELETE_BIRDWATCH_BATSIGNAL",meta:{tweet_id:t}}),xt=(t,e,r,s)=>(n,o,{api:a})=>(0,d._O)(n,{request:a.withEndpoint(i.Z).createNote,params:{tweet_id:t,is_media_note:r,is_helpful_for_all_posts:s,data:e}})({actionTypes:v,context:"CREATE_NOTE"}),Mt=t=>e=>{e((t=>({type:q,payload:t}))(t))},Gt=t=>e=>{e((t=>({type:k,payload:t}))(t))},Qt=(t,e,r,s,n)=>(o,a,{api:c})=>(0,d._O)(o,{request:c.withEndpoint(i.Z).createRating,params:{note_id:t,tweet_id:r,data:e,rating_source:s,source_platform:n}})({actionTypes:I,context:"CREATE_RATING",meta:{note_id:t}}),qt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).deleteRating,params:{note_id:t}})({actionTypes:C,context:"DELETE_RATING",meta:{note_id:t}}),kt=(t,e)=>(r,s,{api:n})=>(0,d._O)(r,{request:n.withEndpoint(i.Z).admitUser,params:{admit_date:t,user_id:e}})({actionTypes:y,context:"ADMIT_USER",meta:{admit_date:t,user_id:e}}),jt=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).removeUser,params:{}})({actionTypes:F,context:"REMOVE_USER",meta:{}}),zt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).createAppeal,params:{note_id:t}})({actionTypes:h,context:"CREATE_APPEAL",meta:{note_id:t}}),Vt=(t,e)=>(r,s,{api:n})=>(0,d._O)(r,{request:n.withEndpoint(i.Z).createBirdwatchBatSignal,params:{tweet_id:t,source_link:e}})({actionTypes:R,context:"CREATE_BAT_SIGNAL",meta:{tweet_id:t}}),Kt=t=>(e,r,{api:s})=>(0,d._O)(e,{request:s.withEndpoint(i.Z).editNotificationSettings,params:{settings:t}})({actionTypes:m,context:"EDIT_NOTIFICATION_SETTINGS",meta:{settings:t}}),$t=()=>(t,e,{api:r})=>(0,d._O)(t,{request:r.withEndpoint(i.Z).fetchPublicData,params:{}})({actionTypes:f,context:"FETCH_DATA",meta:{}})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-e851f17f.4e64afea.js.map