"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["bundle.GrokDrawer-3c20ad5c"],{595080:(e,a,n)=>{n.d(a,{$:()=>l,Z:()=>s});var r=n(202784);const o=[],t=[],d={isAnimated:!1,citations:o,disableCodeBlockStickyHeader:!1,allowedTokenTypes:void 0,cardAttachments:t,isStreaming:!1,messageId:void 0,isAborted:!1,toolUsageCardResults:[],textStyle:void 0},l=r.createContext(d);function s({children:e,disableLinks:a,isAnimated:n,citations:d=o,disableCodeBlockStickyHeader:s,allowedTokenTypes:i,cardAttachments:c=t,isStreaming:u,messageId:h,isAborted:m,toolUsageCardResults:b,textStyle:p}){const w=d.length?d:o,f=r.useMemo((()=>({isAnimated:n,disableLinks:a,citations:w,disableCodeBlockStickyHeader:s,allowedTokenTypes:i,cardAttachments:c,isStreaming:u,messageId:h,isAborted:m,toolUsageCardResults:b,textStyle:p})),[n,a,w,s,i,c,u,h,m,b,p]);return r.createElement(l.Provider,{value:f},e)}},919760:(e,a,n)=>{n.d(a,{b:()=>y,h:()=>g});var r=n(202784),o=n(45843),t=n(325686),d=n(818199),l=n(530732),s=n(392237),i=n(630715),c=n(323265),u=n(301758),h=n(306677),m=n(725405),b=n(125363),p=n(836255),w=n(595080);const f="grok_citation_post",g=({isGrokRenderCitationCard:e,postId:a})=>{const{isAnimated:n}=r.useContext(w.$),[s,c]=r.useState(!1),u=(0,m.Z)(),g=r.useCallback((()=>{c(!0),u.scribe({action:"hover",component:f,data:{tweet_id:a}})}),[c,u,a]),y=r.useCallback((()=>c(!1)),[c]),_=r.useCallback((()=>{c(!0),u.scribe({action:"click",component:f,data:{tweet_id:a}})}),[c,u,a]),M=r.useCallback((()=>{u.scribe({action:"impression",component:f,data:{tweet_id:a}})}),[u,a]),v=r.useMemo((()=>p.Z.createHydratorForTweet(a)),[a]),x=(0,b.v9)(v),A=r.useCallback((()=>r.createElement(k,{postId:a})),[a]);if(!x)return null;const S=x.user?.profile_image_url_https;return r.createElement("div",{className:"omit-from-copy",style:D.inlineContainer},r.createElement(h.D,{id:"grok_citation_post",onFullyVisible:M,position:"top",testID:"grok_citation_post"}),r.createElement(t.Z,{style:[D.inlineContainer,e?D.grokRenderInlineContainer:null,n?D.animation:null]},r.createElement(d.Z,{hoverDelay:"short",renderContent:A},r.createElement(l.Z,{link:x.permalink,onMouseEnter:g,onMouseLeave:y,onPress:_,style:[D.content,S?D.avatarContainer:D.iconContainer,s?D.containerHovered:void 0],withoutInteractiveStyles:!0},S?r.createElement(o.Z,{source:S,style:D.avatar}):r.createElement(i.default,{style:D.linkIcon})))))},k=({postId:e})=>r.createElement(t.Z,{style:D.hoverCardContainer},r.createElement(u.Z,{isCondensed:!0,onPress:e=>{c.ZP.isTwitterApp()},tweetId:e,withBirdwatchPivot:!1,withLink:!0,withUserHoverCard:!1})),D=s.default.create((e=>({inlineContainer:{alignItems:"center",justifyContent:"center",display:"inline-flex",marginStart:e.spaces.space4,verticalAlign:"middle"},grokRenderInlineContainer:{marginStart:"unset",marginHorizontal:e.spaces.space2},animation:{animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationFillMode:"both"},content:{transition:"filter 0.3s, transform 0.3s",filter:"grayscale(100%) opacity(0.7)",position:"relative",bottom:"0.1em",overflow:"hidden",width:15,height:15,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.borderRadii.small},hoverCardContainer:{width:350,maxWidth:"100%",pointerEvents:"none"},avatarContainer:{backgroundColor:e.colors.whiteOnColor},iconContainer:{backgroundColor:e.colors.gray100},containerHovered:{filter:"none",transform:"scale(1.2)"},avatar:{width:"100%",height:"100%"},linkIcon:{color:e.colors.gray800,width:"100%",height:"100%"}}))),y=e=>{const a=e.match(/https:\/\/x\.com(?:\/[^\/]+)*\/status\/(\d+)/);return a?a[1]:void 0}},187268:(e,a,n)=>{n.d(a,{Ez:()=>k,QK:()=>D,Sd:()=>y,eC:()=>_,j:()=>M,jU:()=>v,ky:()=>b,w$:()=>x});n(543673),n(240753),n(128399);var r=n(202784),o=n(392237),t=n(784732),d=n(956272),l=n(520913),s=n(913315),i=n(355586),c=n(14284),u=n(976898),h=n(492244),m=n(397159);const b=Object.freeze({CodeExecution:"code_execution",BrowsePage:"browse_page",XSearch:"x_search",WebSearch:"web_search",XKeywordSearch:"x_keyword_search",XSemanticSearch:"x_semantic_search",XUserSearch:"x_user_search",GetXUserTimeline:"get_x_user_timeline",WebSearchWithSnippets:"web_search_with_snippets"}),p=/<xai:tool_usage_card>\s*(?:<xai:tool_usage_card_id>([0-9a-f-]{36})<\/xai:tool_usage_card_id>\s*)?<xai:tool_name>([\w-]+)<\/xai:tool_name>\s*(?:<xai:tool_args>([\s\S]*?)<\/xai:tool_args>\s*)<\/xai:tool_usage_card>/g,w=/<xai:tool_name>([\w-]+)<\/xai:tool_name>/,f=/<xai:tool_args>([\s\S]*?)<\/xai:tool_args>/,g=/<xai:tool_usage_card_id>([0-9a-f-]{36})<\/xai:tool_usage_card_id>/;function k(e){return e.replace(p,(e=>{const a=function(e){const a=e.match(w),n=e.match(f),r=e.match(g),o=a?a[1]:"",t=n?n[1]:"",d=r?r[1]:"";let l="<tool_usage_card>";return d&&(l+=`<tool_usage_card_id>${d}</tool_usage_card_id>`),l+=`<tool_name>${o}</tool_name>`,l+=`<tool_args>${t}</tool_args>`,l+="</tool_usage_card>",l}(e);return a??e}))}function D(e){const a=e.match(p);if(a){const{args:e,id:n,name:r}=function(e){let a="",n="",r="";const o=e.match(g);o&&(a=o[1]);const t=e.match(w);t&&(n=t[1]);const d=e.match(f);d&&(r=d[1].trim());return{id:a,name:n,args:r}}(a[0]);return y(n,r,e)}return null}function y(e,a,n){const r=n.match(/^<!\[CDATA\[(.*?)\]\]>/ms);let o={};if(r)try{o=JSON.parse(r[1])}catch(e){o={}}return{id:e,name:a,args:o}}const _="Using tools";function M(e){switch(e.name){case b.WebSearch:case b.WebSearchWithSnippets:return m.uk.WebSearchQueryFormatter({query:e.args.query});case b.XSearch:case b.XKeywordSearch:case b.XSemanticSearch:return m.uk.XSearchQueryFormatter({query:e.args.query});case b.XUserSearch:return m.uk.XUserSearchFormatter({query:e.args.query});case b.BrowsePage:{let a=e.args.url||"";try{a=new URL(a).hostname.replace("www.","")}catch(e){}return e.args.query?m.uk.GenericURLQueryFormatter({url:a,query:e.args.query}):m.uk.BrowsePageFormatter({url:a})}case b.GetXUserTimeline:return m.uk.XUsernameQuerySearchFormatter({query:e.args.query,username:e.args.username});case b.CodeExecution:return m.uk.CodeExecutionFormatter({ttc_tool_usage_card:""});default:return A(e.name)}}function v(e){switch(e.name){case b.WebSearch:case b.WebSearchWithSnippets:return m.B2.WebSearchQueryFormatter;case b.XSearch:case b.XKeywordSearch:case b.XSemanticSearch:return m.B2.XSearchQueryFormatter;case b.XUserSearch:return m.B2.XUserSearchFormatter;case b.BrowsePage:return m.B2.BrowsePageFormatter;case b.GetXUserTimeline:return m.B2.XUsernameQuerySearchFormatter;case b.CodeExecution:return m.B2.CodeExecutionFormatter;default:return A(e.name)}}function x(e,a){const n={style:{width:a||o.default.theme.spaces.space16,height:a||o.default.theme.spaces.space16}};switch(e){case"search_news":return r.createElement(t.default,n);case"web_search":return r.createElement(d.default,n);case"x_search":case"get_x_user_timeline":case"x_keyword_search":case"x_semantic_search":case"x_user_search":return r.createElement(l.default,n);case"call_finance_api":return r.createElement(s.default,n);case"call_sports_api":return r.createElement(i.default,n);case"browse_page":return r.createElement(c.default,n);case"code_execution":return r.createElement(u.default,n);default:return r.createElement(h.default,n)}}function A(e){if(e)try{const a=e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1)));return a.length>1?a.join(" "):e}catch{return e}return _}},286981:(e,a,n)=>{n.r(a),n.d(a,{default:()=>ne});var r=n(807896),o=n(202784),t=n(325686),d=n(107267),l=n(523561),s=n(292627),i=n(365023),c=n(461756),u=n(292484),h=n(528840),m=n(293115),b=n(125363),p=n(456228),w=n(551864),f=n(537392),g=n(78882);var k=n(530732),D=n(786998),y=n(392237),_=n(111677),M=n.n(_),v=n(457566),x=n(725405),A=n(550293),S=n(511582),C=n(389071),E=n(189953),G=n(731708);function I({children:e,size:a,weight:n}){return o.createElement(t.Z,{style:N.container},o.createElement(G.ZP,{size:a,style:N.label,weight:n||"normal"},o.createElement("span",null,e)))}const N=y.default.create((e=>({container:{position:"relative",width:"fit-content",animationDuration:"0.3s",opacity:1,animationTimingFunction:"linear",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]},label:{color:e.colors.transparent,backgroundColor:e.colors.gray600,backgroundImage:`linear-gradient(to right, ${e.colors.gray600} 0%, ${e.colors.gray900} 20%, ${e.colors.gray500} 40%, ${e.colors.gray600} 100%)`,opacity:1,display:"inline-block",backgroundClip:"text",animationDuration:"0.7s",backgroundRepeat:"no-repeat",animationIterationCount:"infinite",animationTimingFunction:"linear",animationKeyframes:[{"0%":{backgroundPositionX:"-2em"},"100%":{backgroundPositionX:"7em"}}]}})));var P=n(179175);const T={header:"GrokDrawerHeader",headerHighlighted:"GrokDrawerHeaderHighlighted",root:"GrokDrawer"};n(136728);var R=n(154003),Z=n(715614),B=n(530243),F=n(52735),W=n(487552),X=n(899667),U=n(917270),O=n(807901);const H=M().fbc79f6a,L=M().a6e89af8,j=M().d227d19e,$=M().j7d0e836,J=M().ica55d24,q={label:J};function z({conversationUrl:e,handleToggleVisibility:a,isExpanded:n,onClose:r}){const l=(0,d.useHistory)(),[s,i]=o.useState(!1),c=o.useCallback((()=>{e&&(l.push(e),a())}),[a,e,l]),{canClearConversation:u,handleClearConversationClickWithoutNav:h}=(0,O.Z)();return o.createElement(t.Z,{style:Q.rightControls},o.createElement(R.ZP,{"aria-label":H,hoverLabel:{label:H},icon:o.createElement(Z.default,{style:{height:19,width:19,marginBottom:2}}),onPress:()=>i(!0),type:"primaryText"}),n&&e&&o.createElement(R.ZP,{"aria-label":L,hoverLabel:{label:L},icon:o.createElement(B.default,{style:{height:19,width:19,marginBottom:2}}),onPress:c,type:"primaryText"}),n&&u&&o.createElement(R.ZP,{"aria-label":J,disabled:!u,hoverLabel:q,icon:o.createElement(F.default,{style:Q.composeIcon}),onPress:h,type:"primaryText"}),n&&o.createElement(R.ZP,{"aria-label":j,hoverLabel:{label:j},icon:o.createElement(W.default,null),onPress:a,type:"primaryText"}),!n&&o.createElement(R.ZP,{"aria-label":$,hoverLabel:{label:$},icon:o.createElement(X.default,null),onPress:a,type:"primaryText"}),s?o.createElement(U.O,{onDrawerDismiss:()=>i(!1)}):null)}const Q=y.default.create((e=>({rightControls:{flexDirection:"row",alignItems:"center"},composeIcon:{fill:"none"}}))),K=M().ed93de0c;function V({conversationUrl:e}){const a=o.createRef(),n=(0,b.I0)(),r=(0,b.v9)(p.kX)===w.j.EXPANDED,d=(0,b.v9)(A.kX)===S.S.EXPANDED,l=(0,b.v9)(C.Es),s=(0,C.f)({conversationKey:l}),i=-1!==(0,b.v9)(s.selectPromptSource)?.indexOf("post_analysis"),c=(0,b.v9)(s.selectStatus),u=c===E.Q_.TYPING||c===E.Q_.WAITING,h=i&&u,m=o.useCallback((()=>{const e=r?w.j.COLLAPSED:w.j.EXPANDED;e===w.j.EXPANDED&&d&&n(A.bi(S.S.COLLAPSED)),n(p.bi(e))}),[r,n,d]),f=o.useCallback((()=>{n(p.bi(w.j.CLOSED))}),[n]),g=(0,x.Z)();return o.createElement(t.Z,{ref:a,style:[Y.headerRoot,!r&&Y.headerBorderClosed,Y.cursor],testID:T.header},r?o.createElement(D.Z,{leftControl:h?null:o.createElement(P.V,null),onMiddleControlClick:m,rightControl:o.createElement(z,{conversationUrl:e,handleToggleVisibility:m,isExpanded:r,onClose:f}),style:Y.roundedAppBarCorners,title:h?o.createElement(t.Z,{style:Y.titleContainer},o.createElement(I,{size:"headline2",weight:"bold"},`${K}...`)):null}):o.createElement(k.Z,{onPress:()=>{g.scribe({element:"grok-bubble",action:"click"}),m()},style:[Y.collapsedContainer,{alignItems:"center",justifyContent:"center"}]},o.createElement(v.x1,{style:Y.icon})))}const Y=y.default.create((e=>({cursor:{cursor:"pointer"},headerRoot:{height:55,borderTopStartRadius:e.borderRadii.xLarge,borderTopEndRadius:e.borderRadii.xLarge,transition:"all 0.3s ease"},headerBorderClosed:{borderColor:e.colors.navigationBackground},titleContainer:{height:"100%",alignItems:"center",gap:e.spaces.space4,display:"flex",flexDirection:"row",flexGrow:1,paddingStart:e.spaces.space2,flexShrink:1},collapsedContainer:{height:"100%",alignItems:"center",display:"flex",flexDirection:"column",flexGrow:1},grokText:{fontSize:8,marginTop:-4},icon:{width:32,height:32},roundedAppBarCorners:{borderTopStartRadius:e.borderRadii.xLarge,borderTopEndRadius:e.borderRadii.xLarge}}))),ee={page:"grok-drawer"};const ae=(0,l.Z)({loader:()=>Promise.all([n.e("icons.13"),n.e("icons.0"),n.e("icons.22"),n.e("icons.5"),n.e("icons.29"),n.e("icons.7"),n.e("icons.1"),n.e("icons.15"),n.e("icons.25"),n.e("icons.10"),n.e("icons.14"),n.e("icons.20"),n.e("modules.common-e907d115"),n.e("modules.common-e019dbda"),n.e("icons.11"),n.e("icons.16"),n.e("icons.24"),n.e("modules.audio-6107ac1a"),n.e("modules.audio-b953418a"),n.e("modules.audio-7c51e6a7"),n.e("modules.audio-04db59e9"),n.e("modules.audio-76583d6c"),n.e("modules.audio-b7a8a5fb"),n.e("modules.audio-51f6e793"),n.e("modules.audio-e019dbda"),n.e("modules.audio-262c94d4"),n.e("modules.audio-c6fe4ea4"),n.e("icons.17"),n.e("icons.6"),n.e("icons.23"),n.e("icons.26"),n.e("icons.3"),n.e("icons.9"),n.e("icons.28"),n.e("icons.8"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-289382e4"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-b903813c"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-2ff6f611"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-828b2167"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-84f39d3f"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-0bfd6d7b"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-23859224"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-91facaf4"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-6365605c"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d60bd222"),n.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-62fc6e53"),n.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-fc31ced1"),n.e("shared~loader.Typeahead~loader.AppModules~loader.DMDrawer~ondemand.HoverCard~ondemand.NotFound~bundle.AboutTh"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9bd28fed"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b130c11"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-d35a04b3"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-fd0b2cf1"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c7e58553"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ff4a34e0"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),n.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-4b4cb9aa"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-96df1800"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-bc43d9b3"),n.e("shared~loader.Typeahead~loader.DMDrawer~ondemand.HoverCard~bundle.ReaderMode~bundle.AudioSpacePeek~bundle.Bir"),n.e("shared~loader.Dock~bundle.Articles~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSp-bbc41769"),n.e("shared~loader.Dock~bundle.Articles~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSp-3ec0edf6"),n.e("shared~loader.Dock~bundle.Articles~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSp-3fd5f349"),n.e("shared~loader.Dock~bundle.Articles~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSp-d9c770f1"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-f45b4eac"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-6cce8a9f"),n.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-93606ba8"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-c9d567be"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-7a04a44b"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-dba52705"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-1ce0fa70"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-4d00f589"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-2a74f407"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-757f3ab2"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-f3039e62"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-e75d887d"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-b93f71f2"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-743779ef"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-e851f17f"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-f2a58eac"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-29ff9b73"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-d622e6ad"),n.e("shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-d425713a"),n.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-8d7085c2"),n.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-53f39e22"),n.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-a7fd62bb"),n.e("shared~bundle.Birdwatch~bundle.News~bundle.Grok~ondemand.News~loader.inlineTombstoneHandler~loader.tweetHandl"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~bundle.Ocf~ondemand.Insights~bundle.TV~l"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~bundle.Payments~ondemand.News~ondemand.Insights~loader"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-b75711ed"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-eadf0bc8"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-b6859af7"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-856c9f2b"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-30607449"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-ff768435"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-b8a8a774"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-4e7553e3"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-68027d49"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-b20998b4"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-703d6ce2"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-5f0ed14e"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-bd66f825"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-92ee7280"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-4cd14b6e"),n.e("shared~bundle.AccountAnalytics~bundle.News~bundle.Grok~ondemand.News~ondemand.Insights~loader.Explor-380ace89"),n.e("shared~bundle.TwitterArticles~bundle.Grok~loader.Markdown~loader.TexBlock"),n.e("shared~bundle.TwitterArticles~bundle.Grok~loader.Markdown"),n.e("shared~bundle.GrokDrawer~bundle.Grok~loader.Markdown-bc6ccf4c"),n.e("shared~bundle.GrokDrawer~bundle.Grok~loader.Markdown-6107ac1a"),n.e("shared~bundle.GrokDrawer~bundle.Grok~loader.Markdown-e4e3d8bb"),n.e("shared~bundle.GrokDrawer~bundle.Grok~loader.Markdown-6ac0f1a5"),n.e("shared~bundle.Grok~loader.Markdown-6107ac1a"),n.e("shared~bundle.Grok~loader.Markdown-0ae4e026"),n.e("shared~bundle.Grok~loader.Markdown-b16f5c14"),n.e("shared~bundle.Grok~loader.Markdown-63cb1cc4"),n.e("shared~bundle.Grok~loader.Markdown-d49ace54"),n.e("shared~bundle.Grok~loader.Markdown-3277c3ad"),n.e("shared~bundle.Grok~loader.Markdown-57c2c4a2"),n.e("shared~bundle.Grok~loader.Markdown-6bf2d53b"),n.e("shared~bundle.Grok~loader.Markdown-78667c23"),n.e("shared~bundle.Grok~loader.Markdown-a244d277"),n.e("shared~bundle.Grok~loader.Markdown-0d8ef87b"),n.e("shared~bundle.Grok~loader.Markdown-26844252"),n.e("shared~bundle.Grok~loader.Markdown-f29574de"),n.e("shared~bundle.Grok~loader.Markdown-4ff64aa1"),n.e("shared~bundle.GrokDrawer~bundle.Grok"),n.e("bundle.Grok-6107ac1a"),n.e("bundle.Grok-9f4db315"),n.e("bundle.Grok-65f95f73"),n.e("bundle.Grok-63cb1cc4"),n.e("bundle.Grok-c69e90f3"),n.e("bundle.Grok-16d5f187"),n.e("bundle.Grok-017e4cb9"),n.e("bundle.Grok-7bc92c09"),n.e("bundle.Grok-f8a31592"),n.e("bundle.Grok-bd027025"),n.e("bundle.Grok-7a6ce5c4"),n.e("bundle.Grok-cebf58fc"),n.e("bundle.Grok-140f0005"),n.e("bundle.Grok-29980aa8"),n.e("bundle.Grok-6ac0f1a5"),n.e("bundle.Grok-3c20ad5c")]).then(n.bind(n,29734))});function ne({width:e}){const a=(0,u.cm)(),[n,l]=o.useState(0),k=(D=n,(0,f.Zx)((({windowHeight:e})=>{const a=g.I2.find((a=>D<=Math.ceil(e*a)));return a?e*Math.max(a,.5):Math.min(D,Math.ceil(g.T6*e))})));var D;const y=(0,b.v9)((e=>p.kX(e))),_=y===w.j.EXPANDED,M=y===w.j.CLOSED;o.useEffect((()=>{M&&l(0)}),[M]);const v=o.useCallback((e=>{const{nativeEvent:{layout:{height:a}}}=e;l(a)}),[l]),x=o.useMemo((()=>[g.ZP.allowPointer,g.ZP.main,_?{minHeight:k,maxWidth:null}:g.ZP.collapsedSmall]),[_,k]);return function(){const e=(0,d.useHistory)(),a=e.getLastNonModalLocationPathname()??e.location.pathname;return o.useMemo((()=>(0,h.z)(a)||a.startsWith("/i/chat")||a.startsWith("/i/communitynotes")||a.startsWith("/messages")||a.startsWith("/i/radar")||a.startsWith("/i/money")||a.startsWith("/i/verified")||a.startsWith("/i/broadcasts/")||a.startsWith("/compose/articles")||a.startsWith("/i/account_analytics")||a.startsWith("/i/conferences-room")||a.startsWith("/i/premium/hiring")||a.startsWith("/i/grok")||a.endsWith("/live")),[a])}()||M||!a?null:o.createElement(s.Z.GrokDrawer,null,o.createElement(i.Z,{id:"GrokDrawer"},((a,d)=>o.createElement(m.nO,{namespace:ee},o.createElement(t.Z,(0,r.Z)({ref:a()},d({style:[g.ZP.denyPointer,g.ZP.root,{width:e,height:n},c.Z.reducedMotionEnabled&&g.ZP.reducedMotion],testID:T.root})),o.createElement(t.Z,{onLayout:v,style:x},o.createElement(V,{conversationUrl:"/i/grok"}),_&&o.createElement(ae,null)))))))}},620988:(e,a,n)=>{n.d(a,{ZH:()=>k,ZP:()=>y,x9:()=>D});n(136728);var r=n(202784),o=n(726426),t=n.n(o),d=n(111677),l=n.n(d),s=n(88656),i=n(952793),c=n(782642),u=n(725405);n(571372);var h=n(623494),m=n(737368);const b=4,p=l().h4d7cbcc,w=l().j77292b7,f={onGrokFileSelected:e=>new Promise((e=>e())),onFileSelected:(e,a)=>new Promise((e=>e())),selectedFiles:{},clearSelectedFile:()=>{}},g=r.createContext(f);function k({children:e}){const[a,n]=r.useState({}),o=(0,c.p)(),d=(0,u.Z)(),l=(0,m.k)(),f=(0,i.JY)("responsive_web_grok_file_upload_max_files",b),k=r.useCallback((e=>{const r=a[e];r&&(r.abortController?.abort(),n((a=>{const n={...a};return delete n[e],n})))}),[a,n]),D=r.useCallback((async(e,a)=>{const r=t()(),i=new AbortController,c={abortController:i,isUploading:!0,isPendingAutomaticPromptSend:a?.awaitPromptSend,local:e};if(e.type.startsWith("image/"))try{c.dimensions=await(u=e,new Promise(((e,a)=>{if(!u.type.startsWith("image/"))return void a(new Error("File is not an image"));const n=new FileReader;n.onload=n=>{const r=new Image;r.onload=()=>{e({width:r.width,height:r.height})},r.onerror=()=>{a(new Error("Failed to load image"))},r.src=n.target.result},n.onerror=()=>{a(new Error("Failed to read file"))},n.readAsDataURL(u)})))}catch(e){}var u;n((e=>Object.keys(e).length>=f?(o({text:w({count:f})}),e):{...e,[r]:c}));try{const a=await l(e,i);(0,h.Jm)(d),c.remote={...a,dimensions:c.dimensions},n((e=>e[r]?{...e,[r]:c}:e))}catch(e){if(e instanceof s.Z&&0===e.status)return;(0,h.eV)(d,e.message),o({text:p}),n((e=>{const a={...e};return delete a[r],a}))}finally{c.isUploading=!1,n((e=>e[r]?{...e,[r]:c}:e))}}),[f,o,l,d]),y=r.useCallback((async e=>{const r=t()(),o={abortController:new AbortController,isUploading:!1,remote:e};n({...a,[r]:o})}),[a]);return r.createElement(g.Provider,{value:{selectedFiles:a,onFileSelected:D,clearSelectedFile:k,onGrokFileSelected:y}},e)}function D(){const e=(0,i.hC)("responsive_web_grok_pdf_upload_enabled"),a=(0,i.hC)("responsive_web_grok_text_upload_enabled");return r.useMemo((()=>{const n=["image/jpeg","image/png","image/webp"];return e&&n.push("application/pdf"),a&&(n.push("text/plain"),n.push("text/xml"),n.push("text/csv"),n.push("text/markdown"),n.push("text/x-markdown"),n.push("text/md"),n.push("text/calendar"),n.push("text/vcard"),n.push("text/json"),n.push("text/yaml"),n.push("text/x-python"),n.push("text/x-csrc"),n.push("text/x-c++src"),n.push("text/x-csharp"),n.push("text/x-ruby"),n.push("text/x-java-source"),n.push("text/x-go"),n.push("text/x-rust"),n.push("text/x-swift"),n.push("text/x-kotlin"),n.push("text/x-sql"),n.push("text/x-lua"),n.push("text/x-scala"),n.push("text/x-haskell"),n.push("text/x-php"),n.push("text/x-perl"),n.push("text/x-shellscript"),n.push("text/x-rsrc"),n.push("text/x-dart"),n.push("application/markdown"),n.push("application/xml"),n.push("application/json"),n.push("application/x-yaml"),n.push("application/x-latex"),n.push("application/x-sh"),n.push("application/x-msdownload"),n.push("application/x-httpd-php"),n.push("application/sql"),n.push("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),n.push("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")),n}),[e,a])}function y(){return r.useContext(g)}},737368:(e,a,n)=>{n.d(a,{k:()=>f});n(571372);var r=n(202784),o=n(111677),t=n.n(o),d=n(276259),l=n(952793),s=n(782642),i=n(725516),c=n(125363),u=n(458810),h=n(623494),m=n(620988);const b=t().c74e87e0,p=t().bea50a2a,w=e=>e.toLowerCase().replace(/\/$/,""),f=()=>{const e=(0,s.p)(),a=(0,i.z)(),n=(0,c.I0)(),o=(0,m.x9)(),t=(0,l.hC)("responsive_web_grok_file_compression_enabled"),f=(0,l.JY)("responsive_web_grok_file_max_size",5242880);return r.useCallback((async(r,l)=>{let s=r;if(!((e,a)=>{const n=w(a);return e.some((e=>{const a=w(e);if(a.endsWith("*")){const e=a.slice(0,-1);return n.startsWith(e)}return n===a}))})(o,r.type))throw e({text:p}),(0,h.op)(a,`file has unsupported type: ${r.type}`),new Error;if(t){let n;try{n=await(0,d.hv)(r,f)}catch(e){}if(!n)throw e({text:b}),(0,h.op)(a,"failed to compress the file"),new Error;s=n}else if(r.size>f)throw e({text:b}),(0,h.op)(a,"file is too large"),new Error;const i=await n((0,u.t)(s,l));return(0,h.Jm)(a),i}),[e,a,n,t,f,o])}},654917:(e,a,n)=>{n.d(a,{ZP:()=>p,eX:()=>m,uf:()=>b});var r=n(202784),o=n(107267),t=n(323265),d=n(791632),l=n(443781),s=n(952793),i=n(125363),c=n(389071),u=n(63538),h=n(623494);function m(){const e=(0,o.useHistory)(),a=(0,i.v9)(c.Es);return(0,d.HD)(e)?(0,d.tT)(e):a}function b(){const e=m(),a=(0,i.I0)(),n=(0,i.v9)((a=>(0,c.YJ)(a,e)));return(0,i.v9)(n.selectIsInitialized)||a((0,c.Ki)(e)),n}function p(){const{userClaims:e}=(0,l.QZ)(),a=m(),n=b(),o=(0,i.v9)(n.selectMessageIds),d=(0,i.I0)(),p=(0,i.v9)(n.selectFetchConversationIdStatus),w=(0,i.v9)(n.selectFetchConversationIdError),f=(0,i.v9)(n.selectMode),g=(0,i.v9)(n.selectStatus),k=(0,i.v9)(c.Pt),D=(0,i.v9)(n.selectConversationId),y=(0,i.v9)(c.pZ),_=(0,i.v9)(c.uF),M=(0,i.v9)(c.F9),v=(0,i.v9)(c.vf),x=(0,i.v9)(n.selectAnalysisEntityId),A=(0,i.v9)(n.selectUsingExperiment);let S=!1;const C=(0,s.hC)("responsive_web_grok_general_availability");e.isTrueAndEnabled("subscriptions_inapp_grok")?S="premium":(C||_)&&(S=y.length>0?"restricted":"free");const E=r.useCallback((async(e,a)=>{f!==e&&(d(n.setMode(e)),t.ZP.isTwitterApp()||await d((0,u.O)(e,M?.id)),(0,h.RC)(a,e))}),[d,n,f,M]),G=r.useCallback((async(e,a,n)=>{e!==M?.id&&(d((0,c.j1)(e,a)),t.ZP.isTwitterApp()||await d((0,u.O)(f,e)),n&&(0,h.JO)(n,e))}),[d,f,M]);return{messageIds:o,access:S,status:g,grokSettingsStatus:k,conversationKey:a,conversationId:D,analysisEntityId:x,accessRestrictedReasons:y,fetchConversationIdStatus:p,fetchConversationIdError:w,mode:f,modelId:M?.id,modelOptions:v,changeMode:E,changeModel:G,usingExperiment:A}}},305442:(e,a,n)=>{n.d(a,{Z:()=>o});var r=n(952793);function o(e){return(0,r.JY)("responsive_web_grok_imggen_count",1)}},623494:(e,a,n)=>{n.d(a,{DE:()=>m,G$:()=>l,HO:()=>x,HR:()=>E,JO:()=>w,Jm:()=>M,NH:()=>G,RC:()=>p,S7:()=>C,UV:()=>N,Uk:()=>y,YI:()=>c,YW:()=>S,ZY:()=>b,az:()=>s,c3:()=>d,dP:()=>g,dd:()=>h,eS:()=>_,eV:()=>v,hf:()=>f,hq:()=>i,kl:()=>D,op:()=>k,pv:()=>t,qQ:()=>T,u1:()=>A,y6:()=>u,zC:()=>I,zX:()=>P});var r=n(163889);function o(){return`online:${window.navigator.onLine}|effectiveType:${window.navigator.connection?.effectiveType??"unknown"}`}function t(e,a){R(e)({element:"api-add-response",action:"start",data:{event_info:JSON.stringify(a)}})}function d(e,a){R(e)({element:"api-add-response-regenerate",action:"start",data:{event_info:JSON.stringify(a)}})}function l(e,a){R(e)({element:"selected-side-by-side",action:"click",data:{event_info:JSON.stringify(a)}})}function s(e,a,n){R(e)({element:"client-home-log",action:a,data:{event_info:JSON.stringify(n)}})}function i(e,a){R(e)({element:"deepsearch-premature-stream-close-log",action:"error",data:{event_info:JSON.stringify({errorMessage:a.errorMessage}),duration_ms:a.durationMs}})}function c(e,a){R(e)({element:"deepsearch-premature-manual-stream-stop",action:"click",data:{duration_ms:a.durationMs}})}function u(e,a){R(e)({element:"deepsearch-duration",action:"complete",data:{duration_ms:a}})}function h(e,a){R(e)({element:"api-add-response-edit",action:"start",data:{event_info:JSON.stringify(a)}})}function m(e){R(e)({element:"abort",action:"click"})}function b(e){R(e)({element:"clear-conversation",action:"click"})}function p(e,a){R(e)({element:"grok_mode",action:"change",data:{event_info:a}})}function w(e,a){R(e)({element:"grok_model",action:"change",data:{event_info:a}})}function f(e,a){R(e)({element:"tweet-carousel",action:"change",data:{event_info:a.toString()}})}function g(e,a){R(e)({element:"file-attachment",action:"add",data:{event_info:a}})}function k(e,a){R(e)({element:"file-attachment",action:"fail",data:{event_info:a}})}function D(e,a,n){R(e)({element:"api-add-response",action:"error",data:{event_info:`${a.message}\n${a.stack}\n${o()}`}}),(0,r.Hj)(a,{level:"warning",extra:n})}function y(e,a){R(e)({element:"api-add-response",action:"fail",data:{event_info:`${a}\n${o()}`}})}function _(e,a){R(e)({element:"response-chunk-read",action:"timer_elapsed",data:{event_info:a?"first_chunk":void 0}})}function M(e){R(e)({element:"file-upload",action:"success"})}function v(e,a){R(e)({element:"file-upload",action:"fail",data:{event_info:a}})}function x(e,a){R(e)({element:"grok_post_analysis_button",action:"click",data:{event_source:a?"post_details":"timeline"}})}function A(e,a,n){R(e)({element:"grok-post-image-annotation",action:"start",data:{event_source:a?"post_details":"timeline",event_info:n?JSON.stringify({mediaId:n}):void 0}})}function S(e,a){R(e)({element:"grok-drawer-open",action:"success",data:{event_source:a}})}function C(e,a){R(e)({element:"grok-card-attachment",action:"show",data:{event_info:JSON.stringify({cardType:a.cardType,variant:a.variant})}})}function E(e,a,n){R(e)({element:"grok-card-attachment-follow-up",action:"send",data:{event_info:JSON.stringify({cardType:a.cardType,variant:a.variant,followUpText:n})}})}function G(e){R(e)({element:"open-grok-memory-drawer",action:"start",data:{}})}function I(e,a){R(e)({element:"grok-memory-detail",action:"click",data:{event_info:a}})}function N(e,a){R(e)({element:"grok-memory-forget",action:"click",data:{event_info:a}})}function P(e,a,n){R(e)({element:"grok-memory-forget",action:"error",data:{event_info:JSON.stringify({conversationId:a,error:n})}})}function T(e,a){R(e)({element:"grok-memory-detail",action:"click",data:{event_info:a}})}const R=e=>a=>{e.scribe({...a,data:{url:window.location.href,...a.data}})}},653798:(e,a,n)=>{n.d(a,{S:()=>o});var r=n(326439);n(585488);const o=r.Z}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.GrokDrawer-3c20ad5c.62ad2f7a.js.map