"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["modules.audio-b953418a"],{526626:(e,a,o)=>{o.d(a,{_:()=>s});var d=o(807896),r=o(202784),n=o(254683),l=o(610214);function s(e){const a=l.QH();return r.createElement(n.Z,(0,d.Z)({},e,{color:a}))}},662285:(e,a,o)=>{o.d(a,{Z:()=>l});var d=o(202784),r=o(523561),n=o(752905);const l=(0,r.Z)({loader:()=>Promise.all([o.e("icons.13"),o.e("icons.0"),o.e("icons.22"),o.e("icons.5"),o.e("icons.29"),o.e("icons.1"),o.e("icons.25"),o.e("icons.10"),o.e("icons.14"),o.e("icons.20"),o.e("modules.common-e907d115"),o.e("modules.common-e019dbda"),o.e("icons.11"),o.e("icons.16"),o.e("icons.24"),o.e("modules.audio-6107ac1a"),o.e("modules.audio-b953418a"),o.e("modules.audio-7c51e6a7"),o.e("modules.audio-04db59e9"),o.e("modules.audio-76583d6c"),o.e("modules.audio-b7a8a5fb"),o.e("modules.audio-51f6e793"),o.e("modules.audio-e019dbda"),o.e("modules.audio-262c94d4"),o.e("modules.audio-c6fe4ea4"),o.e("icons.6"),o.e("icons.23"),o.e("icons.26"),o.e("icons.3"),o.e("icons.8"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-289382e4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-b903813c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-2ff6f611"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-828b2167"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-84f39d3f"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-0bfd6d7b"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-23859224"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-91facaf4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-6365605c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d60bd222"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-62fc6e53"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-fc31ced1"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9bd28fed"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b130c11"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-d35a04b3"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-fd0b2cf1"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c7e58553"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ff4a34e0"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),o.e("loader.AudioContextSpaceClip")]).then(o.bind(o,189552)).then((e=>({default:e.__DANGEROUS_IMPORT__}))),renderPlaceholder:()=>d.createElement(n.Z,null)})},755988:(e,a,o)=>{o.d(a,{Z:()=>l});var d=o(202784),r=o(523561),n=o(114519);const l=(0,r.Z)({loader:()=>Promise.all([o.e("icons.13"),o.e("icons.0"),o.e("icons.22"),o.e("icons.5"),o.e("icons.29"),o.e("icons.7"),o.e("icons.1"),o.e("icons.15"),o.e("icons.25"),o.e("icons.10"),o.e("icons.14"),o.e("icons.20"),o.e("modules.common-e907d115"),o.e("modules.common-e019dbda"),o.e("icons.11"),o.e("icons.16"),o.e("icons.24"),o.e("modules.audio-6107ac1a"),o.e("modules.audio-b953418a"),o.e("modules.audio-7c51e6a7"),o.e("modules.audio-04db59e9"),o.e("modules.audio-76583d6c"),o.e("modules.audio-b7a8a5fb"),o.e("modules.audio-51f6e793"),o.e("modules.audio-e019dbda"),o.e("modules.audio-262c94d4"),o.e("modules.audio-c6fe4ea4"),o.e("icons.17"),o.e("icons.6"),o.e("icons.23"),o.e("icons.26"),o.e("icons.3"),o.e("icons.9"),o.e("icons.8"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-289382e4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-b903813c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-2ff6f611"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-828b2167"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-84f39d3f"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-0bfd6d7b"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-23859224"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-91facaf4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-6365605c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d60bd222"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-62fc6e53"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-fc31ced1"),o.e("shared~loader.Typeahead~loader.AppModules~loader.DMDrawer~ondemand.HoverCard~ondemand.NotFound~bundle.AboutTh"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9bd28fed"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b130c11"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-d35a04b3"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-fd0b2cf1"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c7e58553"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ff4a34e0"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),o.e("shared~loader.Typeahead~loader.DMDrawer~ondemand.HoverCard~bundle.ReaderMode~bundle.AudioSpacePeek~bundle.Bir"),o.e("loader.AudioContextSpaceMedia")]).then(o.bind(o,214196)).then((e=>({default:e.__DANGEROUS_IMPORT__}))),renderPlaceholder:()=>d.createElement(n.L,null)})},827778:(e,a,o)=>{o.d(a,{Z:()=>d});o(202784);const d=(0,o(523561).Z)({loader:()=>Promise.all([o.e("icons.13"),o.e("icons.0"),o.e("icons.22"),o.e("icons.5"),o.e("icons.29"),o.e("icons.1"),o.e("icons.25"),o.e("icons.10"),o.e("icons.14"),o.e("icons.20"),o.e("modules.common-e907d115"),o.e("modules.common-e019dbda"),o.e("icons.11"),o.e("icons.16"),o.e("icons.24"),o.e("modules.audio-6107ac1a"),o.e("modules.audio-b953418a"),o.e("modules.audio-7c51e6a7"),o.e("modules.audio-04db59e9"),o.e("modules.audio-76583d6c"),o.e("modules.audio-b7a8a5fb"),o.e("modules.audio-51f6e793"),o.e("modules.audio-e019dbda"),o.e("modules.audio-262c94d4"),o.e("modules.audio-c6fe4ea4"),o.e("icons.6"),o.e("icons.23"),o.e("icons.26"),o.e("icons.3"),o.e("icons.8"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-289382e4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d2034e67"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-b903813c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-2ff6f611"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-828b2167"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-84f39d3f"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-0bfd6d7b"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-23859224"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-91facaf4"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-6365605c"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~bundle.GrokDrawer~ondemand.-d60bd222"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-62fc6e53"),o.e("shared~loader.AudioDock~loader.Dock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.Inline-fc31ced1"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9bd28fed"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b130c11"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-d35a04b3"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9b361606"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-fd0b2cf1"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c7e58553"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ff4a34e0"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),o.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),o.e("loader.AudioContextVoiceMedia")]).then(o.bind(o,56957)).then((e=>({default:e.__DANGEROUS_IMPORT__})))})},189552:(e,a,o)=>{o.r(a),o.d(a,{__DANGEROUS_IMPORT__:()=>L});o(136728);var d=o(202784),r=o(614983),n=o.n(r),l=o(107267),s=o(752905),t=o(868871),i=o(461756),u=o(668260),c=o(111677),D=o.n(c),h=o(597237),M=o(827515),m=o(321835),p=o(355755),k=o(982790),b=o(87682),w=o(384757),f=o(16057),y=o(265399),A=(o(571372),o(363397));function I(e){const a=e.clipId,[o]=d.useState((()=>(0,A.Z)({id:a}))),r={store:o,broadcastId:e.audioSpaceId,mediaKey:e.mediaKey};return d.createElement(S.Provider,{value:r},e.children)}function P(){return d.useContext(S)}const S=d.createContext(new Error("SpaceClipContext is not initialized"));var g=o(516951),_=o(97837),C=o(135328);function E({children:e}){const a=d.useRef({placementApi:null,playbackEmitter:null}),o=d.useContext(S),{broadcastId:r,mediaKey:n,store:l}=o,s=l.useId();if(!s||!r)return d.createElement(d.Fragment,null,e);const t=l.useSetPlayerState();const i=l.useSetPlayerApi();function u(e){a.current.playbackEmitter&&a.current.playbackEmitter.signalPlacementChange(e)}const c={acquisitionParams:{clip_id:s},broadcastId:r,isLooping:!0,onPlayerApi:function(e){s&&i(s,e)},onPlaybackEmitterCreated:function(e){a.current.playbackEmitter=e,a.current.placementApi&&a.current.placementApi.sample(u)},onPlayerState:function(e,a){s&&t(s,e,a)},media:null,mediaKey:n,shouldAutoplayMuted:!0};return d.createElement(_.Z,{onChange:u,onPageVisibilityChange:g.Z,ref:function(e){a.current.placementApi=e}},e,d.createElement(C.Z,c))}var T=o(58255),B=o(692822),G=o(163889);function v(e){return T.w.proxsee.accessChat(e.chatToken).then((a=>function(e){const{access_token:a,endpoint:o}=e.session,d={messages:[],currentCursor:"",shouldAbort:!1};if(!a||!o)return Promise.resolve(d.messages);return R(void 0,d,{...e,access_token:a,endpoint:o})}({...e,session:a}))).catch((e=>{const a={...e};return(0,G.ZP)("[fetchClipCaptions] failed to fetch chat history",a),[]}))}function R(e,a,o){if(e){const{cursor:d,messages:r}=e;a.currentCursor=d;const{isComplete:n,results:l}=function(e,a){let o=!1;const d=[];for(const r of e)if(r.kind===B.bI.Chat){const{payload:e,signature:n}=r,l=new B.J(e,{signature:n}),s=a.clipEndTimeMs&&l.timestamp>a.clipEndTimeMs,t=l.type===B.gK.ServerAudioTranscription,i=t&&l.body.final;if(s){o=!0,t&&!l.body.final&&d.push(l);break}i&&d.push(l)}return{isComplete:o,results:d}}(r,o);if(a.messages.push(...l),!d||n)return Promise.resolve(a.messages)}return T.w.proxsee.getChatHistory({access_token:o.access_token,host:o.endpoint,path:B.tJ.CHATMAN_REPLAY,cursor:a.currentCursor,since:1e6*o.clipStartTimeMs}).then((e=>R(e,a,o)))}function Z(){const{store:e}=P(),a=function(){const{store:e}=P(),a=e.useCurrentTrack(),{absoluteTimeMs:o,chatToken:r,durationMs:n}=a||{},[l,s]=d.useState(null),t=d.useRef({hasEffectRun:!1});return d.useEffect((()=>{!t.current.hasEffectRun&&r&&o&&n&&(t.current.hasEffectRun=!0,v({clipEndTimeMs:o+n,clipStartTimeMs:o,chatToken:r}).then((e=>{s(e)})))}),[r,o,n]),l}(),o=e.useCurrentTrack(),{id3NtpTime:r}=o||{},[n,l]=d.useState({id:void 0,text:"",durationMs:0});if(d.useEffect((()=>{if((0,M.Z)(r)&&a&&a.length){const e=e=>r-e.ntpTimeInSeconds;let o;for(const d of a){const a=e(d);a<0&&(o?a>e(o)&&(o=d):o=d)}if(o&&o.body.uuid!==n.id){const a=1e3*Math.abs(e(o)),d=function(e,a){const o=e.split(" ").length,d=a>=o*x;return d}(o.body.body,a);l({text:d?o.body.body:"",id:o.body.uuid,durationMs:a})}}}),[a,r,n]),a)return a.length?{text:n.text,durationMs:n.durationMs}:null}const x=170;function O(e){const{handlers:a,space:o,utils:r}=(0,k.$)(e.audioSpaceId),{store:s}=P(),c=function(){const{broadcastId:e,store:a}=P();return(0,f.z0)(e,a)}();n()(c,"activeSpeaker should be defined");const D=d.useMemo((()=>({isHost:"host"===c.kind,periscopeUserId:c.user?.periscope_user_id})),[c.kind,c.user?.periscope_user_id]),A=s.useAudioLevel(D),I=s.useIsPlaying(),S=s.useIsMuted(),g=r.state(),_=function(){const{broadcastId:e,store:a}=P(),o=a.usePlayerApi(),{maxDurationMs:r,maxDurationSeconds:n}=(0,b.R)(e);d.useEffect((()=>{o&&o.setPlaybackTimeRange({startTimeS:0,endTimeS:n})}),[o,n]);const l=a.useCurrentTrack(),{currentTimeMs:s,durationMs:t}=l||{};let i=0;if((0,M.Z)(s)&&(0,M.Z)(t)){const e=Math.min(t,r);i=Math.max(e-s,0)}return i}(),C=r.title(),E=function(e,a){const o=(0,l.useHistory)(),r=d.useCallback((()=>o.push((0,p.g)(e))),[e,o]),n=(0,w.O)(e,r,a);return[{Icon:h.default,text:H.report,isEmphasized:!0,onClick:n}]}(e.audioSpaceId,e.clipMetadata.startTimecodeMillis),T=function(){const{broadcastId:e}=P(),{utils:a}=(0,k.$)(e),{isPlaying:o,togglePlayback:d}=y.gt.usePlayButtonProps();if(a.state()===u.default.StateEnum.replay&&a.is.joined)return{isPlaying:o,togglePlayback:d}}(),B=Z(),G=s.useToggleMute();return d.createElement(m.Z,{onImpression:function(){r.scribe(":*:*:clipping:audiospace_card:impression")}},d.createElement(t.Z,{audioLevel:A,caption:B,community:o?.community,fadeInWords:!i.Z.reducedMotionEnabled,isJoined:r.is.joined,isMuted:S,isPlaying:I,menuItems:E,onButtonClick:function(){T?T.togglePlayback():a.join()},onMuteToggle:function(){switch(G()){case"mute":r.scribe(":*:*:clipping:audiospace_card:mute");break;case"unmute":r.scribe(":*:*:clipping:audiospace_card:unmute")}},palette:o?.hostPalette,replayIsPlaying:T?.isPlaying,speaker:c.user,state:g,timeMs:_,title:C,withSquareBottomBorderRadius:e.withSquareBottomBorderRadius,withStraightBorders:e.withStraightBorders}))}const H={report:D().ccf2f24e},L=function(e){const{space:a}=(0,k.$)(e.audioSpaceId);if(!a||!e.clipMetadata)return d.createElement(s.Z,null);const o=a.media_key;return d.createElement(I,{audioSpaceId:e.audioSpaceId,clipId:e.clipMetadata.clipId,mediaKey:o},d.createElement(E,null,d.createElement(O,{audioSpaceId:e.audioSpaceId,clipMetadata:e.clipMetadata,withSquareBottomBorderRadius:e.withSquareBottomBorderRadius,withStraightBorders:e.withStraightBorders})))}},214196:(e,a,o)=>{o.r(a),o.d(a,{__DANGEROUS_IMPORT__:()=>A});var d=o(807896),r=o(202784),n=o(400752),l=o(107267),s=o(668260),t=o(321835),i=o(782642),u=o(582129),c=o(712612),D=o(125363),h=o(390387),M=o(905710),m=o(484633),p=o(381904),k=o(982790),b=o(89609),w=o(123293),f=o(610214),y=o(265399);const A=function(e){const a=(0,D.v9)(h._h),o=(0,D.v9)(h.WM),d=(0,M.e)(e.audioSpaceId),y=(0,i.p)(),A=(0,f.Hz)(),g=(0,n.b9)(p.e),{handlers:_,space:C,utils:E}=(0,k.$)(e.audioSpaceId),T=C?.narrow_cast_space_type===s.default.AudienceEnum.employeesOnly,B=(0,b.Z)(e.audioSpaceId),G=C?.host?.user_id===a,v=(0,l.useHistory)(),R=E.state()===s.default.StateEnum.scheduled,Z=(0,n.b9)(u.aG),x=(0,n.b9)(c.F3);let O={};O=!1===e.isInteractive?{link:void 0,onButtonClick:void 0}:E.is.superFollowersOnly&&!E.is.joinable?{link:d,onButtonClick:B.props.onClick}:e.withDirectJoin&&E.is.joinable&&E.is.Running||E.is.replayable?{onClick:()=>_.join({origin:"card"})}:R&&G?{onButtonClick:()=>{x().then((a=>{if(!a)return;Z(e.audioSpaceId).then((e=>{const{audioSpaceMetadata:a,broadcast:d}=e;(0,u.j)({contentType:d.content_type,addToast:y,id:d.id,isAnonymous:!1,isLive:!0,isReplay:!1,isSuperFollowersOnly:o&&String(a?.narrow_cast_space_type)===I.SUBSCRIBERS,mediaKey:d.media_key,role:m.Q.host,clearAndLoadSpace:g,resetExpandedDockStore:A}),v.goBackThroughModals()}))}))}}:{link:d,onButtonClick:B.props.onClick};const H=T?"unavailable":E.state(),L=function(e){return e?[e.host,...e.cohosts,...e.participants.speakers].filter(Boolean):[]}(C),j={disabled:B.isSubscribing,hasReminderSet:B.props.hasReminderSet,scheduledStart:B.props.scheduledStart,isJoined:E.is.joined,title:E.title(),replayStartTime:void 0,replayDuration:void 0,withSquareBottomBorderRadius:e.withSquareBottomBorderRadius,withStraightBorders:e.withStraightBorders,withoutButton:e.withoutButton,...O},{ended_at:N,started_at:U}=C||{};U&&N&&(j.replayStartTime=U,j.replayDuration=N-U);const q={...j,isHost:G,host:C?.host,community:C?.community,participants:L.slice(0,3),palette:C?.hostPalette,total:C?.participants.total,tunedIn:E.getTunedInCount(),state:H,audience:C?.narrow_cast_space_type,button:void 0};E.is.joined&&E.is.replayable?q.button=r.createElement(S,q):E.is.Ended&&!E.is.replayable&&(q.button=r.createElement(w.Z,{scribe:E.scribe,space:C}));if(R&&G){const e=B.props?.scheduledStart;(!e||Date.now()+P<e)&&(q.withoutButton=!0)}return r.createElement(t.Z,{onImpression:function(){E.scribe("::::audiospace_card:impression")}},r.createElement(s.default,q))},I={ALL:"0",EMPLOYEES:"1",SUBSCRIBERS:"2"},P=18e5;function S(e){const{isPlaying:a,togglePlayback:o}=y.gt.usePlayButtonProps();return r.createElement(s.default.ButtonV2,(0,d.Z)({},e,{onButtonClick:o,replayIsPlaying:a}))}},56957:(e,a,o)=>{o.r(a),o.d(a,{__DANGEROUS_IMPORT__:()=>t});var d=o(202784),r=o(425474),n=o(586035),l=o(516951),s=o(381904);const t=function(e){const a=function(e){const a=(0,s.Y)(),{tweet:o,withStraightBorders:r}=e,t=a.activeItem&&a.activeItem.id===o.id_str,u=t&&a;return d.useMemo((()=>{const d=a.player.api,s=a.player.state,u=a.player.currentTrack;return t&&n.B(o)&&s&&d&&u?{tweet:o,withStraightBorders:r,isMuted:s.isMuted,isPlaying:s.isPlaying,progressMs:u.currentTimeMs||0,durationMs:u.durationMs,...i(a),onPress:a.player.togglePlayback,onMuteToggle:a.player.toggleMute,onCaptionsToggle:d.toggleCaptions}:{tweet:o,withStraightBorders:r,isMuted:!1,isPlaying:!1,progressMs:0,onPress:()=>a.load.voiceTweet(e.tweet),onMuteToggle:l.Z,onCaptionsToggle:l.Z}}),[u])}(e);return d.useMemo((()=>d.createElement(r.Z,a)),[a])};function i(e){const a={captionsState:r.Z.CaptionsState.unavailable,caption:void 0},{currentTrack:o}=e.player;return o&&(o.hasCaptions?e.player.state?.areCaptionsShown?(a.captionsState=r.Z.CaptionsState.on,a.caption=o.textCues&&o.textCues[0]?.text):a.captionsState=r.Z.CaptionsState.off:a.captionsState=r.Z.CaptionsState.unavailable),a}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/modules.audio-b953418a.103e326a.js.map