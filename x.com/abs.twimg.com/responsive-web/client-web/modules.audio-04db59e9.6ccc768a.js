"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["modules.audio-04db59e9"],{241862:(e,t,a)=>{a.d(t,{R:()=>c,q:()=>i});a(136728),a(543673),a(240753),a(128399);var s=a(202784),n=a(400752),r=a(790997),o=a(877506);const i=new class{constructor(){this.state=[]}addTrack(e){e.enabled=!0;const t=new MediaStream;t.addTrack(e);const a=new Audio;a.srcObject=t,a.play(),this.state.push({audioElement:a,mediaStream:t})}play(){this.state.forEach((({audioElement:e,mediaStream:t})=>{t.getTracks().forEach((e=>e.enabled=!0)),e.play()}))}pause(){this.state.forEach((({audioElement:e,mediaStream:t})=>{t.getTracks().forEach((e=>e.enabled=!1)),e.pause()}))}end(){this.state.forEach((({audioElement:e,mediaStream:t})=>{t.getTracks().forEach((e=>e.stop())),e.pause()}))}};function c(){const e=o.Z.usePlayerApi(),t=(0,n.Dv)(r.gu);s.useEffect((()=>{t?(e?.mute(),i.play()):(e?.unmute(),e?.play(),i.pause())}),[t,e])}new URLSearchParams(window.location.search).get("exposeDebug")&&(window.__mediaStreamAudioPlayer=i)},106006:(e,t,a)=>{a.r(t),a.d(t,{ConferenceBehaviors:()=>Q,SPACES_NUX_SHEET_SHOW_DELAY_MS:()=>W,SpaceBehaviors:()=>L,removedFromSpaceAtom:()=>G,useHandleHydraControlMessages:()=>z,useMobileCollapseOnRouteChange:()=>j,useReplayStateManager:()=>V,useSpaceExitOnBrowserClose:()=>F,useSpaceNuxWatcher:()=>$});var s=a(202784),n=a(400752),r=a(565058),o=a(107267),i=a(111677),c=a.n(i),l=a(656898),d=a(400915),u=a(420182),p=a(110138),m=a(692822),b=a(163889),f=a(582129),g=a(625555),h=a(139613),y=a(4427),k=a(790997),S=a(712612),w=a(217220),E=a(509599),v=a(309487),_=a(601576),I=a(8336),C=a(443781),D=a(42134),M=a(142202),R=a(670687),Z=a(877506),U=a(113788),P=a(484633),H=a(241862),A=a(375764),x=a(637692),O=a(279902),T=a(610214),B=a(905443);function L({audioSpaceId:e,isSideNavLayout:t}){return F(e),V(e),j(t),z(e),$(e),(0,E.of)(e),(0,E.d3)(e),(0,H.R)(),(0,B.d5)(e),(0,v.W)(),(0,h.dF)(),(0,S.R2)(),(0,h.AE)(),null}function Q({audioSpaceId:e}){return z(e),(0,E.of)(e),(0,B.d5)(e),F(e),(0,h.dF)(),(0,U.FN)(),null}function F(e){const{role:t}=(0,d.l7)(),a=Z.Z.usePlayerApi(),r=(0,n.b9)(k.Hs);s.useEffect((()=>{const t=()=>{r({spaceId:e}),a?.pause()};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e,r,a,t])}function V(e){const t=(0,n.Dv)(l.Cm.spaceStateAtom),a=Z.Z.useCurrentTrackDurationMs(),r=Z.Z.usePlayerApi(),o=(0,n.Dv)(l.Cm.replayStartTimeAtom),{scrubToFraction:i}=r||{},c=T.gy(),{isUserSpeakingRole:u}=(0,d.l7)(),p=(0,n.oR)();s.useEffect((()=>p.sub(Z.Z.isPlayingAtom,(()=>{p.get(Z.Z.isPlayingAtom)||u?M.Z.start(p):M.Z.stop()}))),[c,u,p]);const m=Z.Z.useGetCurrentTrack();s.useEffect((()=>{const e=m();if(Boolean(e)&&t?.replayable&&t?.joined&&i&&a&&o){i(1e3*o/a)}}),[m,i,o,a,t?.replayable,t?.joined])}function j(e){const t=T.Cc(),a=T.Qe(),{key:n,pathname:r}=(0,o.useLocation)(),i=s.useRef({key:n,pathname:r});s.useEffect((()=>{if(!e){if(i.current.key!==n){q.spaceUrl.test(i.current.pathname)||"collapse"===t||a("collapse")}i.current.key=n,i.current.pathname=r}}),[n,r,e,a,t])}const G=(0,r.cn)(null,((e,t)=>{const{dispatch:a}=e(u.qc);a((0,_.fz)({text:K.removedFromSpace})),t(f.dq,{isKicked:!0})}));function z(e){const t=p.Z.proxsee.periscopeUserId(),{isUserSpeakingRole:a,role:r}=(0,d.l7)(),{viewerUserId:o}=s.useContext(C.rC),i=(0,n.b9)(B.ZO),c=(0,n.b9)(B.UD),l=(0,n.oR)(),u=(0,n.b9)(G);s.useEffect((()=>{if(o){const s=e=>Boolean(e.type===m.gK.HydraControlMessage&&e.body.guestBroadcastingEvent&&m.vw[e.body.guestBroadcastingEvent]),n=e=>!0;return M.Z.setDetermineShouldImmediatelyProcessMessage(a?n:s),M.Z.subscribe(l,m.gK.HydraControlMessage,(function(s){for(const n of s)switch(n.body.guestBroadcastingEvent){case m._M.RemoveParticipant:(n.body?.twitter_participant_ids||[]).includes(o)&&((0,b.Hj)("Leaving space due to RemoveParticipant",{level:"warning"}),u());break;case m._M.InviteViewersToCallIn:i(!0);break;case m._M.AddAdmin:n.body.twitter_participant_ids?.includes(o)&&c(!0);break;case m._M.RemoveAdmin:n.body.twitter_participant_ids?.includes(o)&&(c(!1),r===P.Q.cohost&&l.set(D.cI,P.Q.listener));break;case m._M.BeginConnecting:a||n.body.guestRemoteID!==t||l.set(k.$R,{spaceId:e,negotiate:!0,createRoom:!1}).then((()=>{l.set(D.cI,P.Q.speaker)}));break;case m._M.HangUpOnGuest:r!==P.Q.speaker&&r!==P.Q.cohost||n.body.guestRemoteID!==t||((0,b.Hj)("Leaving space due to HangUpOnGuest",{level:"warning"}),l.set(k.Hs,{spaceId:e,wasKicked:!0}).finally((()=>{l.set(D.cI,P.Q.listener)})));break;case m._M.MuteGuest:{if(!l.get(y.MG)){const e=n.data.sender?.user_id,a=n.body.guestRemoteID;if(e!==t&&a===t&&l.set(S.Dy,!0),e&&e!==t){const t=l.get((0,k.De)(e));t&&l.set((0,R.kD)(t),!0)}break}const e=n.data.sender?.user_id,a=n.body.sessionUUID,s=l.get(g.wr);if(e!==t&&s&&a===s&&l.set(S.Dy,!0),a&&a!==s){const e=l.get((0,E.PO)(a));e&&l.set((0,R.kD)(e),!0)}const r=n.body.guestRemoteID;r&&e!==r&&e!==t&&e&&a&&l.set(I.yg,e,a);break}case m._M.UnmuteGuest:{if(!l.get(y.MG)){const e=n.body.guestRemoteID;if(e&&e!==t){const t=l.get((0,k.De)(e));t&&l.set((0,R.kD)(t),!1)}break}const e=n.body.sessionUUID,a=l.get(g.wr);if(e&&e!==a){const t=l.get((0,E.PO)(e));t&&l.set((0,R.kD)(t),!1)}break}case m._M.MuteSpace:a&&r!==P.Q.host&&r!==P.Q.cohost&&l.set(S.fg,!0);break;case m._M.UnmuteSpace:a&&r!==P.Q.host&&r!==P.Q.cohost&&l.set(S.fg,!1);break;case m._M.RaiseHand:{if(!l.get(y.MG)){const e=n.body.guestRemoteID;if(e){const t=l.get((0,k.De)(e));t&&l.set((0,w.HV)(t),n.body?.emoji??"")}break}const e=n.body.sessionUUID;if(!e)break;const t=l.get((0,E.PO)(e));if(!t)break;l.set((0,w.HV)(t),n.body?.emoji??"");break}case m._M.LowerHand:{if(!l.get(y.MG)){const e=n.body.guestRemoteID;if(e){const t=l.get((0,k.De)(e));t&&l.set((0,w.HV)(t),"")}break}const e=n.body.sessionUUID;if(!e)break;const t=l.get((0,E.PO)(e));if(!t)break;l.set((0,w.HV)(t),"");break}}return{clearHeapForMessageType:!0}}))}}),[e,u,a,t,r,c,i,l,o])}const W=2e3;function $(e){const{openSheet:t}=T.VE(),a=T.Cc()===T.EJ.full,n=O.Sd(),r=x.Sd(e),o=A.Sd(e),i=s.useRef({openSheet:t});let c;i.current.openSheet=t,a&&(n.canShow?c=n.sheetId:r.canShow?c=r.sheetId:o.canShow&&(c=o.sheetId)),s.useEffect((()=>{let e;return c&&(e=setTimeout((()=>{i.current.openSheet(c)}),W)),()=>clearTimeout(e)}),[c])}const q={spaceUrl:/i\/spaces\/.+/},K={removedFromSpace:c().jd859c9c}},625125:(e,t,a)=>{a.d(t,{W:()=>E});var s=a(202784),n=a(400752),r=a(325686),o=a(174326),i=a(680665),c=a(521288),l=a(366635),d=a(154003),u=a(392237),p=a(111677),m=a.n(p),b=a(837020),f=a(656898),g=a(400915),h=a(110138),y=a(443781),k=a(484633),S=a(381904),w=a(338645);function E(e){const t=(0,n.Dv)(f.Cm.sharingsAtom);if(!t)return null;const a=[...t].reverse().filter((e=>e&&e.tweet&&e.user));return a.length?s.createElement(v,{items:a}):null}function v(e){const{items:t}=e,a=t.reduce(((e,t)=>t.tweet?e.length?`${e}.${t.id}`:t.id:e),"");const[n,r]=s.useState(),c=Math.max(0,t.findIndex((e=>e.id===n)));return s.createElement(s.Fragment,null,s.createElement(o.Z,{childrenStyle:D.carouselChildrenStyles,key:a,onVisibleRangeChange:({index:e,intersectionRatio:a})=>{1===a&&r(t[e].id)},updateObserverWithChildren:!0,visibleItemIndex:c},t.map(((e,t)=>s.createElement(_,{item:e,key:e.id||t})))),s.createElement(i.ZP,{count:t.length,key:`${a}-indicators`,max:I,selectedIndex:c}))}function _(e){const{isUserAdminRole:t,role:a}=(0,g.l7)(),{activeItem:n}=(0,S.Y)(),{viewerUserId:o}=(0,y.QZ)(),i=n?.id||"";if(!e.item)return null;const{tweet:u,user:p}=e.item,m=t||a===k.Q.speaker&&p?.id_str===(o?.toString()||"");return s.createElement(r.Z,{key:u.id_str,style:D.sharedContentContainer},s.createElement(c.Z,{isCondensed:!0,tweet:u}),s.createElement(l.Z,{avatarSize:"small",name:C.sharedBy({name:p?.name}),nameSize:"subtext2",profileImageUrl:p?.profile_image_url_https,style:D.sharedContentBy,weight:"normal"}),m&&s.createElement(d.ZP,{"aria-label":R,backgroundColor:"gray700",hoverLabel:Z,icon:M,onPress:()=>{h.Z.deleteSharing(i,e.item.id)},size:"xSmall",style:D.dismissButton}))}const I=8,C={sharedBy:m().bdfa93eb},D=u.default.create((e=>({sharedContentContainer:{paddingHorizontal:(0,w.iK)(e).container.paddingHorizontal,width:"100%"},carouselChildrenStyles:{scrollSnapAlign:"center",scrollSnapStop:"always",width:"100%"},sharedContentBy:{marginTop:e.spaces.space8},dismissButton:{position:"absolute",right:e.spaces.space16,top:e.spaces.space12},dismissIcon:{color:e.colors.white}}))),M=s.createElement(b.default,{style:D.dismissIcon}),R=m().e839db3a,Z={label:R}},49998:(e,t,a)=>{a.d(t,{t:()=>I});var s=a(202784),n=a(154003),r=a(111677),o=a.n(r),i=a(213279),c=a(166074),l=a(323265),d=a(933794),u=a(4427),p=a(758614),m=a(934871);const b=l.ZP.isMac()?" (âŒ˜+e)":l.ZP.isDesktopOS()?" (ctrl+e)":"",f=o().ic107434,g=o().d7e0329c,h=`Turn on camera${b}`,y=`Turn off camera${b}`,k={label:f,preferredVerticalOrientation:"up"},S={label:g,preferredVerticalOrientation:"up"},w={label:h,preferredVerticalOrientation:"up"},E={label:y,preferredVerticalOrientation:"up"},v=s.createElement(i.default,null),_=s.createElement(c.default,null);function I(e){const t=(0,m.jq)(),a=(0,m.Ux)(),r=(0,m.rW)(),o=(0,p.qb)(),i=(0,m.RY)(),c=(0,u.Qg)(),l={"mod+e":()=>{t?i():o()}},b=t?s.createElement(n.ZP,{"aria-label":c?y:g,hoverLabel:c?E:S,icon:v,onPress:i,size:c?"large":"xLarge",type:"primaryFilled"}):s.createElement(n.ZP,{"aria-label":c?h:f,disabled:a||r,hoverLabel:c?w:k,icon:_,onPress:o,size:c?"large":"xLarge",type:"destructiveFilled"});return c?s.createElement(d.Z,{children:b,handlers:l}):b}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/modules.audio-04db59e9.6ccc768a.js.map