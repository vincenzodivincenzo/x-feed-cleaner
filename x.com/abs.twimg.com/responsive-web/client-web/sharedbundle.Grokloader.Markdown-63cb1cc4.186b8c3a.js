"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~bundle.Grok~loader.Markdown-63cb1cc4"],{530326:(e,t,n)=>{n.d(t,{f:()=>d});n(574858);var o=n(323265),r=n(389071),a=n(623494),s=n(806528),i=n(155918),l=n(958602),c=n(250781);const d=({analytics:e,conversationKey:t,userChatItemId:n})=>({analysisEntityId:d,returnCitations:m,returnSearchResults:u=!0,trendPromptIdStr:p,features:g={eagerTweets:!0,serverHistory:!0},imageGenerationCount:h,toolOverrides:y,personalityId:f,metadata:k,modelIdOverride:b})=>(p,C,{api:x,featureSwitches:E})=>{const v=!o.ZP.isTwitterApp()&&E.isTrue("responsive_web_grok_api_enable_grok_host"),w=(0,r.bD)(t),S=w.selectConversationId(C());return new Promise((t=>{S||(0,a.Uk)(e,"regenerate function failed to find a conversationId"),t(S)})).then((async o=>{if("string"==typeof o){const S=w.selectMode(C()),_=w.selectConversationWithLocalMessages(C()),Z=(0,r.F9)(C()),I=_.findLastIndex((e=>e.sender===i.CI.ASSISTANT&&e.userChatItemId===n));if(-1===I)return void(0,a.Uk)(e,"regenerate function couldn't find an actionable response");const R=_[I],P=R.promptMetadata?{...R.promptMetadata,action:"REGENERATE"}:void 0,T=_.slice(0,I).map(((e,t)=>({message:e.message,sender:e.sender,fileAttachments:e.fileAttachments,metadata:t===I-1&&k||e.metadata}))),M=_.findLastIndex((e=>e.sender===i.CI.HUMAN));let B=Z?.id,H=Z?.mode;const L=(0,r.vf)(C());if(-1!==M){const e=_[M];if("GROK_ANALYZE"===e.promptMetadata?.promptSource){const e=L.find((e=>e.isAnalyzeEnabled))?.id;e&&(B=e,H=void 0)}}let $;const D=E.isTrue("responsive_web_grok_location_enabled");if(D){const e=(0,s.fw)(C())?.position;e&&($={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy})}const z=(0,r.en)(C()),A={...y};if(z&&z.toolOverrides){const e=z.toolOverrides;Object.keys(e).forEach((t=>{A[t]=e[t]}))}const U=R.isDeepsearch,F=R.isReasoning,O={responses:T,systemPromptName:S,conversationId:o,grokModelOptionId:b||B,modelMode:H,returnSearchResults:u,returnCitations:m,requestFeatures:g,resampleResponseId:n,imageGenerationCount:h,...d&&1===T.length?{analysisEntityId:d}:void 0,promptMetadata:P,toolOverrides:A,geoLocation:$,enableSideBySide:!1,isDeepsearch:U,isReasoning:F,personalityId:f,deepsearchArgs:U?z?.deepsearchArgs:void 0};null!=w.selectCurrentResponseMessage(C())&&await p((0,l.I)({analytics:e,conversationKey:t})),p(w.regenerateResponse(R));const{mediaIds:W,mediaUrls:K}=(0,i.VU)(R);(0,a.c3)(e,{conversationLength:T.length+1,isDeepsearch:U||void 0,isReasoning:F||void 0,allMediaIds:W.length>0?W:void 0,allMediaUrls:K.length>0?K:void 0});const N=E.isTrue("responsive_web_grok_enable_add_response_keepalive")&&(U||F);return(0,c.D)({grokModule:w,requestBody:O,analytics:e,dispatch:p,api:x,eventTag:"regenerate",flags:{enableLocation:D,enableGrokApiHost:v,enableKeepalive:N},featureSwitches:E})}}))}},207683:(e,t,n)=>{n.r(t),n.d(t,{GrokMarkdown:()=>Xe,default:()=>Qe});var o=n(202784),r=n(719870),a=n(325686),s=n(442730),i=n(952793),l=n(976021);const c=/^<render_chart\s+chartjs_config='([^']+)'\s*>([\s\S]*?)<\/render_chart>/,d={name:"renderChart",level:"block",start:e=>e.indexOf("<render_chart"),tokenizer(e){const t=c.exec(e);if(t)return{type:"renderChart",raw:t[0],chartJSConfig:t[1],text:t[2]}}},m=/^<grok:richcontent\s+id="([^"]+)"\s+type="([^"]+)"\s*>([\s\S]*?)<\/grok:richcontent>/,u={name:"grokRichContent",level:"block",start:e=>e.indexOf("<grok:richcontent"),tokenizer(e){const t=m.exec(e);if(t)return{type:"grokRichContent",raw:t[0],id:t[1],contentType:t[2],text:""}}},p=/^<grok:render(?:\s+card_id="([^"]+)")?(?:\s+card_type="([^"]+)")?(?:\s+type="([^"]+)")?\s*>([\s\S]*?)<\/grok:render>/,g={name:"grokRichContent",level:"inline",start:e=>e.indexOf("<grok:render"),tokenizer(e){const t=p.exec(e);if(t)return{type:"grokRichContent",raw:t[0],id:t[1]||"",contentType:t[2]||void 0,text:""}}},h=/^<images_search_card\s+id="([^"]+)"\s+query="([^"]+)"\s+size="([^"]+)"\s+position="([^"]+)"\s*>([\s\S]*?)<\/images_search_card>/,y={name:"grokRichContent",level:"block",start:e=>e.indexOf("<images_search_card"),tokenizer(e){const t=h.exec(e);if(t)return{type:"grokRichContent",raw:t[0],id:t[1],size:t[3],position:t[4],text:"",contentType:"images_search_card"}}},f=/^<image_generation_card\s+id="([^"]+)"(?:\s+query="([^"]+)")?(?:\s+size="([^"]+)")?(?:\s+position="([^"]+)")?\s*><\/image_generation_card>/,k={name:"grokRichContent",level:"block",start:e=>e.indexOf("<image_generation_card"),tokenizer(e){const t=f.exec(e);if(t)return{type:"grokRichContent",raw:t[0],id:t[1],query:t[2]||void 0,size:t[3]||void 0,position:t[4]||void 0,text:"",contentType:"image_generation_card"}}};var b=n(978921),C=n(187268);const x=/^<tool_usage_card>\s*(?:<tool_usage_card_id>([0-9a-f-]{36})<\/tool_usage_card_id>\s*)?<tool_name>([^<]+)<\/tool_name>\s*<tool_args>([\s\S]*?)<\/tool_args>\s*<\/tool_usage_card>/ms,E={name:"toolUsageCard",level:"inline",start:e=>e.indexOf("<tool_usage_card"),tokenizer(e){const t=x.exec(e);if(t){const e=(0,C.Sd)(t[1],t[2],t[3]);return{type:"toolUsageCard",raw:t[0],toolUsageCard:e}}}};var v=n(170676),w=n(122670),S=n(595080),_=(n(136728),n(731708)),Z=n(392237),I=n(807896),R=n(154003),P=n(797553),T=n(143670),M=n(111677),B=n.n(M),H=n(473026),L=n(689582),$=n(72591);const D="https://artifacts.grokusercontent.com/chartjs";function z({chartJSConfig:e,iframeRef:t,messageHandlers:n}){const r=o.useRef(null),s=t??r,[i,l]=o.useState(!1);o.useEffect((()=>{const e=()=>l(!0),t=s.current;if(t)return t.addEventListener("load",e),()=>{t.removeEventListener("load",e)}}),[s.current]);const c=o.useCallback((e=>{s.current?.contentWindow&&s.current.contentWindow.postMessage({type:"chartjs",chartJSConfig:e,isDarkTheme:"light"===!Z.default.theme.paletteName,backgroundColor:Z.default.theme.colors.gray0},D)}),[s]);return o.useEffect((()=>{i&&c(e)}),[i,e]),o.useEffect((()=>{const e=e=>{if(!i)return;const t=s.current?.contentWindow?.frames[0];if(e.source!==t)return;let o={};try{const t=String(e.data);if(o=JSON.parse(t),!o)return}catch{return}if(n&&n[o.type]){(0,n[o.type])(o)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[n,s,i]),o.createElement(a.Z,{style:A.container},o.createElement("iframe",{ref:s,sandbox:"allow-scripts allow-same-origin",src:D,style:A.iframe,title:"chartjs"}))}const A=Z.default.create((e=>({container:{flex:1},iframe:{width:"100%",flex:1,border:"none"}}))),U=B().g49741e8,F=B().b0a889d4,O=B().a111fb48,W=B().bccc65f0;function K({chartJSConfig:e}){const[t,n]=o.useState(!1),[r,s]=o.useState(!1),[i,l]=o.useState(null),[c,d]=o.useState(null),m=o.useRef(null),[u,p]=o.useState(!1),g=o.useCallback((()=>{p(!u)}),[u]),h=o.useMemo((()=>({on_load:()=>{n(!0)},chart_image:e=>{l(e.image??null),s(!1)},chart_csv:e=>{d(e.csv??null)},on_fail:()=>{s(!0),n(!0)},on_unload:()=>{n(!1)}})),[]),y=o.useCallback((()=>{if(i){const e=document.createElement("a");e.href=i,e.download="chart.png",e.click()}}),[i]),f=o.useCallback((()=>{if(c){const e=document.createElement("a");e.href=`data:text/plain;charset=utf-8,${encodeURIComponent(c)}`,e.download="chart.csv",e.click()}}),[c]),k=o.useMemo((()=>[{actionText:F,onClick:y,Icon:H.default},{actionText:O,onClick:f,Icon:L.default}]),[y,f]);return e?o.createElement(a.Z,{style:N.container},r?o.createElement(a.Z,{style:N.failedContainer}):o.createElement(a.Z,{style:[N.chartContainer,t?void 0:{opacity:0}]},o.createElement(a.Z,{style:N.chartIframe},o.createElement(z,{chartJSConfig:e,iframeRef:m,messageHandlers:h})),o.createElement(a.Z,{style:N.divider}),o.createElement(a.Z,{style:N.menuContainer},o.createElement(_.ZP,{style:N.disclaimerText},W),o.createElement(o.Fragment,null,o.createElement(R.ZP,{"aria-label":U,backgroundColor:"gray50",borderColor:"transparent",fontWeight:"normal",hoverLabel:{label:U},icon:o.createElement($.default,null),onPress:g,size:"small"},U),u&&o.createElement(P.default,{isFixed:!0,onDismiss:g},k.map((e=>o.createElement(T.Z,(0,I.Z)({},e,{key:e.actionText}))))))))):null}const N=Z.default.create((e=>({container:{flex:1,borderRadius:e.spaces.space24,borderStyle:"solid",borderWidth:1,borderColor:e.colors.gray200,backgroundColor:e.colors.gray0,marginBottom:e.spaces.space16,overflow:"hidden",height:500,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},failedContainer:{},chartContainer:{flex:1},chartIframe:{flex:1,padding:e.spaces.space16},divider:{height:1,width:"100%",backgroundColor:e.colors.gray200},menuContainer:{padding:e.spaces.space16,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},disclaimerText:{color:e.colors.gray700,fontSize:e.fontSizes.subtext1}})));var j=n(67369),G=n(65469),J=n(988290);function V({token:e}){const t=(0,j.Zz)(),{isGrokDrawer:n,isGrokShare:r}=(0,J.ZP)(),{disableCodeBlockStickyHeader:s}=o.useContext(S.$);return"chartjs"===e.lang?o.createElement(K,{chartJSConfig:e.text}):o.createElement(a.Z,{style:q.codeContainer},o.createElement(G.Z,{code:e.text,headerBarStyle:s?void 0:n||r||t?q.drawerStickyContainer:q.stickyContainer,language:e.lang,style:q.codeBlock}))}const q=Z.default.create((e=>({stickyContainer:{position:"sticky",top:`calc(${e.componentDimensions.appBarHeight} - ${e.spaces.space2})`,zIndex:e.componentZIndices.appBarZIndex-1},drawerStickyContainer:{position:"sticky",top:`calc(-${e.spaces.space2})`,zIndex:e.componentZIndices.appBarZIndex-1},codeContainer:{maxWidth:"100%",paddingVertical:"0.2em",marginBottom:"1em",display:"block",width:"100%"},codeBlock:{display:"block",width:"100%"}})));function Y({token:e}){const{isAnimated:t}=o.useContext(S.$),n=o.useMemo((()=>[X.codeSpan,t?X.animation:null]),[t]);return o.createElement(_.ZP,{style:n},e.text)}const X=Z.default.create((e=>({codeSpan:{display:"inline",fontWeight:e.fontWeights.regular,fontFamily:"monospace",fontSize:"90%",color:Z.default.isDarkMode()?"rgb(247, 170, 125)":"rgb(158, 63, 0)",paddingTop:e.spaces.space1,paddingBottom:e.spaces.space1,paddingStart:e.spaces.space4,paddingEnd:e.spaces.space4,borderRadius:e.borderRadii.small,backgroundColor:Z.default.isDarkMode()?"rgba(219, 133, 87, 0.2)":"rgba(206, 96, 28, 0.1)"},animation:{animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationFillMode:"both"}})));var Q=n(33474);function ee(){return o.createElement("hr",{style:te.horizontalRule})}const te=Z.default.create((e=>({horizontalRule:{marginTop:"3em",marginBottom:"3em",marginStart:0,marginEnd:0,borderColor:e.colors.gray300}})));var ne=n(342430),oe=n(230606),re=n(488684);function ae({token:e}){const t=e.handle?`/${e.handle}`:void 0;return o.createElement(re.Z,{screenName:e.handle||""},o.createElement(_.ZP,{link:t},e.text))}const se={level:0},ie=o.createContext(se);function le({token:e}){const{level:t}=o.useContext(ie),n=[];e.items?.length&&e.items.forEach(((e,r)=>{n.push(o.createElement(ie.Provider,{key:`li-${r.toString()}`,value:{level:t+1}},o.createElement(ce,{isFirst:0===r,item:e,level:t})))}));const r=o.useMemo((()=>[{...de.list,...de.level1},{...de.list,...de.level2},{...de.list,...de.level3}][t]??{...de.list,...de.level4}),[t]);return e.ordered?o.createElement(ie.Provider,{value:{level:t+1}},o.createElement("ol",{dir:e.direction,start:e.start,style:r},n)):o.createElement(ie.Provider,{value:{level:t+1}},o.createElement("ul",{dir:e.direction,style:r},n))}const ce=({isFirst:e,item:t,level:n})=>{const r=[];t.tokens?.length&&t.tokens.forEach(((e,t)=>{r.push(o.createElement(Ge,{key:`token-${t}`,token:e}))}));const a=o.useMemo((()=>({marginTop:"0.5em",...e?{marginTop:0}:{}})),[e]);return o.createElement("li",{style:{...de.listItem,...a}},r)},de=Z.default.create((e=>({list:{display:"block",paddingInlineStart:"2em",listStyleType:"disc"},level1:{marginBlockStart:0,marginBlockEnd:"1.25em"},level2:{marginBlockStart:"0.75em",marginBlockEnd:"0.75em"},level3:{marginBlockStart:"0.75em",marginBlockEnd:"0.75em"},level4:{marginBlockStart:"0.75em",marginBlockEnd:"0.75em"},listItem:{fontFamily:e.fontFamilies.normal,marginTop:"0.5em"},firstListItem:{marginTop:0}})));var me=n(948467);function ue({children:e,isRootLevel:t,style:n,token:r}){return o.createElement(l.P,{direction:r.direction},o.createElement(_.ZP,{style:[t&&pe.paragraph,n]},o.createElement(me.Z,{token:r},e)))}const pe=Z.default.create((e=>({paragraph:{display:"block",marginBottom:"0.5em"}})));function ge({children:e,isRootLevel:t,token:n}){return o.createElement(a.Z,{style:he.container},o.createElement(_.ZP,{style:he.quoteText},e))}const he=Z.default.create((e=>({container:{borderStartWidth:e.borderWidths.large,borderColor:e.colors.gray100,paddingStart:"1em",paddingVertical:e.spaces.space4,marginVertical:"0.5em"},quoteText:{fontStyle:"italic"}})));var ye=n(654917),fe=n(983650),ke=n(340690);function be({token:e}){const{cardAttachments:t,isAborted:n,isAnimated:r,isStreaming:a,messageId:s}=o.useContext(S.$),i=(0,ye.eX)(),l=o.useMemo((()=>(t||[]).find((t=>t.id===e.id))||null),[t,e.id]),c=o.useMemo((()=>{const e=[];return(t||[]).forEach((t=>{"image_generation_card"===t.cardType&&e.push(t)})),e}),[t]);return"image_generation_card"===e.contentType?o.createElement(ke.Z,{cardAttachments:c,isAborted:n,isStreaming:a,messageId:s}):l?o.createElement(fe.Z,{cardAttachment:l,conversationKey:i,isAnimated:r,isInline:!0}):null}var Ce=n(5741);function xe({token:e}){const t=e.header?o.createElement("tr",{style:Ee.tableRow},e.header?.map(((e,t)=>o.createElement("th",{style:Ee.tableHeaderCell},o.createElement(a.Z,{style:Ee.cellContent},e.tokens?.map(((e,n)=>o.createElement(Ge,{key:`th-${t}-${n}`,token:e})))))))):null,n=e.rows?e.rows?.map(((e,t)=>o.createElement("tr",{style:Ee.tableRow},e.map(((e,n)=>o.createElement("td",{style:Ee.tableCell},o.createElement(a.Z,{style:Ee.cellContent},e.tokens?.map(((e,r)=>o.createElement(Ge,{key:`td-${t}-${n}-${r}`,token:e})))))))))):null;return o.createElement(a.Z,{style:Ee.tableContainer},o.createElement("table",{style:Ee.table},t,n))}const Ee=Z.default.create((e=>({tableContainer:{paddingBottom:e.spaces.space16,width:"100%",overflowX:"auto"},table:{borderStyle:"solid",borderColor:e.colors.gray200,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.medium,borderCollapse:"collapse"},tableRow:{borderStyle:"solid",borderColor:e.colors.gray200,borderWidth:e.borderWidths.small,borderCollapse:"collapse"},tableHeaderCell:{borderStyle:"solid",borderColor:e.colors.gray200,borderWidth:e.borderWidths.small,borderCollapse:"collapse",fontWeight:e.fontWeights.bold,backgroundColor:e.colors.gray50},tableCell:{borderStyle:"solid",borderColor:e.colors.gray200,borderWidth:e.borderWidths.small,borderCollapse:"collapse",paddingHorizontal:e.spaces.space4,paddingVertical:e.spaces.space2},cellContent:{paddingVertical:e.spaces.space8,paddingHorizontal:e.spaces.space12,display:"block"}})));n(543673),n(240753),n(128399);var ve=n(530732),we=n(908629),Se=n(815858),_e=n(818199),Ze=n(992942),Ie=n(58399),Re=n(630715),Pe=n(323265),Te=n(301758),Me=n(725516),Be=n(125363),He=n(836255),Le=n(916559),$e=n(520595),De=n(809311);const ze=B().db6c20cf,Ae=B().a4cfb8a8,Ue=[C.ky.CodeExecution],Fe=[C.ky.BrowsePage];function Oe({token:e}){const{isCompactLayout:t,isGrokDrawer:n}=(0,J.ZP)(),[r,s]=o.useState(!1),[i,l]=o.useState(!1),[c,d]=o.useState(!1),m=n||t?2:4,{toolUsageCardResults:u}=o.useContext(S.$),p=u?.find((t=>t.toolUsageCardId===e.toolUsageCard?.id)),g=o.useMemo((()=>p?.webResults||[]),[p]),h=g.slice(0,m),y=o.useMemo((()=>p?.xPostIds||[]),[p]),f=y.slice(0,m),k=g.length>0||y.length>0,b=Fe.includes(e.toolUsageCard?.name),x=o.useCallback((()=>{if(!e.toolUsageCard)return o.createElement(_.ZP,{style:Ne.toolHeader,weight:"bold"},C.eC);if(e.toolUsageCard.name===C.ky.BrowsePage&&e.toolUsageCard.args.url){const t=e.toolUsageCard.args.url;let n=t||"";try{n=new URL(n).hostname.replace("www.","")}catch(e){}return o.createElement(_.ZP,{style:Ne.toolHeader,weight:"bold"},Ae," ",o.createElement(_.ZP,{link:t,style:Ne.toolHeader,underlineWeight:"normal",weight:"normal",withUnderline:!0},n))}return o.createElement(_.ZP,{style:Ne.toolHeader,weight:"bold"},(0,C.j)(e.toolUsageCard))}),[e.toolUsageCard]),E=o.useCallback((()=>Ue.includes(e.toolUsageCard?.name)?o.createElement(ve.Z,{onPress:()=>s(!r),style:Ne.headerContainer,withoutInteractiveStyles:!0},(({isHovered:t})=>o.createElement(o.Fragment,null,o.createElement(a.Z,{style:Ne.headerIconContainer},o.createElement(we.Z,{show:t},o.createElement(Ie.default,{style:[Ne.headerIcon,Ne.chevronIcon,r&&Ne.openChevronIcon]})),o.createElement(we.Z,{show:!t},o.createElement(a.Z,{style:Ne.headerIcon},(0,C.w$)(e.toolUsageCard?.name||"")))),o.createElement(_.ZP,{style:[Ne.toolHeader,t&&Ne.toolHeaderHovered],weight:"bold"},x())))):o.createElement(a.Z,{style:Ne.headerContainer},o.createElement(a.Z,{style:Ne.headerIconContainer},o.createElement(a.Z,{style:Ne.headerIcon},(0,C.w$)(e.toolUsageCard?.name||""))),x())),[x,e.toolUsageCard?.name,r]),v=o.useCallback((()=>{if(e.toolUsageCard?.name!==C.ky.CodeExecution)return null;const t=e.toolUsageCard?.args?.code||JSON.stringify(e.toolUsageCard?.args||{},null,2);return o.createElement(Se.Z,{childrenOuterStyle:Ne.codeBlockOuterContainer,show:r,type:"slide"},o.createElement(a.Z,{style:Ne.codeBlockContainer},o.createElement(G.Z,{code:t,language:e.toolUsageCard?.args?.language})))}),[e.toolUsageCard,r]),w=o.useCallback((()=>!k||b||0===h.length?null:o.createElement(a.Z,{style:Ne.toolResultsContainer},o.createElement(a.Z,{style:Ne.toolResultPills},h.map(((e,t)=>o.createElement(We,{key:`${e.url}-${t}`,webResult:e}))),g.length>m&&o.createElement(ve.Z,{onPress:()=>l(!0),style:Ne.seeMoreButton,withoutInteractiveStyles:!0},(({isHovered:e})=>o.createElement(_.ZP,{style:[Ne.seeMoreText,e&&Ne.seeMoreTextHovered],weight:"normal"},ze({count:g.length}))))))),[k,b,h,g,m,l]),Z=o.useCallback((()=>!k||b||0===f.length?null:o.createElement(a.Z,{style:Ne.toolResultsContainer},o.createElement(a.Z,{style:Ne.toolResultPills},f.map(((e,t)=>o.createElement(Ke,{key:`${e}-${t}`,xPostId:e}))),y.length>m&&o.createElement(ve.Z,{onPress:()=>d(!0),style:Ne.seeMoreButton,withoutInteractiveStyles:!0},(({isHovered:e})=>o.createElement(_.ZP,{style:[Ne.seeMoreText,e&&Ne.seeMoreTextHovered],weight:"normal"},ze({count:y.length}))))))),[k,b,f,y,m,d]);return o.createElement(a.Z,{style:Ne.container},E(),w(),Z(),v(),i?o.createElement(Le.E,{onDrawerDismiss:()=>l(!1),paginationOptions:{numResultsPerPage:25},webResults:g}):null,c?o.createElement($e.a,{onDrawerDismiss:()=>d(!1),paginationOptions:{numResultsPerPage:25},postIds:y}):null)}const We=o.memo((({webResult:e})=>{const t=(0,Me.z)(),[n,r]=o.useState(!1),s=e.favicon_base64||e.favicon,i=o.useCallback((()=>o.createElement(a.Z,{style:Ne.hoverCardContainer},o.createElement(De.p,{item:e}))),[e]);return o.createElement(_e.Z,{renderContent:i},o.createElement(R.ZP,{backgroundColor:"gray100",borderColor:"gray200",onPress:()=>{window.open(e.url,"_blank"),t.scribe({component:"tool-usage-card-web-result-click",action:"click",element:e.url})},size:"small",style:Ne.toolResultPill},o.createElement(a.Z,{style:Ne.toolResultPillContent},s&&!n?o.createElement(Ze.Z,{onError:()=>r(!0),source:s,style:Ne.toolResultPillImage}):o.createElement(Re.default,{style:Ne.linkIcon}),o.createElement(a.Z,null,o.createElement(_.ZP,{numberOfLines:1,style:Ne.toolResultPillText,weight:"normal"},new URL(e.url).hostname.replace("www.",""))))))})),Ke=o.memo((({xPostId:e})=>{const t=(0,Me.z)(),n=o.useMemo((()=>He.Z.createHydratorForTweet(e)),[e]),r=o.useCallback((()=>o.createElement(a.Z,{style:Ne.hoverCardContainer},o.createElement(Te.Z,{isCondensed:!0,onPress:n=>{t.scribe({component:"tool-usage-card-x-post-click",action:"click",element:e}),Pe.ZP.isTwitterApp()},tweetId:e,withBirdwatchPivot:!1,withLink:!0,withUserHoverCard:!1}))),[e,t]),s=(0,Be.v9)(n);return s?o.createElement(_e.Z,{renderContent:r},o.createElement(R.ZP,{backgroundColor:"gray100",borderColor:"gray200",onPress:()=>{window.open(s.permalink,"_blank"),t.scribe({component:"tool-usage-card-x-post-click",action:"click",element:e})},size:"small",style:Ne.toolResultPill},o.createElement(a.Z,{style:Ne.toolResultPillContent},o.createElement(Ze.Z,{source:{uri:s.user.profile_image_url_https},style:Ne.toolResultPillImage}),o.createElement(a.Z,null,o.createElement(_.ZP,{numberOfLines:1,style:Ne.toolResultPillText,weight:"normal"},`@${s.user.screen_name}`))))):null})),Ne=Z.default.create((e=>({container:{width:"100%",flex:1,flexDirection:"column",overflow:"hidden",borderRadius:e.spaces.space16,borderStyle:"solid",borderWidth:1,borderColor:e.colors.gray200,padding:e.spaces.space8,backgroundColor:e.colors.gray50,animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both",marginVertical:e.spaces.space4,marginTop:e.spaces.space8},headerContainer:{flexDirection:"row",gap:e.spaces.space8},headerIconContainer:{position:"relative",width:e.spaces.space16,height:e.spaces.space16},headerIcon:{position:"absolute",width:"100%",height:"100%",top:3,start:0,display:"flex",alignItems:"center",justifyContent:"center"},toolHeader:{transition:"color 0.2s ease",fontFamily:"monospace",fontSize:e.fontSizes.subtext2,color:e.colors.gray1000},toolHeaderHovered:{color:e.colors.gray800},chevronIcon:{width:e.spaces.space16,height:e.spaces.space16,transform:[{rotate:"0deg"}],transition:"transform 0.2s ease",color:e.colors.gray900},openChevronIcon:{transform:[{rotate:"90deg"}]},toolResultsContainer:{display:"flex",flexDirection:"column",gap:e.spaces.space4,paddingHorizontal:e.spaces.space24,marginTop:e.spaces.space8,marginBottom:e.spaces.space4},toolResultsSubheader:{color:e.colors.gray800,fontSize:e.fontSizes.subtext2,marginTop:e.spaces.space4},toolResultPills:{display:"flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space8,flexWrap:"wrap",width:"100%",animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},toolResultPill:{paddingStart:e.spaces.space8,paddingEnd:e.spaces.space8,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},toolResultPillContent:{display:"flex",flexDirection:"row",gap:e.spaces.space4,alignItems:"center",justifyContent:"center"},toolResultPillImage:{width:e.spaces.space12,height:e.spaces.space12,borderRadius:e.borderRadii.infinite},linkIcon:{width:e.spaces.space12,height:e.spaces.space12,color:e.colors.gray900},toolResultPillText:{fontSize:e.fontSizes.subtext2,color:e.colors.gray900},xPosts:{display:"flex",flex:1,width:"100%",animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease",animationFillMode:"both"},seeMoreButton:{display:"flex",width:"max-content"},seeMoreText:{color:e.colors.gray700,transition:"color 0.2s ease",fontSize:e.fontSizes.subtext2},seeMoreTextHovered:{color:e.colors.gray1000},codeBlockOuterContainer:{width:"100%",marginTop:e.spaces.space8,paddingHorizontal:e.spaces.space24},codeBlockContainer:{maxWidth:"100%"},hoverCardContainer:{width:350,maxWidth:"100%",pointerEvents:"none"}}))),je=o.memo((({isLast:e,isRootLevel:t,token:n})=>{const{allowedTokenTypes:r,textStyle:a}=o.useContext(S.$),s=o.useMemo((()=>{const e=[];return n.tokens?.length&&n.tokens.forEach(((t,n)=>{const r=`${n}`;e.push(o.createElement(je,{key:r,token:t}))})),e}),[n.tokens]),i=o.createElement(ue,{isRootLevel:t,style:[Je.expandedLineHeight,e?Je.noMarginBottom:void 0,a],token:n},s);if(r&&!r.includes(n.type))return o.createElement(_.ZP,{style:[Je.expandedLineHeight,a]},n.raw);switch(n.type){case"x-handle":return o.createElement(ae,{token:n});case"code":return"indented"===n.codeBlockStyle?i:o.createElement(V,{token:n});case"codespan":return o.createElement(Y,{token:n});case"list":return o.createElement(le,{token:n});case"blockquote":return o.createElement(ge,{token:n},s);case"table":return o.createElement(xe,{token:n});case"space":return null;case"br":return o.createElement("br",null);case"hr":return o.createElement(ee,null);case"text":return o.createElement(me.Z,{token:n},s);case"link":return o.createElement(oe.Z,{token:n});case"heading":return o.createElement(Q.X,{token:n},s);case"strong":return o.createElement(_.ZP,{style:[Je.expandedLineHeight,a],weight:"bold"},o.createElement(me.Z,{token:n},s));case"em":return o.createElement(_.ZP,{style:[Je.expandedLineHeight,Je.italic,a]},o.createElement(me.Z,{token:n},s));case"emStrong":return o.createElement(_.ZP,{style:[Je.expandedLineHeight,Je.italic,a],weight:"bold"},o.createElement(me.Z,{token:n},s));case"blockLatex":return o.createElement(ne.Z,{content:n.text,isBlock:!0});case"inlineLatex":return o.createElement(ne.Z,{content:n.text});case"grokRichContent":return o.createElement(be,{token:n});case"renderChart":return o.createElement(K,{chartJSConfig:n.chartJSConfig||""});case"toolUsageCard":return o.createElement(Oe,{token:n});default:return i}}),((e,t)=>e.token.raw===t.token.raw)),Ge=je,Je=Z.default.create((e=>({italic:{fontStyle:"italic"},expandedLineHeight:{lineHeight:Ce.Y},noMarginBottom:{marginBottom:0}})));function Ve(e){return e.items&&e.items.length?Ve(e.items[0]):e.tokens&&e.tokens.length?Ve(e.tokens[0]):e.text||""}function qe(e){return e.forEach(((e,t)=>{switch(e.type){case"list":case"paragraph":case"heading":e.isFirst=0===t,e.direction=s.Z.getTextDirection(Ve(e))}})),e}r.TU.use({extensions:[w._,v.Im,...b.Z,u,g,k,y,d,E]});const Ye=[],Xe=o.memo((({allowedTokenTypes:e,cardAttachments:t,chatResponseAnnotations:n,citations:c,disableCodeBlockStickyHeader:d,disableLinks:m,isAborted:u,isAnimated:p,isStreaming:g,markdownText:h,messageId:y,style:f,textStyle:k,toolUsageCardResults:b})=>{const C=(0,i.hC)("responsive_web_grok_links")&&!p,x=o.useMemo((()=>{const e=function(e,t){if(!t)return e;t.sort(((e,t)=>e.startIndex-t.startIndex));let n=e,o=0;return t.forEach((({endIndex:e,startIndex:t})=>{const r=n.slice(t+o,e+o),a=`[${r}](https://x.com/i/grok?text=${encodeURIComponent(r)})`;n=n.slice(0,t+o)+a+n.slice(e+o),o+=a.length-(e-t)})),n}(h,C?n:void 0);return qe(r.TU.lexer(e??""))}),[h,n,C]),E=o.useMemo((()=>x.map(((e,t)=>o.createElement(Ge,{isLast:t===x.length-1,isRootLevel:!0,key:`parsedToken-${t}`,token:e})))),[x]);return o.createElement(S.Z,{allowedTokenTypes:e,cardAttachments:t,citations:c??Ye,disableCodeBlockStickyHeader:d,disableLinks:m,isAborted:u,isAnimated:p,isStreaming:g,messageId:y,textStyle:k,toolUsageCardResults:b},o.createElement(l.P,{direction:s.Z.getTextDirection(h??"")},o.createElement(a.Z,{style:[{display:"block"},f]},E)))})),Qe=Xe},33474:(e,t,n)=>{n.d(t,{X:()=>l});var o=n(202784),r=n(67369),a=n(731708),s=n(976021),i=n(948467);function l({children:e,token:t}){const n=(0,r.yu)(),l=o.useMemo((()=>{const e={display:"block"};switch(t.depth){case 1:return e.marginBottom="0.5em",{weight:"heavy",size:n?"title2":"title1",style:e};case 2:return t.isFirst||(e.marginTop="1.5em"),e.marginBottom="0.5em",{weight:"bold",size:"title4",style:e};case 3:return t.isFirst||(e.marginTop="1.5em"),e.marginBottom="0.5em",{weight:"bold",size:"headline1",style:e};default:return t.isFirst||(e.marginTop="1.5em"),e.marginBottom="0.5em",{weight:"bold",style:e}}}),[t.depth,n,t.isFirst]);return o.createElement(s.P,{direction:t.direction},o.createElement(a.ZP,l,o.createElement(i.Z,{token:t},e)))}},342430:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(202784),r=n(366929),a=n(325686),s=n(731708),i=n(392237),l=n(595080);function c({content:e,isBlock:t=!1}){const n=o.useRef(null),[i,c]=o.useState(!1),{isAnimated:m}=o.useContext(l.$);o.useLayoutEffect((()=>{if(n.current)try{n.current.innerHTML="",r.Z.render(e,n.current,{trust:!1,output:"mathml",displayMode:t,throwOnError:!0});const o=document.createElement("code");o.className="language-latex",o.innerText=e,o.style.display="none",o.className=t?"raw_katex_block":"raw_katex",n.current?.appendChild(o),c(!1)}catch{c(!0)}}),[e,t,n]);const u=o.useMemo((()=>[t?d.block:null,m?d.animation:null]),[t,m]);return i?o.createElement(s.ZP,null,e):o.createElement(a.Z,{ref:n,style:u})}const d=i.default.create((e=>({block:{flex:1,flexDirection:"row",justifyContent:"center",width:"100%",paddingTop:"0.75rem",paddingBottom:"1.75rem"},animation:{opacity:1,animationDuration:"1s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}]}})))},230606:(e,t,n)=>{n.d(t,{Z:()=>j});n(136728),n(543673),n(240753),n(128399);var o=n(202784),r=n(731708),a=n(488684),s=n(466792),i=n(392237),l=n(111677),c=n.n(l),d=n(952793),m=n(725516),u=n(125363),p=n(327597),g=n(654917),h=n(170676),y=n(595080),f=n(5741),k=n(45843),b=n(325686),C=n(530732),x=n(818199),E=n(630715),v=n(306677),w=n(725405),S=n(809311);const _="grok_citation_web_result",Z=({isGrokRenderCitationCard:e,link:t})=>{const{isAnimated:n}=o.useContext(y.$),[r,a]=o.useState(!1),[s,i]=o.useState(!1),l=(0,w.Z)(),c=o.useCallback((()=>{a(!0),l.scribe({action:"hover",component:_,data:{url:t.url}})}),[a,l,t.url]),d=o.useCallback((()=>a(!1)),[a]),m=o.useCallback((()=>{l.scribe({action:"click",component:_,data:{url:t.url}})}),[l,t.url]);let u=new URL(t.url).hostname;u.startsWith("www.")&&(u=u.slice(4));const p=o.useCallback((()=>o.createElement(I,{webResult:t})),[t]),g=t.url&&(t.title||t.snippet),h=(t.favicon_base64||t.favicon)&&!s,f=o.createElement(C.Z,{link:t.url,onMouseEnter:c,onMouseLeave:d,onPress:m,style:[R.content,h?R.faviconContainer:R.iconContainer,r?R.containerHovered:void 0],withoutInteractiveStyles:!0},h?o.createElement(k.Z,{onError:()=>i(!0),source:t.favicon_base64||t.favicon,style:R.favicon}):o.createElement(E.default,{style:R.linkIcon})),S=o.useCallback((()=>{l.scribe({action:"impression",component:_,data:{url:t.url}})}),[l,t.url]);return o.createElement("div",{className:"omit-from-copy",style:R.inlineContainer},o.createElement(v.D,{id:"grok_citation_web_result",onFullyVisible:S,position:"top",testID:"grok_citation_web_result"}),o.createElement(b.Z,{style:[R.inlineContainer,e?R.grokRenderInlineContainer:null,n?R.animation:null]},g?o.createElement(x.Z,{hoverDelay:"short",renderContent:p},f):f))},I=({webResult:e})=>o.createElement(b.Z,{style:R.hoverCardContainer},o.createElement(S.p,{item:e})),R=i.default.create((e=>({inlineContainer:{alignItems:"center",justifyContent:"center",display:"inline-flex",marginStart:e.spaces.space4,verticalAlign:"middle"},grokRenderInlineContainer:{marginStart:"unset",marginHorizontal:e.spaces.space2},animation:{animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationFillMode:"both"},content:{transition:"filter 0.3s, transform 0.3s",filter:"grayscale(100%) opacity(0.7)",position:"relative",bottom:"0.1em",overflow:"hidden",width:15,height:15,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.borderRadii.small},hoverCardContainer:{width:350,maxWidth:"100%",pointerEvents:"none"},faviconContainer:{backgroundColor:e.colors.whiteOnColor},iconContainer:{backgroundColor:e.colors.gray100},containerHovered:{filter:"none",transform:"scale(1.2)"},favicon:{width:"100%",height:"100%"},linkIcon:{color:e.colors.gray800,width:"100%",height:"100%"}})));var P=n(836255),T=n(761299),M=n(919760);const B="grok_render_multiple_citations",H=c().ee000b0d,L=({links:e})=>{const{isAnimated:t}=o.useContext(y.$),n=(0,w.Z)(),[a,s]=o.useState(!1),i=o.useCallback((()=>{s(!0),n.scribe({action:"click",component:B})}),[n]),l=o.useCallback((()=>{n.scribe({action:"impression",component:B})}),[n]),{postIds:c,webResults:d}=o.useMemo((()=>{const t=[],n=[];for(const o of e){const e=(0,M.b)(o.url);e?t.push(e):n.push(o)}return{postIds:t,webResults:n}}),[e]);return o.createElement("div",{className:"omit-from-copy",style:A.inlineContainer},o.createElement(v.D,{id:"grok_render_multiple_citations",onFullyVisible:l,position:"top",testID:"grok_render_multiple_citations"}),o.createElement(C.Z,{onPress:i,withoutInteractiveStyles:!0},(({isHovered:n})=>o.createElement(b.Z,{style:[A.sourcesPill,t?A.animation:null,n?A.sourcesPillHovered:null]},o.createElement($,{isHovered:n,links:e}),o.createElement(r.ZP,{style:A.sourcesLabel},H({numSources:e.length}))))),a&&o.createElement(T.Y,{onDrawerDismiss:()=>s(!1),postIds:c,webResults:d}))},$=({isHovered:e,limit:t=3,links:n})=>o.createElement(b.Z,{style:A.faviconsContainer},n.slice(0,t).map((t=>o.createElement(D,{isHovered:e,key:t.url,link:t})))),D=({isHovered:e,link:t})=>{const[n,r]=o.useState(!1),a=(t.favicon_base64||t.favicon)&&!n,s=(0,M.b)(t.url),i=o.useMemo((()=>s?o.createElement(z,{postId:s}):a?o.createElement(k.Z,{onError:()=>r(!0),source:t.favicon_base64||t.favicon,style:A.favicon}):o.createElement(E.default,{style:A.linkIcon})),[s,a,t.favicon_base64,t.favicon]);return o.createElement(b.Z,{style:[A.iconContainer,e?A.iconContainerHovered:null]},i)},z=({postId:e})=>{const t=o.useMemo((()=>P.Z.createHydratorForTweet(e)),[e]),n=(0,u.v9)(t),r=n?.user?.profile_image_url_https;return r?o.createElement(k.Z,{source:r,style:A.favicon}):o.createElement(E.default,{style:A.linkIcon})},A=i.default.create((e=>({inlineContainer:{alignItems:"center",justifyContent:"center",display:"inline-flex",marginHorizontal:e.spaces.space2,verticalAlign:"middle"},sourcesPill:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:e.borderRadii.infinite,paddingHorizontal:e.spaces.space8,paddingVertical:e.spaces.space2,backgroundColor:e.colors.gray0,transition:"background-color 0.2s ease-in-out"},animation:{animationDuration:"0.3s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationFillMode:"both"},sourcesPillHovered:{backgroundColor:e.colors.gray50},faviconsContainer:{display:"flex",flexDirection:"row",marginEnd:e.spacesPx.space8},iconContainer:{width:e.spaces.space12,height:e.spaces.space12,borderRadius:e.borderRadii.small,overflow:"hidden",position:"relative",marginEnd:-e.spacesPx.space4,filter:"grayscale(100%) opacity(0.7)",transition:"filter 0.3s, transform 0.3s"},iconContainerHovered:{filter:"none"},favicon:{width:"100%",height:"100%"},linkIcon:{color:e.colors.gray800,width:"100%",height:"100%"},sourcesLabel:{fontSize:e.fontSizes.subtext3,color:e.colors.gray900}}))),U={label:c().dc0c8266},F=/^https?:\/\/x\.com\/(?!home|explore|notifications|messages|bookmarks|lists|more)(\w+[-\w]*)?\/?$/,O=/https:\/\/x\.com\/.*\?text=([^&]*)/;const W=["http:","https:"],K="grok_render_citation_card_json=",N=e=>{e&&e._textRef&&e._textRef&&(e._textRef.dataset.copyPreserve="1")};function j({token:e}){const{cardAttachments:t,citations:n,textStyle:i}=o.useContext(y.$),l=(0,m.z)(),c=(0,u.I0)(),[f,k]=o.useState(!1);let b=e.href;const C=o.useMemo((()=>function(e){const t=e.match(F);return t?t[1]:void 0}(b||"")),[b]),x=o.useMemo((()=>function(e){const t=e.match(O);return t?t[1]:void 0}(b||"")),[b]),E=o.useMemo((()=>!!b&&b.startsWith(K)),[b]),v=o.useMemo((()=>{const e=[],o={};if(b&&E){const r=/grok_render_citation_card_json=([^&]*)/,a=b.match(r),s=a?a[1]:"";try{const r=JSON.parse(s).cardIds;for(const a of r){const r=t?.find((e=>e.id===a));if(r&&"citation_card"===r.cardType){const t=r.url;if(o[t])continue;o[t]=!0;const a=n.find((e=>e.url===t));e.push({url:t,favicon:a?.favicon??void 0,title:a?.title??void 0,snippet:a?.snippet??void 0})}}}catch(e){}}return e}),[E,b,t,n]),w=o.useMemo((()=>1===v.length?v[0]:n.find((e=>e.url===b))),[n,b,v]);w?.url&&(b=w.url);const S=(0,d.hC)("responsive_web_grok_show_citations"),_=(0,g.eX)(),I=o.useCallback((e=>{e.preventDefault(),x&&(l.scribe({element:"annotation_text_link",action:"click"}),c((0,p.u)({analytics:l,conversationKey:_})({text:decodeURIComponent(x),returnCitations:S})))}),[x,_,l,c,S]);if(v.length>1)return o.createElement(L,{links:v});let R;try{b&&(R=new URL(b))}catch(e){}if(!R||!W.includes(R.protocol)){let t;return t=e.text===b?e.text:!e.text&&b&&w?`(${b})`:`${e.text} ${b?`(${b})`:""}`,o.createElement(r.ZP,null,t)}const P=(0,h.TP)(e.raw)||(0,h.sN)(e.raw);if(b&&(!e.text||P)){const e=(0,M.b)(b);if(e)return o.createElement(M.h,{isGrokRenderCitationCard:E,postId:e});if(w)return o.createElement(Z,{isGrokRenderCitationCard:E,link:w})}return x?o.createElement(r.ZP,{hoverLabel:U,link:b,onClick:I,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),style:[G.expandedLineHeight,G.promptLink,f&&G.hoverStyle,i],withInteractiveStyling:!1},e.text):C?o.createElement(a.Z,{screenName:C},o.createElement(s.Z,null,(({isHovered:t})=>o.createElement(r.ZP,{link:b,style:[G.link,t&&G.hoveredLink],withInteractiveStyling:!1},e.text)))):o.createElement(s.Z,null,(({isHovered:t})=>o.createElement(r.ZP,{link:b,ref:N,style:[G.link,t&&G.hoveredLink],withInteractiveStyling:!1},e.text)))}const G=i.default.create((e=>{const t="light"===i.default.theme.paletteName?.2:.33;return{expandedLineHeight:{lineHeight:f.Y},hoverStyle:{color:e.colors.blue600,shadowColor:e.colors.blue600,animationKeyframes:[{"0%":{shadowOpacity:t,color:e.colors.gray900,shadowColor:e.colors.gray900},"100%":{color:e.colors.blue600,shadowColor:e.colors.blue600,shadowOpacity:1}}],textDecorationLine:"none",shadowOffset:{width:0,height:1},animationDuration:"0.25s",shadowOpacity:1,shadowRadius:0},promptLink:{animationKeyframes:[{"0%":{color:e.colors.text,shadowColor:"transparent"},"100%":{color:e.colors.gray900,shadowColor:e.colors.gray900,shadowOpacity:t}}],animationDuration:"2s",color:e.colors.gray900,cursor:"pointer",textDecorationLine:"none",shadowColor:e.colors.gray900,shadowOffset:{width:0,height:1},shadowOpacity:t,shadowRadius:0},link:{color:e.colors.brandColor,textDecorationLine:"underline",textDecorationColor:e.colors.gray600,animationDuration:"0.2s",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationTimingFunction:"ease-out",animationFillMode:"both"},hoveredLink:{textDecorationColor:e.colors.brandColor}}}))},948467:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(202784),r=n(731708),a=n(392237);function s(e){let t=!1,n=e.split(" ");1===n.length&&(n=e.split(""),t=!0);const o=n.map(((e,o)=>{const r=o===n.length-1;return{text:e,addSpaceAfter:!t&&!r}}));return{chunks:o,isSplitByCharacters:t}}function i(e){const t=o.useRef(null);return o.useMemo((()=>{const n=function(e,t){if(!t||!e.startsWith(t.text)){const t=s(e);return{text:e,chunks:t.chunks,isSplitByCharacters:t.isSplitByCharacters}}if(e===t.text)return t;const n=e.slice(t.text.length),o=s(e);if(o.isSplitByCharacters!==t.isSplitByCharacters)return{text:e,chunks:o.chunks,isSplitByCharacters:o.isSplitByCharacters};if(o.isSplitByCharacters){const o=n.split("").map((e=>({text:e,addSpaceAfter:!1})));return{text:e,chunks:[...t.chunks,...o],isSplitByCharacters:!0}}const r=[...t.chunks],a=e.split(" "),i=t.text.split(" ");if(a.length>i.length){r.length>0&&r.pop();const t=a.slice(i.length-1).map(((e,t)=>({text:e,addSpaceAfter:!(i.length-1+t===a.length-1)})));return{text:e,chunks:[...r,...t],isSplitByCharacters:!1}}if(a.length===i.length){const t=a.length-1;return t>=0&&r[t]&&(r[t]={text:a[t],addSpaceAfter:t<a.length-1}),{text:e,chunks:r,isSplitByCharacters:!1}}return{text:e,chunks:o.chunks,isSplitByCharacters:o.isSplitByCharacters}}(e,t.current);return t.current=n,n.chunks}),[e])}var l=n(595080),c=n(5741);const d=o.memo((({style:e,text:t})=>o.createElement(r.ZP,{style:[p.text,e]},t)));function m({children:e,token:t}){const{isAnimated:n,textStyle:a}=o.useContext(l.$);if(e.length)return o.createElement(r.ZP,null,e);const s=t.text?.replace(new RegExp("<br>","g"),"\n")??"";return n?o.createElement(u,{style:a,text:s}):o.createElement(d,{style:a,text:s})}const u=o.memo((({style:e,text:t})=>{const n=i(t).map((({addSpaceAfter:t,text:n},a)=>o.createElement(r.ZP,{key:`markdown_${a}`,style:[p.text,p.animation,e]},n,t?" ":void 0)));return o.createElement(o.Fragment,null,n)}),((e,t)=>e.text===t.text)),p=a.default.create((e=>({text:{lineHeight:c.Y},animation:{animationDuration:"0.5s",transitionTimingFunction:"ease-out",animationKeyframes:[{"0%":{opacity:0},"100%":{opacity:1}}],animationFillMode:"both"}})))},5741:(e,t,n)=>{n.d(t,{Y:()=>o});const o="1.75"},978921:(e,t,n)=>{n.d(t,{Z:()=>d});const o=(e,t,n,o,r)=>({name:e,level:"inline",start(e){let n=0;for(;n<e.length;){if(n=e.indexOf(o,n),-1===n)return;if(0===n||[" ","(","\n"].includes(e.charAt(n-1))){if(e.substring(n).match(t))return n}n+=o.length}},tokenizer(e){const n=e.match(t);if(n){const e=n[1].trim();if(/^[A-Za-z]$/.test(e)||/^\d+(,\d+)*(\.\d+)?$/.test(e))return;return e.includes("\\")||/[\+\-\*\/=^_<>\\]/.test(e)?{type:r?"blockLatex":"inlineLatex",raw:n[0],text:e}:void 0}}}),r=o("inlineDollar",/^\$([^$\n]+?)\$(?=[\s?!.,:？！。，：)]|$)/,0,"$",!1),a=o("inlineDollarBlock",/^\$\$([\s\S]*?)\$\$/,0,"$$",!0),s=o("inlineParen",/^\\\((.*?)\\\)/,0,"\\(",!1),i=o("inlineBracket",/^\\\[([\s\S]*?)\\\]/,0,"\\[",!0),l=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/,c=/^\\\[(\s*)((?:\\[^]|[^\\])+?)(\s*)\\](?:\n|$)/,d=[r,a,s,i,{name:"blockLatex",level:"block",tokenizer(e){const t=e.match(l),n=e.match(c),o=t??n??null;if(o)return{type:"blockLatex",raw:o[0],text:o[2].trim()}}}]},170676:(e,t,n)=>{n.d(t,{Im:()=>l,TP:()=>s,sN:()=>i});const o=/^[a-zA-Z0-9]$/;const r=/^\(\[([^\]]+)\]\((https?:\/\/[^\s)]+|www\.[^\s)]+)\)\)/,a=/^\((https?:\/\/[^\s)]+|www\.[^\s)]+)\)/;function s(e){return r.test(e)}function i(e){return a.test(e)}const l={name:"link",level:"inline",start:e=>e.indexOf("("),tokenizer(e,t){if(t?.length){const e=t[t.length-1];if("text"===e.type&&e.text){const t=e.text[e.text.length-1];if(n=t,o.test(n))return}}var n;const s=r.exec(e);if(s)return{type:"link",raw:s[0],text:s[1],href:s[2]};const i=a.exec(e);return i?{type:"link",raw:i[0],text:i[0],href:i[1]}:void 0}}},122670:(e,t,n)=>{n.d(t,{_:()=>r});const o=/^[a-zA-Z0-9]$/;const r={name:"x-handle",level:"inline",start:e=>e.indexOf("@"),tokenizer(e,t){if(t?.length){const e=t[t.length-1];if("text"===e.type&&e.text&&(n=e.text[e.text.length-1],o.test(n)))return}var n;const r=/^@(\w{1,15})\b/.exec(e);if(r)return{type:"x-handle",raw:r[0],text:r[0],handle:r[1]}}}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.Grok~loader.Markdown-63cb1cc4.186b8c3a.js.map