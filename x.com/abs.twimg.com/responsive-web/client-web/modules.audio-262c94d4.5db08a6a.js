"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["modules.audio-262c94d4"],{701814:(e,t,a)=>{a.r(t),a.d(t,{AudioSpaceAnalytics:()=>F,default:()=>I});var n=a(202784),c=a(668260),s=a(420740),r=a(370006),o=a(138099),l=a(786998),i=a(392237),d=a(111677),u=a.n(d),p=a(323265),m=a(982790),h=a(58255),g=a(713596),b=a(325686),f=a(738545),y=a(794215),E=a(755988);const S=(e,t,a)=>{const{label:c,popover:s}=C[e];let r;return r=e===v.Duration?w(t):Z(e,t),r?n.createElement(f.ZP,{key:e,label:c,popover:s,size:a,value:r}):null},Z=(e,t)=>{const{space:a,utils:n}=t,c=a?.is_space_available_for_replay,s=a?.total_live_listeners,r=a?.total_replay_watched;let o;switch(e){case v.Cohosts:o=a?.cohosts.length;break;case v.LiveListeners:o=c?s:void 0;break;case v.RecordingReplays:o=c?r:void 0;break;case v.Speakers:o=a?.participants?.speakers.length;break;case v.TunedIn:o=n.getTunedInCount();break;default:o=void 0}return o?.toString()||null},w=e=>{const{space:t}=e,a=t?.ended_at,c=t?.started_at;if(!a||!c)return null;const s=a-c;return n.createElement(y.Z,{narrow:!0,timeMs:s})},v=Object.freeze({Cohosts:"Cohosts",Duration:"Duration",LiveListeners:"LiveListeners",RecordingReplays:"RecordingReplays",Speakers:"Speakers",TunedIn:"TunedIn"}),_=[v.LiveListeners,v.RecordingReplays,v.Cohosts,v.Speakers,v.Duration],C={[v.Cohosts]:{label:u().i2caef48},[v.Duration]:{label:u().d9d6e10e},[v.LiveListeners]:{label:u().fcb205da},[v.RecordingReplays]:{label:u().jb088200},[v.Speakers]:{label:u().j245c654},[v.TunedIn]:{label:u().if65328a}},k=i.default.create((e=>({cardContainer:{marginTop:e.spaces.space12},container:{paddingHorizontal:e.spaces.space16},grid:{display:"grid",marginBottom:e.spaces.space40,gridTemplateColumns:"1fr",gridGap:i.default.theme.spaces.space40,marginTop:i.default.theme.spaces.space40,marginHorizontal:i.default.theme.spaces.space32},minorDataPointsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:i.default.theme.spaces.space40}}))),T=function(e){const t=(0,g.z)(e.match),a=(0,m.$)(t);return n.createElement(n.Fragment,null,n.createElement(b.Z,{style:k.container},n.createElement(b.Z,{style:k.cardContainer},n.createElement(E.Z,{audioSpaceId:t,isInteractive:!1,withoutButton:!0}))),n.createElement(b.Z,{style:k.grid},S(v.TunedIn,a,"title1"),n.createElement(b.Z,{style:k.minorDataPointsGrid},_.map((e=>S(e,a,"title3"))))))};function F(e){const[t,a]=n.useState(void 0),i=(0,g.z)(e.match),{utils:d}=(0,m.$)(i),u=d.state()===c.default.StateEnum.unavailable;n.useEffect((()=>{h.w.proxsee.login().then((()=>{a(!0)})).catch((()=>{a(!1)}))}),[]);const b=()=>e.history.goBackThroughModals(),f=n.createElement(r.Z,{backButtonType:"close",onClick:b});return void 0!==d.state()&&void 0!==t?n.createElement(o.Z,{allowBackNavigation:!0,enableMaskForDismiss:!0,onMaskClick:b,role:"menu",type:"full",withKeyboardNavigation:!0,withMask:!0},!p.ZP.isTwitterApp()&&n.createElement(l.Z,{leftControl:f,style:x.appBar,title:B.title,withGutter:!0}),!1===t?n.createElement(s.Z,{onRetry:null,title:B.wrongUser}):u?n.createElement(s.Z,{onRetry:null,title:B.genericError}):n.createElement(T,e)):null}const B={title:u().g7e3d2a4,wrongUser:u().abebdfae,genericError:u().ef4602ec},x=i.default.create((e=>({appBar:{paddingVertical:e.spaces.space8},closeIcon:{width:e.spaces.space20,height:e.spaces.space20}}))),I=F},409006:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(202784),c=a(325686),s=a(103165),r=a(392237),o=a(111677),l=a.n(o),i=a(718e3),d=a(252021),u=a(642252),p=a(713596);function m(e){return n.createElement(u.Y,e,n.createElement(h,e))}function h(e){const t=f.title;return n.createElement(n.Fragment,null,n.createElement(d.Z,{backLocation:"/",history:e.history,primaryContent:n.createElement(g,e),sidebarContent:n.createElement(i.Z,null),title:t}))}function g(e){const t=(0,p.z)(e.match);return n.createElement(c.Z,{style:b.container},n.createElement(c.Z,{style:b.cardContainer},n.createElement(s.Z,{audioSpaceId:t,withDirectJoin:!0})))}const b=r.default.create((e=>({container:{paddingHorizontal:e.spaces.space16},cardContainer:{marginTop:e.spaces.space12}}))),f={title:l().ab4fc8bc}},193487:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(807896),c=a(202784),s=a(642252),r=a(201899),o=a(713596);function l(e){return c.createElement(s.Y,e,c.createElement(i,e))}function i(e){const t=(0,o.z)(e.match);return c.createElement(r.d,(0,n.Z)({},e,{broadcastId:t}))}},548583:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(202784),c=a(818885),s=a(713596);function r(e){const t=(0,s.z)(e.match);return n.createElement(c.Z,{audioSpaceId:t})}},642252:(e,t,a)=>{a.d(t,{Y:()=>_});var n=a(202784),c=a(58255),s=a(293115),r=a(503229),o=a(176340),l=a(668214),i=a(713596);const d=(e,t)=>(0,i.z)(t.match),u=e=>(t,a,{api:n})=>n.withEndpoint(o.Z).byId(e,{isMetatagsQuery:!0}),p=(0,l.Z)().propsFromState((()=>({broadcastId:d}))).propsFromActions((()=>({fetchAudioSpace:u})));var m=a(272175),h=a(279046),g=a(668260),b=a(688715),f=a(111677),y=a.n(f),E=a(572067);function S(e){const t=e.space;if(!t)return null;const a=function(e){const{canonical:t,description:a,title:n,ttl:c}=function(e){const t=e?.host?.display_name,a=t?Z.hostSpace({name:t}):Z.hostSpaceFallback,n=e.title||a,c=Z.descriptionGeneric,s=e?.participants.total||0,r=h.Z.formatCountShort(s),o=Z.descriptionListening({count:r});let l,i,d;if(e.state===g.default.SpaceState.Running)l=Z.titleRunning({spaceTitle:n}),i=Z.descriptionFormatRunning({hostSpace:a,descriptionListening:o,descriptionGeneric:c}),d=w.ttl.Frequent;else if(e.state===g.default.SpaceState.NotStarted||e.state===g.default.SpaceState.PrePublished){const e=Z.scheduledSpaceGeneric;l=Z.titleScheduled({date:e,spaceTitle:n}),i=Z.descriptionFormatScheduled({hostSpace:a,descriptionGeneric:c}),d=w.ttl.Frequent}else e.state!==g.default.SpaceState.Ended&&e.state!==g.default.SpaceState.TimedOut||!e.is_space_available_for_replay?(l=Z.titleEnded({spaceTitle:n}),i=Z.descriptionFormatEnded({hostSpace:a,descriptionGeneric:c}),d=w.ttl.LongLivedCache):(l=Z.titleRecording({spaceTitle:n}),i=Z.descriptionFormatEnded({hostSpace:a,descriptionGeneric:c}),d=w.ttl.LongLivedCache);const u=(0,b.ju)(`https://x.com/i/spaces/${e.rest_id}`);return{title:l,canonical:u,description:i,ttl:d}}(e);return{type:"website",canonical:t,title:n,description:a,image:w.image.url,imageType:w.image.type,imageW:w.image.width,imageH:w.image.height,imageAlt:w.image.alt,ttl:c}}(t);return n.createElement(n.Fragment,null,n.createElement(E.Z,a),n.createElement(m.ql,{prioritizeSeoTags:!0},n.createElement("title",null,a.title),n.createElement("meta",{content:a.title,name:"title"}),n.createElement("meta",{content:a.description,name:"description"})))}const Z={twitterSpaces:y().ded416b0,hostSpace:y().cfbea177,hostSpaceFallback:y().ab4fc8bc,descriptionGeneric:y().fec3c1e0,descriptionListeners:y().ce447fcb,descriptionListening:y().ef7da97f,scheduledSpaceGeneric:y().f8464692,titleRunning:y().a065e7e7,titleScheduled:y().hd5e7b21,titleEnded:y().f651e375,titleRecording:y().i8478ae7,descriptionFormatRunning:y().b2a94e93,descriptionFormatScheduled:y().f6432ce5,descriptionFormatEnded:y().f6432ce5},w={ttl:{Frequent:300,LongLivedCache:86400},image:{type:"image/jpeg",url:"https://abs.twimg.com/sticky/cards/TwitterSpacesCardImage.3.jpg",width:1200,height:630,alt:Z.twitterSpaces}};class v extends n.Component{constructor(...e){super(...e),this.state={space:null},this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.props.fetchAudioSpace(this.props.broadcastId).catch((()=>null)).then((e=>{this.mounted&&e&&this.setState({space:e})}))}render(){return n.createElement(s.nO,{namespace:k},n.createElement(n.Fragment,null,n.createElement(C,this.props),n.createElement(S,{space:this.state.space})))}}const _=p((0,r.Z)(v));function C(e){return n.useEffect((function(){c.w.initialized()&&c.w.proxsee.login()}),[]),e.children}const k={page:"audiospace"}},52340:(e,t,a)=>{a.d(t,{Bd:()=>T,D9:()=>y,Ex:()=>w,WJ:()=>S,Wy:()=>C,aZ:()=>Z,sD:()=>k});a(571372);var n=a(565058),c=a(111677),s=a.n(c),r=a(176340),o=a(741810),l=a(420182),i=a(536387),d=a(660812),u=a(563781),p=a(349745),m=a(582129),h=a(712612),g=a(261703),b=a(632960),f=a(865698);const y=(0,d.R)((async(e,t,a)=>{const{addToast:n,communityId:c,conversationControls:s,isSuperFollowersOnly:r,narrowCastType:i,onClose:d,options:u,title:p}=a;if(!t(h.F3))throw d(),new Error("Failed to request audio stream");const g=await t(m.QJ,{addToast:n,conversationControls:s,isSuperFollowersOnly:r,onClose:d,options:u,title:p});if(!g||i===f.g.EMPLOYEES)return;const{dispatch:y}=e(l.qc),E=await y(b.lW({broadcast:!!c,conversationControlsValue:i===f.g.SUBSCRIBERS?"subscribers":"all",communityIdValue:c,composeSemanticCoreId:c?`8.31.${c}`:void 0,excludedRecipients:[],exclusivityControlValue:void 0,disallowedReplyControls:[],sendData:[{key:g,isEmpty:!1,isValid:!0,media:[],mediaTags:[],pollActive:!1,pollValid:!1,text:`${p} https://x.com/i/spaces/${g}`}]}));if(E[0]?.id_str){const e=E[0].id_str;o.E.associateTweetWithBroadcast({broadcast_id:g,tweet_id:e,tweet_external:!1})}})),E=(0,i.K9)(((e,t)=>o.E.getScheduledSpaces().then((e=>e?.broadcasts&&0!==e.broadcasts?.length?(e.broadcasts.sort(((e,t)=>new Date(e.broadcast.scheduled_start||0)>new Date(t.broadcast.scheduled_start||0)?1:-1)),e.broadcasts):[])))),S=(0,n.cn)(null,((e,t)=>t(E))),Z=(0,u.O)((e=>{const t=e(E.resolved);return t?[...t]:[]})),w=(0,n.cn)(null,((e,t,a)=>o.E.cancelScheduledSpace(a).then((()=>{const n=e(E.resolved)??[],c=n.findIndex((({broadcast:e})=>e.id===a));-1!==c&&n.splice(c,1),t(Z)})))),v=s().ha9f14b1,_=s().jafbef80,C=(0,d.R)(((e,t,a)=>{const{addToast:n,onClose:c,payload:s}=a;return t(g.U,s).then((()=>{const e=s.scheduled_start_time,t=new Date(e);n({text:v({scheduleDate:(0,p.vh)(t),scheduleTime:(0,p.g6)(t)})})})).catch((()=>{n({text:_})})).finally((()=>{c()}))})),k=(0,n.cn)((e=>e(C.isLoading)||e(y.isLoading))),T=(0,n.cn)((e=>e(l.dd).withEndpoint(r.Z).fetchTopics()))},742113:(e,t,a)=>{a.r(t),a.d(t,{StartSpaceSheet:()=>Be,default:()=>Be});var n=a(807896),c=(a(136728),a(202784)),s=a(400752),r=a(325686),o=a(107267),l=a(786998),i=a(154003),d=a(731708),u=a(466818),p=a(371344),m=a(451566),h=a(138099),g=a(392237),b=a(111677),f=a.n(b),y=a(711223),E=a(837020),S=a(404971),Z=a(97043),w=a(674306),v=a(600291),_=a(637692),C=a(279902),k=a(610214),T=a(443781),F=a(782642),B=a(427266),x=a(536387),I=a(582129),D=a(900147),P=a(125363),L=a(390387),R=a(214997),V=a(13720),z=a(108837),M=a(992942),A=a(973014);const j={goBack:f().cb70b894,deleteScheduledSpace:f().h61d92b0,selectedSpaces:f().a488f2eb};function O({allTopics:e,setTopics:t,setView:a,topics:n}){const[s,o]=c.useState(n),l=s.map((e=>e.topic_id)),u=e?.browse_space_topics?.categories;if(!u)return;const p=()=>{a("start")};return c.createElement(h.Z,{allowBackNavigation:!0,enableMaskForDismiss:!0,onMaskClick:p,restoreFocusInFocusTrapView:!0,style:H.root,type:"center",withMask:!0},c.createElement(R.Z,{showsVerticalScrollIndicator:!1,style:H.accordion},c.createElement(V.Z,null,u?.map((e=>c.createElement(z.Z,{iconImage:c.createElement(M.Z,{source:{uri:`https://abs-0.twimg.com/emoji/v2/svg/${e.icon}.svg`},style:H.image}),key:e.semantic_core_entity_id,title:e.name||""},c.createElement(r.Z,null,e.subtopics?.map(((e,t)=>{const a={topic_id:e.topic_id,name:e.name};return c.createElement(A.Z,{"aria-label":e.name,compact:!0,disabled:3===s.length&&!l.includes(e.topic_id),key:e.topic_id,onClick:()=>{s.map((e=>e.topic_id)).includes(e.topic_id)?o(s.filter((t=>t.topic_id!==e.topic_id))):o((e=>[...e,a]))},selected:l.includes(e.topic_id),style:[H.selectionPill,0!==t?{borderTopWidth:0}:{}],text:e.name})})))))))),c.createElement(i.ZP,{onClick:()=>{t(s),p()},style:H.saveButton,type:"brandFilled"},"Save"),c.createElement(d.ZP,{size:"subtext3",style:H.infoText},j.selectedSpaces({count:s.length,total:3})))}const H=g.default.create((e=>({root:{maxHeight:"70vh",margin:e.spaces.space16},accordion:{marginBottom:e.spaces.space8,borderBottomWidth:1,borderBottomColor:e.colors.gray200,borderStyle:"solid"},saveButton:{margin:e.spaces.space8},selectionPill:{borderRadius:0,textAlign:"center"},infoText:{textAlign:"center",marginBottom:e.spaces.space8,color:e.colors.gray700},image:{width:e.spaces.space20,height:e.spaces.space20,marginStart:e.spaces.space8,justifyContent:"center"}})));var W=a(952428),$=a(894966),N=a(349745),q=a(489253);const G={goBack:f().cb70b894,deleteScheduledSpace:f().h61d92b0,scheduleSpace:f().e9b73da8};function Q({cancelScheduledSpace:e,scheduledSpaces:t,setFocusedScheduledSpace:a,setView:n}){return 0===t.length&&n("start"),c.createElement(h.Z,{allowBackNavigation:!0,enableMaskForDismiss:!0,onMaskClick:()=>n("start"),restoreFocusInFocusTrapView:!0,type:"bottom",withMask:!0},c.createElement(r.Z,{style:Y.container},c.createElement(i.ZP,{"aria-label":G.goBack,hoverLabel:{label:G.goBack},icon:c.createElement($.default,null),onPress:()=>n("start"),pullLeft:!0,style:Y.backButton,type:"primaryText"}),c.createElement(r.Z,{style:Y.form},c.createElement(r.Z,{style:Y.border},t.map((e=>e.broadcast.scheduled_start?c.createElement(W.Z,{key:e.broadcast.id,onPress:()=>{a(e),n("manage")},style:Y.broadcastItem},c.createElement(r.Z,null,c.createElement(q.Z,{isExistingSpace:!0,scheduledFor:(0,N.BR)(new Date(e.broadcast.scheduled_start).getTime())}),c.createElement(d.ZP,{size:"subtext2",weight:"bold"},e.broadcast.status?e.broadcast.status:"Scheduled Space"))):null))))))}const Y=g.default.create((e=>({container:{display:"flex",flexDirection:"column",gap:e.spaces.space16,justifyContent:"center",padding:e.spaces.space32},broadcastItem:{padding:e.spaces.space8,borderBottomWidth:e.spaces.space1,borderColor:e.colors.gray200,borderStyle:"solid"},backButton:{position:"absolute",top:e.spaces.space16,start:e.spaces.space16},actionButton:{marginStart:e.spaces.space12},actionButtons:{gap:e.spaces.space12},form:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},border:{borderColor:e.colors.gray200,borderStyle:"solid",borderWidth:e.spaces.space1,borderBottomWidth:0},formItem:{marginBottom:e.spaces.space20},date:{marginVertical:0,marginTop:e.spaces.space2}})));var U=a(103165),J=a(999769);const K={goBack:f().cb70b894,deleteScheduledSpace:f().h61d92b0,editDetails:f().a7069f2e};function X({cancelScheduledSpace:e,focusedScheduledSpace:t,setFocusedScheduledSpace:a,setView:n}){if(!t.broadcast.scheduled_start)return null;const s=t.broadcast.id,o=()=>{a(void 0),n("list")};return c.createElement(h.Z,{allowBackNavigation:!0,enableMaskForDismiss:!0,onMaskClick:o,restoreFocusInFocusTrapView:!0,type:"bottom",withMask:!0},c.createElement(r.Z,{style:ee.container},c.createElement(r.Z,{style:ee.shareButton},c.createElement(J.ZP,{audioSpaceId:s,pullRight:!0,type:"icon-borderless"})),c.createElement(i.ZP,{"aria-label":K.goBack,hoverLabel:{label:K.goBack},icon:c.createElement($.default,null),onPress:o,pullLeft:!0,style:ee.backButton,type:"primaryText"}),c.createElement(r.Z,{style:ee.content},c.createElement(r.Z,{style:ee.spaceDetails},c.createElement(r.Z,{style:ee.mediaProxy},c.createElement(U.Z,{audioSpaceId:s}))),c.createElement(r.Z,{style:ee.actionButtons},c.createElement(i.ZP,{onPress:()=>{n("schedule")},size:"medium",type:"primaryFilled"},K.editDetails),c.createElement(i.ZP,{onPress:()=>{e(),o()},size:"medium",type:"destructiveFilled"},K.deleteScheduledSpace)))))}const ee=g.default.create((e=>({container:{display:"flex",flexDirection:"column",gap:e.spaces.space16,justifyContent:"center",padding:e.spaces.space32},actionButtonContainer:{flexDirection:"row"},backButton:{position:"absolute",top:e.spaces.space16,start:e.spaces.space32},shareButton:{position:"absolute",top:e.spaces.space16,end:e.spaces.space32},headerRightItem:{marginStart:e.spaces.space8},actionButton:{marginStart:e.spaces.space12},actionButtons:{gap:e.spaces.space12},mediaProxy:{marginTop:e.spaces.space4},content:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,marginTop:e.spaces.space16},spaceDetails:{marginBottom:e.spaces.space20},date:{marginVertical:0,marginTop:e.spaces.space2}})));var te=a(260706),ae=a(564619),ne=a(184605),ce=a(741810),se=a(566220),re=a(943245),oe=a(865698);const le={goBack:f().cb70b894,outbox:f().a15f06fc,title:f().h735a98e,clear:f().dbd5d400,confirm:f().g9677c6e,update:f().h3701ffe,timeLabel:f().c5dd0190,dateLabel:f().edeff232,timezoneLabel:f().fddf24b4,recordSpace:f().e93f3c2a,errorMessageSpaceInPast:f().f6cfa3fe,errorMessageSpaceTooFarFormatter:f().a8f71a2b,deleteFailedMessage:f().ae092f6c,scheduledSpaceUpdated:f().jd7f0030,scheduleSpace:f().e9b73da8,saveChanges:f().a26da034},ie={year:!0,month:!0,day:!0},de={};function ue({existingScheduledSpace:e,goBack:t,scheduledFor:a,setScheduledFor:n}){const s=(0,P.v9)(L.VT),l=(0,F.p)(),u=(0,o.useHistory)(),[p,g]=c.useState(e?.broadcast.available_for_replay);let b;b=e&&e.broadcast.scheduled_start?new Date(e.broadcast.scheduled_start):a?new Date(a):(0,N.o3)();const f=(0,se.R)(),[y,E]=c.useState({dateError:!1,timeError:!1,tooFarInFuture:!1,invalidDateTime:!1}),S=b||new Date(f().getTime()+432e6),[Z,w]=c.useState({date:{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate()},time:{hour:S.getHours(),minute:S.getMinutes()}}),v=c.useCallback((()=>{t()}),[t]),_=c.useCallback((()=>{const a=(0,N.o3)(Z),c=f();if(a&&!(0,N.bJ)(a,c)&&!(0,N.WN)(a,c,oe.i)){const c=a?.getTime()||0;if(e)return void ce.E.replayBroadcastEdit(e.broadcast.id,{replay_edited_title:e.broadcast.status,scheduled_start_time:c,is_space_available_for_replay:p}).then((()=>{u.goBack(),l({text:le.scheduledSpaceUpdated})}));n(c),t()}}),[f,Z,t,p,n,l,e,u]),C=c.useCallback((({date:e,time:t})=>{const a=(0,N.o3)({date:e,time:t}),n=f();let c=!1,s=!1,r=!1,o=!1;a&&a<=n?n.getFullYear()===e.year&&n.getMonth()+1===e.month&&n.getDate()===e.day?s=!0:c=!0:a&&(0,N.WN)(a,n,oe.i)&&(c=!0,r=!0),(0,ne.Z)(e.year)&&(0,ne.Z)(e.month)&&(0,ne.Z)(e.day)&&(0,ne.Z)(t.hour)&&(0,ne.Z)(t.minute)||(o=!0),E({timeError:s,tooFarInFuture:r,dateError:c,invalidDateTime:o})}),[f]),k=c.useCallback((e=>{const t={...Z,time:e};w(t),C(t)}),[Z,C]),T=c.useCallback((e=>{const t={...Z,date:e};w(t),C(t)}),[Z,C]),{date:B,time:x}=Z,{hour:I,minute:D}=x,{day:R,month:V,year:z}=B,M=f().getFullYear(),A=M+2,j=(e=>{try{const t=(0,N.o3)(Z)||new Date,a=(0,re.It)(e||"en"),n=t.toLocaleDateString(a),c=t.toLocaleDateString(a,{timeZoneName:"long"}),s=c.indexOf(n);if(s>=0){return(c.substring(0,s)+c.substring(s+n.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,"")}return c}catch(e){return null}})(s),{dateError:O,timeError:H,tooFarInFuture:W}=y,G=W?le.errorMessageSpaceTooFarFormatter({days:oe.i}):le.errorMessageSpaceInPast,Q=!e?.broadcast.narrow_cast_space_type||e?.broadcast.narrow_cast_space_type===oe.g.ALL;return c.createElement(h.Z,{allowBackNavigation:!0,enableMaskForDismiss:!0,onMaskClick:v,restoreFocusInFocusTrapView:!0,type:"bottom",withMask:!0},c.createElement(r.Z,{style:pe.container},c.createElement(i.ZP,{"aria-label":le.goBack,hoverLabel:{label:le.goBack},icon:c.createElement($.default,null),onPress:v,pullLeft:!0,style:pe.backButton,type:"primaryText"}),c.createElement(r.Z,{style:pe.form},c.createElement(r.Z,{style:pe.formItem},c.createElement(q.Z,{scheduledFor:Z})),c.createElement(r.Z,{style:pe.formItem},c.createElement(d.ZP,{color:"gray700"},le.dateLabel),c.createElement(te.Z,{day:R,errorMessage:O?G:"",errors:O?ie:de,label:le.dateLabel,maxSelectableYear:A,minSelectableYear:M,month:V,onChange:T,style:pe.date,withCalendar:!0,year:z})),c.createElement(r.Z,{style:pe.formItem},c.createElement(ae.Z,{errorText:H?le.errorMessageSpaceInPast:"",hour:I,invalid:H,label:le.timeLabel,minute:D,onChange:k})),j&&c.createElement(r.Z,{style:pe.formItem},c.createElement(d.ZP,{color:"gray700"},le.timezoneLabel),c.createElement(d.ZP,{size:"headline1"},j)),e&&Q&&c.createElement(r.Z,{style:[pe.rowContainer,pe.formItem]},c.createElement(d.ZP,null,le.recordSpace),c.createElement(m.Z,{onValueChange:()=>{g((e=>!e))},value:p})),c.createElement(i.ZP,{onPress:_,size:"large",type:"brandFilled"},e?le.saveChanges:le.scheduleSpace))))}const pe=g.default.create((e=>({container:{display:"flex",flexDirection:"column",gap:e.spaces.space16,justifyContent:"center",padding:e.spaces.space32},actionButtonContainer:{flexDirection:"row"},backButton:{position:"absolute",top:e.spaces.space16,start:e.spaces.space16},actionButton:{marginStart:e.spaces.space12},form:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},formItem:{marginBottom:e.spaces.space20},date:{marginVertical:0,marginTop:e.spaces.space2},rowContainer:{flexDirection:"row",justifyContent:"space-between"}})));var me=a(337631),he=(a(585488),a(712696)),ge=a.n(he),be=a(736063);const fe=me.Z,ye=f().jb38600c,Ee=f().b3633046;function Se({communityId:e,onSelect:t}){const a=ge()(fe,{}),n=[{label:ye,value:""},...a.space_hostable_communities.map((e=>({label:e.name,value:e.rest_id})))];return a.space_hostable_communities.length?c.createElement(u.ZP,{label:Ee,onChange:function(e){t(e||void 0)},options:n,value:e}):null}function Ze(e){return c.createElement(be.H,{errorConfig:{context:"spaces_community_select"},suspenseFallback:null},c.createElement(Se,e))}var we=a(52340);const ve={anyone:f().c5d40fe2,close:f().ia5e7488,createYourSpace:f().b55d8a78,enableVideo:f().a8df1d34,everyone:f().baffe39a,getToKnowSpaces:f().if410292,loading:f().c02e7e3c,onlyEmployees:"Only X employees",onlyInvited:f().e3a87142,addTopics:f().i43fdce9,unauthorizedScheduleSpace:f().jafbef80,peopleYouFollow:f().af293dc2,placeholder:f().e32e99ec,recordSpace:f().e93f3c2a,scheduledSpaceDeleted:f().b701d610,manageScheduledSpaces:f().b028792d,more:f().h63a5c3c,scheduleSpace:f().e9b73da8,startNow:f().cdf630be,subscribers:f().d52a1caa,title:f().ic05a146,whoCanJoin:f().acd1bcb0,whoCanSpeak:f().h07146a2},_e="2",Ce="1",ke="0",Te=[{label:ve.onlyInvited,value:ke},{label:ve.peopleYouFollow,value:Ce},{label:ve.everyone,value:_e}],Fe=c.createElement(y.default,null),Be=()=>{const e=(0,o.useHistory)(),{featureSwitches:t}=(0,T.QZ)(),a=(0,P.v9)(L.WM),[n,g]=c.useState(""),[b,f]=c.useState([]),[y,Z]=c.useState(!1),[w,R]=c.useState(!1),[V,z]=c.useState(),[M,A]=c.useState(),j=(0,F.p)(),[O,H]=c.useState("start"),W=(0,x.xO)();c.useEffect((()=>{W.get(I._C)}),[W]);const[$,N]=c.useState(oe.g.ALL),[q,G]=c.useState(ke),Q=[oe.g.ALL,oe.g.SUBSCRIBERS].includes($),Y=w?k.zc.VIDEO:k.zc.AUDIO,U=t.isTrue("spaces_video_creation_enabled"),J=c.useCallback((()=>{e.goBack()}),[e]),K=(0,s.b9)(we.WJ);c.useEffect((()=>{K()}),[K]);const X=c.useCallback((()=>{Z((e=>!e))}),[]),ee=c.useCallback((()=>{H("start")}),[]),te=c.useCallback((()=>{R((e=>!e))}),[]),ae=c.useCallback((e=>{g(e.target.value)}),[]),ne=c.useCallback((()=>{H("general_education")}),[]),ce=c.useCallback((()=>{H("recording_education")}),[]),se=(0,s.b9)(we.Wy),re=c.useCallback((()=>{if(!M)return;const e={...D.Bx,community_id:V,content_type:Y,conversation_controls:parseInt(q,10),description:n,is_space_available_for_replay:Q&&y,narrow_cast_space_type:parseInt($,10),scheduled_start_time:M,topics:b};se({payload:e,addToast:j,onClose:J})}),[j,Q,V,Y,q,y,$,J,se,M,n,b]),le=(0,s.b9)(we.D9),ie=c.useCallback((()=>{le({narrowCastType:$,isActiveCreator:a,communityId:V,addToast:j,conversationControls:(0,B.mZ)(parseInt(q,10)),isSuperFollowersOnly:a&&$===oe.g.SUBSCRIBERS,onClose:J,options:{...D.Bx,community_id:V,content_type:Y,is_space_available_for_replay:Q&&y,narrow_cast_space_type:parseInt($,10),topics:b},title:n})}),[le,$,a,V,j,q,J,Y,Q,y,b,n]),de=c.useMemo((()=>{const e=[{label:ve.anyone,value:oe.g.ALL}];return t.isTrue("voice_rooms_employee_only_enabled")&&e.push({label:ve.onlyEmployees,value:oe.g.EMPLOYEES}),a&&e.push({label:ve.subscribers,value:oe.g.SUBSCRIBERS}),e}),[t,a]),ue=c.useCallback((e=>{de.some((t=>t.value===e))&&N(e)}),[de]),pe=c.useCallback((e=>{Te.some((t=>t.value===e))&&G(e)}),[]),me=(0,s.Dv)(we.sD),he=()=>c.createElement(c.Fragment,null,c.createElement(l.Z,{leftControl:c.createElement(i.ZP,{"aria-label":ve.close,hoverLabel:{label:ve.close},icon:c.createElement(E.default,null),onPress:J,type:"primaryText"}),rightControl:c.createElement(v.X,null,c.createElement(xe,{setView:H}))}),c.createElement(S.default,{style:Me.decorationIcon}),c.createElement(r.Z,{style:Me.container},c.createElement(d.ZP,{size:"title3",weight:"bold"},ve.createYourSpace),de.length>1?c.createElement(u.ZP,{label:ve.whoCanJoin,onChange:ue,options:de,value:$}):null,c.createElement(u.ZP,{label:ve.whoCanSpeak,onChange:pe,options:Te,value:q}),c.createElement(Ze,{communityId:V,onSelect:z}),c.createElement(p.Z,{onChange:ae,placeholder:ve.placeholder,style:Me.textInput,value:n}),c.createElement(i.ZP,{onPress:()=>H("add_topics"),type:"brandText"},ve.addTopics({count:b.length,total:3})),Q?c.createElement(r.Z,{style:Me.rowContainer},c.createElement(r.Z,{style:Me.innerRowContainer},c.createElement(d.ZP,null,ve.recordSpace),c.createElement(i.ZP,{hoverLabel:{label:ve.more},icon:Fe,onPress:ce,size:"xSmall",type:"brandText"})),c.createElement(m.Z,{onValueChange:X,value:y})):null,U&&c.createElement(r.Z,{style:Me.rowContainer},c.createElement(d.ZP,null,ve.enableVideo),c.createElement(m.Z,{onValueChange:te,value:w})),c.createElement(r.Z,{style:Me.rowCreateSpace},c.createElement(i.ZP,{disabled:me,onPress:M?re:ie,size:"large",style:Me.flex,type:"brandFilled"},M?ve.scheduleSpace:ve.startNow),c.createElement(c.Suspense,{fallback:Re},c.createElement(Pe,{setView:H}))),c.createElement(i.ZP,{onPress:ne,type:"brandText"},ve.getToKnowSpaces)));return c.createElement(h.Z,{allowBackNavigation:!me,enableMaskForDismiss:!me,onMaskClick:J,restoreFocusInFocusTrapView:!0,type:"bottom",withMask:!0},(()=>{switch(O){case"general_education":return c.createElement(C.ZP,{onDismiss:ee});case"recording_education":return c.createElement(_.ZP,{onDismiss:ee});case"start":return he();case"add_topics":return c.createElement(r.Z,{style:Me.container},c.createElement(v.X,null,c.createElement(ze,{setTopics:e=>f(e),setView:e=>H(e),topics:b})));case"schedule":case"list":case"manage":return c.createElement(r.Z,{style:Me.container},c.createElement(Ve,{scheduledFor:M,setScheduledFor:A,setView:H,view:O}))}})())};function xe(e){const{setView:t}=e,a=(0,s.Dv)(we.aZ),n=a.length>0,r=n?ve.manageScheduledSpaces({count:a.length}):void 0;return n?c.createElement(i.ZP,{"aria-label":r,hoverLabel:{label:r},icon:c.createElement(Z.default,null),onPress:()=>t("list"),type:"primaryText"}):null}const Ie=c.createElement(w.default,null),De={label:ve.scheduleSpace};function Pe(e){const{setView:t}=e,a=(0,s.Dv)(we.aZ);return c.createElement(Le,{disabled:10===a.length,onPress:()=>t("schedule")})}function Le(e){return c.createElement(i.ZP,(0,n.Z)({"aria-label":ve.scheduleSpace,hoverLabel:De,icon:Ie,size:"large",type:"brandOutlined"},e))}const Re=c.createElement(Le,{disabled:!0});function Ve(e){const{scheduledFor:t,setScheduledFor:a,setView:n,view:r}=e,[o,l]=c.useState(),i=(0,F.p)(),d=(0,s.b9)(we.Ex),u=c.useCallback((e=>{d(e).then((()=>{i({text:ve.scheduledSpaceDeleted})})),l(void 0)}),[d,i]),p=(0,s.Dv)(we.aZ)??[];switch(r){case"schedule":return c.createElement(ue,{existingScheduledSpace:o,goBack:()=>n(o?"list":"start"),scheduledFor:t,setScheduledFor:e=>a(e)});case"list":return c.createElement(Q,{cancelScheduledSpace:u,scheduledSpaces:p,setFocusedScheduledSpace:l,setView:e=>n(e)});case"manage":if(!o)return;return c.createElement(X,{cancelScheduledSpace:()=>{u(o.broadcast.id)},focusedScheduledSpace:o,setFocusedScheduledSpace:l,setView:n});default:return null}}function ze(e){const t=(0,s.Dv)(we.Bd);return c.createElement(O,(0,n.Z)({allTopics:t},e))}const Me=g.default.create((e=>({container:{gap:e.spaces.space16,justifyContent:"center",padding:e.spaces.space32},decorationIcon:{alignSelf:"center",color:e.colors.purple500,height:e.spaces.space48,width:e.spaces.space48},innerRowContainer:{alignItems:"center",flexDirection:"row",gap:e.spaces.space4},rowContainer:{flexDirection:"row",justifyContent:"space-between"},rowCreateSpace:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:e.spaces.space8},flex:{flex:1},textInput:{width:"100%"}})))},224192:(e,t,a)=>{a.r(t),a.d(t,{AudioSpaceDiscovery:()=>le,default:()=>ie});var n=a(202784),c=a(688715),s=a(111677),r=a.n(s),o=a(718e3),l=a(651930),i=a(572067),d=a(252021),u=a(652904),p=a(325686),m=a(457311),h=a(879113),g=a(392237),b=a(293115),f=a(312771),y=a(731708),E=a(668260),S=a(174326),Z=a(755988),w=a(725516);const v={section:"search_results"},_={emptyStateTitle:r().e5b5f091,emptyStateBody:r().g5812140,emptySectionText:r().e8fe1ecb};function C({hasItems:e,name:t,searchQuery:a}){const c=e?null:n.createElement(y.ZP,{size:"subtext1",style:B.title},_.emptySectionText({section:t,searchQuery:a}));return n.createElement(n.Fragment,null,n.createElement(y.ZP,{size:"title4",style:e&&B.title,weight:"heavy"},t),c)}function k({shouldFetch:e,spaceId:t}){return e?n.createElement(Z.Z,{audioSpaceId:t}):n.createElement(E.default,null)}function T({items:e,name:t,searchQuery:a}){const[c,s]=n.useState(0),r=!!e.length;return n.createElement(n.Fragment,null,n.createElement(C,{hasItems:r,name:t,searchQuery:a}),r?n.createElement(S.Z,{childrenStyle:[B.children],onVisibleRangeChange:({index:e,intersectionRatio:t})=>{1===t&&s(e)},style:B.carousel},e.map(((e,t)=>{const a=t-3<c;return n.createElement(k,{key:e,shouldFetch:a,spaceId:e})}))):null)}function F(e){const{data:t,searchQuery:a}=e,c=(0,w.z)();n.useEffect((()=>{c.scribeAction("impression")}),[c,t]);const s=t.sections.some((e=>!!e.items.length))?n.createElement(p.Z,{style:B.root},t.sections.map((({items:e,name:t})=>n.createElement(T,{items:e,key:`${a}${t}`,name:t,searchQuery:a})))):n.createElement(m.Z,{header:_.emptyStateTitle({searchQuery:a}),message:_.emptyStateBody});return n.createElement(b.nO,{namespace:v},s)}const B=g.default.create((e=>({root:{paddingStart:e.componentDimensions.gutterHorizontal,paddingTop:e.spaces.space36},title:{marginBottom:e.spaces.space20},carousel:{marginBottom:e.spaces.space28},children:{width:"75%",height:"100%",marginEnd:e.spaces.space20}})));var x=a(71620),I=a(58255);var D=a(107267),P=a(405661),L=a(2430),R=a(903019);function V(){const e=(0,D.useLocation)(),t=(0,L.BX)(e.query?.q),a=(0,R.CT)(P.e,P.e.Top,e);return{searchQuery:t?.trim(),searchFilter:a}}const z=r().fc962610,M={section:"search_results"},A=(e,t)=>{const a=[""+(e?`f=${e}`:""),""+(t?`q=${t}`:"")].filter(Boolean);return"twitter://spaces/search"+(a.length?`?${a.join("&")}`:"")};const j=g.default.create((e=>({root:{paddingVertical:e.componentDimensions.gutterVertical,paddingBottom:e.spaces.space64},loading:{paddingTop:e.spaces.space36}}))),O=function(e){const{searchFilter:t,searchQuery:a}=V(),{fetchStatus:c,searchAudioSpaces:s,searchResults:r}=function(){const[e,t]=n.useState(f.ZP.NONE),[a,c]=n.useState(),s=(0,x.n7)("useAudioSpaceSearch");return{searchAudioSpaces:n.useCallback(((e,a)=>{if(e){const n=s({showToast:!1});t(f.ZP.LOADING);const r=()=>{I.w.searchAudioSpace(e,a).then((e=>{c(e),t(f.ZP.LOADED)})).catch((e=>{throw t(f.ZP.FAILED),e})).catch(n)};I.w.initialized()?r():setTimeout(r,100)}}),[s]),searchResults:a,fetchStatus:e}}();n.useEffect((()=>{a&&s(a,t)}),[a,t,s]);const o=a?{...M,component:`search_filter_${t.toLowerCase()}`}:M,i=c===f.ZP.NONE?n.createElement(m.Z,{header:z}):null,d=n.createElement(h.Z,{fetchStatus:c,onRequestRetry:()=>a?s(a,t):void 0,render:()=>a&&r?n.createElement(F,{data:r,searchQuery:a}):null});return n.createElement(b.nO,{namespace:o},n.createElement(n.Fragment,null,n.createElement(l.Z,{deepLink:A(t,a)}),n.createElement(p.Z,{style:j.root},i||d)))};a(136728);var H=a(371344),W=a(956272),$=a(649872),N=a(121522);const q=r().c432d2b2,G={component:"search_box"},Q="/i/spaces/search",Y="/i/spaces/";function U(){const{inputRef:e}=(0,N.j)(),t=(0,D.useHistory)(),a=(0,D.useLocation)(),c=(0,w.z)(),{searchQuery:s}=V(),[r,o]=n.useState(s);return n.createElement(b.nO,{namespace:G},n.createElement(p.Z,{style:J.container},n.createElement($.Z,{onSubmit:n=>{if(n.preventDefault(),n.stopPropagation(),r){const n=r?.trim();t.push({pathname:Q,query:{...a.query,q:n}}),c.scribe({action:"search",data:{search_details:{query:r}}}),e.current?.blur()}},role:"search",style:J.form},n.createElement(H.Z,{Icon:W.default,autoComplete:"off",focusOnClear:!0,onChange:e=>{o(e.target.value)},onClear:()=>{o(""),c.scribeAction("clear"),t.push(Y)},onFocus:()=>{c.scribe({action:"click",data:{message:s}})},placeholder:q,ref:e,returnKeyType:"search",spellCheck:"false",value:r,withClearButton:!0}))))}const J=g.default.create((e=>({container:{flex:1,flexDirection:"row"},form:{alignItems:"stretch",flex:1}})));a(543673),a(240753),a(128399);var K=a(507651),X=a(358198);const ee=[{label:r().i66136aa,id:"Top"},{label:r().b6da6b02,id:"Live"},{label:r().f178e38c,id:"Upcoming"}];const te=function(){const e=(0,D.useLocation)(),t=(0,w.z)(),{query:{f:a=ee[0].id},search:c}=e,s=new URLSearchParams(c);s.has("f")&&s.delete("f");const r=ee.map((({id:e,label:n})=>({key:e,to:`${X.yy.AudioSpaceSearch}?f=${e}${Array.from(s).length?`&${s.toString()}`:""}`,label:n,isActive:()=>a===e,onClick:()=>function(e){t.scribe({component:`search_filter_${e.toLowerCase()}`,action:"click"})}(e)})));return n.createElement(K.Z,{links:r})};const ae=(0,a(668214).Z)().withAnalytics({page:"audiospace",section:"tab"}),ne=n.createElement(U,null),ce=n.createElement(O,null),se=n.createElement(te,null),re=n.createElement(o.Z,{withSearchBox:!1,withTrends:!1}),oe=r().ded416b0;function le(e){const{history:t}=e;return n.createElement(u.Z,null,n.createElement(i.Z,{canonical:(0,c.ju)("https://x.com/i/spaces"),title:oe,type:"article"}),n.createElement(l.Z,null),n.createElement(d.Z,{customSearchBox:ne,history:t,primaryContent:ce,secondaryBar:se,sidebarContent:re,title:oe,withSearchBox:!0}))}const ie=ae(le)},230378:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(202784),c=a(107267),s=a(688715),r=a(111677),o=a.n(r),l=a(718e3),i=a(651930),d=a(572067),u=a(252021),p=a(652904),m=a(805137),h=a(293115);function g(e){const t=(0,c.useHistory)();return n.createElement(h.nO,{namespace:f.scribe_namespace},n.createElement(p.Z,null,n.createElement(d.Z,{canonical:f.canonical_url,description:b.Where_live_audio_conversations_happen,image:f.meta_image.url,imageAlt:f.meta_image.alt,imageH:f.meta_image.height,imageType:f.meta_image.type,imageW:f.meta_image.width,title:b.Spaces,type:"article"}),n.createElement(i.Z,null),n.createElement(u.Z,{backLocation:"/",history:t,primaryContent:n.createElement(m.B,null),sidebarContent:n.createElement(l.Z,null),title:b.Spaces})))}const b={Spaces:o().ded416b0,Live_Twitter_Spaces:o().hd908df2,Where_live_audio_conversations_happen:o().fec3c1e0},f={canonical_url:(0,s.ju)("https://x.com/i/spacebar"),scribe_namespace:{page:"audiospace",section:"spacebar"},meta_image:{type:"image/jpeg",url:"https://abs.twimg.com/sticky/cards/TwitterSpacesCardImage.3.jpg",width:1200,height:630,alt:b.Spaces}}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/modules.audio-262c94d4.5db08a6a.js.map