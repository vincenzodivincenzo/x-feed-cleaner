"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-f3039e62"],{293988:(e,t,o)=>{o.d(t,{Z:()=>E});var n=o(202784),l=o(154003),r=o(111677),i=o.n(r),a=o(74514),s=o(405303),c=o(684511),d=o(860174),u=o(71620),f=o(668214),w=o(257166),m=o(919022);const h=(e,t)=>!(!t.allowPromptForPush||!w.selectShouldPromptBrowserPush(e)),p=(0,f.Z)().propsFromState((()=>({shouldPromptPush:h}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,u.zr)("DEVICE_FOLLOW_BUTTON_CONTAINER"),updateDeviceFollowing:m.ZP.updateDeviceFollowing}))).withAnalytics({element:"mobile_notifications"}),b=i().bdba3e1a,_=i().c4da7d28,v=i().j87c21f4,g=i().iebc30ca,C=i().dc740eb2;class y extends n.PureComponent{constructor(e){super(e),this._renderButton=()=>{const{isFollowing:e,style:t}=this.props;return e?n.createElement(l.ZP,{"aria-label":_,hoverLabel:{label:g},icon:n.createElement(a.default,null),onPress:this._handleUnfollow,style:t,type:"primaryOutlined"}):n.createElement(l.ZP,{"aria-label":b,hoverLabel:{label:v},icon:n.createElement(s.default,null),onPress:this._handleFollow,style:t,type:"primaryOutlined"})},this._handleFollow=()=>{const{isDeviceFollowWithoutUserFollow:e,shouldPromptPush:t}=this.props;t&&this.setState({showingPushPrompt:!0}),this._updateDeviceFollowing(!0).then((t=>{e&&this._scribeAction("device_follow_without_follow"),this._scribeAction("on")}))},this._handleUnfollow=()=>{const{isDeviceFollowWithoutUserFollow:e}=this.props;this._updateDeviceFollowing(!1).then((t=>{e&&this._scribeAction("device_unfollow_without_follow"),this._scribeAction("off")}))},this.state={showingPushPrompt:!1}}render(){return n.createElement("div",null,this.state.showingPushPrompt?n.createElement(c.Z,{fullScreen:!0,message:C}):null,this._renderButton())}_updateDeviceFollowing(e){const{createLocalApiErrorHandler:t,updateDeviceFollowing:o,userId:n}=this.props;return o(n,{device:e}).catch(t(d.Z))}_scribeAction(e){const{analytics:t}=this.props;t.scribeAction(e)}}const E=p(y)},265196:(e,t,o)=>{o.d(t,{ZP:()=>C});o(136728);var n=o(202784),l=o(970187),r=o(111677),i=o.n(r),a=o(258292),s=o(500002),c=o(233391),d=o(288955),u=o(71620),f=o(668214),w=o(466380);const m=(0,f.Z)().propsFromActions((()=>({createLocalApiErrorHandler:(0,u.zr)("FOLLOW_TOPIC_BUTTON"),follow:w.Z.follow,unfollow:w.Z.unfollow}))).withAnalytics();var h=o(421575);const p=Object.freeze({follow:i().i79ab12a,following:i().d960b55c,unfollow:i().c0f56044}),b=Object.freeze({follow:i().fcf51fe6,following:i().e9a90d72,unfollow:i().bf403716,confirmationHeadline:i().c9f08e29,confirmationSheetText:i().hed4dcd0}),_=Object.freeze({follow:i().cd876e02,following:i().f2816e02,unfollow:i().f5b04fbc,confirmationHeadline:i().c481ae3f,confirmationSheetText:i().c94116de}),v=Object.freeze({follow:i().e0e730b0,following:i().e0e730b0,unfollow:i().b1850062,confirmationHeadline:i().gd3f996f,confirmationSheetText:i().jdd65aac});class g extends n.Component{constructor(...e){super(...e),this._getDisplayMode=e=>void 0===this._getFollowButtonIcon(e)?"only-text":"icon-text",this._getFollowButtonIcon=e=>{switch(e){case h.q.Favorite:case h.q.Star:case h.q.Interested:return n.createElement(a.default,null);case h.q.FollowTopic:case h.q.Default:default:return}},this._getFollowingButtonIcon=e=>"icon-text"===this._getDisplayMode(e)?n.createElement(n.Fragment,null):void 0,this._getButtonText=e=>{const{topic:t}=this.props;switch(e){case h.q.FollowTopic:return{follow:p.follow,unfollow:p.unfollow,following:p.following};case h.q.Favorite:return{follow:_.follow,unfollow:_.unfollow,following:_.following,confirmationHeadline:_.confirmationHeadline&&_.confirmationHeadline({title:t.name}),confirmationSheetText:_.confirmationSheetText};case h.q.Star:return{follow:b.follow,unfollow:b.unfollow,following:b.following,confirmationHeadline:b.confirmationHeadline&&b.confirmationHeadline({title:t.name}),confirmationSheetText:b.confirmationSheetText};case h.q.Interested:return{follow:v.follow,unfollow:v.unfollow,following:v.following,confirmationHeadline:v.confirmationHeadline&&v.confirmationHeadline({title:t.name}),confirmationSheetText:v.confirmationSheetText};case h.q.Default:default:return}},this._handleOnFollow=()=>{const{createLocalApiErrorHandler:e,educateOnFollow:t,follow:o,history:n,topic:l}=this.props;o(l.id).catch(e()),this._handleScribe("follow"),t&&l&&n.push({pathname:"/i/topics/education",state:{topicName:l.name}})},this._handleOnUnfollow=()=>{const{createLocalApiErrorHandler:e,topic:t,unfollow:o}=this.props;o(t.id).catch(e()),this._handleScribe("unfollow")}}render(){const{ariaDescribedBy:e,id:t,isTransparent:o,showRelationshipChangeConfirmation:r,size:i,style:a,textMode:s,topic:{following:u,name:f}}=this.props;return n.createElement(d.Z,{customText:f,displayMode:c.BH.topic},(c=>n.createElement(l.Z,{"aria-describedby":e,buttonIcons:{followIcon:this._getFollowButtonIcon(s),followingIcon:this._getFollowingButtonIcon(s)},buttonText:this._getButtonText(s),displayMode:this._getDisplayMode(s),id:t,isFollowing:u,isTransparent:o,name:f,onFollow:c(this._handleOnFollow),onUnfollow:c(this._handleOnUnfollow),showRelationshipChangeConfirmation:r,size:i,style:a,type:"topic",withConfirmationSheetText:u})))}_handleScribe(e){const{analytics:t}=this.props;t.scribe({element:"topic",action:e})}}g.defaultProps={size:"small",textMode:h.q.Default};const C=(0,s.ZP)(m(g))},421575:(e,t,o)=>{o.d(t,{q:()=>n});o(202784);const n=Object.freeze({Default:"default",FollowTopic:"follow",Star:"star",Interested:"interested",Favorite:"favorite"})},863934:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(202784),l=o(154003),r=o(392237),i=o(111677),a=o.n(i),s=o(837020),c=o(725516),d=o(288955),u=o(71620),f=o(668214),w=o(466380);const m=(0,f.Z)().propsFromActions((()=>({createLocalApiErrorHandler:(0,u.zr)("TOPIC_NOT_INTERESTED_CONTEXT"),setNotInterested:w.Z.notInterested}))),h=a().d9b417c4,p=a().c29d6806,b=a().e839db3a,_=r.default.create((e=>({closeIcon:{color:e.colors.gray700}}))),v=n.createElement(s.default,{"aria-label":b,style:_.closeIcon}),g=m((e=>{const{createLocalApiErrorHandler:t,id:o,onPress:r,setNotInterested:i,size:a="small",style:s,text:u=p,topicId:f,type:w="brandText",withIconOnly:m=!0}=e,_=(0,c.z)(),g=n.useCallback((e=>{e.preventDefault(),r?r(e):(_.scribe({element:"topic",action:"not_interested"}),i(f).catch(t()))}),[_,t,r,i,f]);return n.createElement(d.Z,null,(e=>n.createElement(l.ZP,{"aria-label":h,hoverLabel:{label:b},icon:m?v:void 0,id:o,onPress:e(g),pullRight:m,size:a,style:s,type:w},m?null:u)))}))},37341:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(807896),l=o(202784),r=o(433460),i=o(235902),a=o(823161),s=o(192464),c=o(49905),d=o(668214),u=o(624479);const f=(e,t)=>(0,u.cY)(e,t.userId),w=e=>{const{avatarRef:t,id:o,imageLayoutCache:d,link:u,onClick:f,onHoverCardScreenNameClick:w,promotedContent:m,screenName:h,size:p,style:b,uri:_,userAvatarLabel:v,userId:g,userSpace:C,withHoverCard:y,withLink:E}=e;l.useEffect((()=>(s.Z.registerUserInApp(g),()=>{s.Z.deregisterUserInApp(g)})),[g]);const Z=C&&C.spaceId||"";return(0,c.R)(Z),C?l.createElement(r.Z,(0,n.Z)({avatarRef:t,id:o,imageLayoutCache:d,link:u,onClick:f,onHoverCardScreenNameClick:w,promotedContent:m,screenName:h,size:p,style:b,uri:_,withHoverCard:y,withLink:E},C)):l.createElement(i.ZP.Provider,{value:{userAvatarLabel:()=>v}},l.createElement(a.default,{avatarRef:t,id:o,imageLayoutCache:d,link:u,onClick:f,onHoverCardScreenNameClick:w,promotedContent:m,screenName:h,size:p,style:b,uri:_,withHoverCard:y,withLink:E}))},m=(0,d.Z)().propsFromState((()=>({userSpace:f})))(l.memo(w))},301758:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(807896),l=o(202784),r=o(235902),i=o(521288),a=o(401388),s=o(988566),c=o(725516),d=o(443781),u=o(71620),f=o(668214),w=o(425182),m=o(836255);const h=(e,t)=>t.tweetId,p=(e,t)=>{const o=t.tweetId,n=o&&m.Z.select(e,o);return n?(0,w.z0)(e,n):void 0},b=(0,f.Z)().propsFromState((()=>({community:p,hydratedTweet:m.Z.createHydratedTweetSelector(h)}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,u.zr)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:w.ZP.fetchOneIfNeeded})))((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:o,hydratedTweet:u,onAvatarClick:f,onMediaClick:w,onPress:m,onScreenNameClick:h,tweetId:p,withBirdwatchPivot:b=!0,..._})=>{const{featureSwitches:v,viewerUserId:g}=l.useContext(d.rC),C=(0,c.z)(),y=u?.community_id_str;l.useEffect((()=>{y&&(0,a.Z)(e)&&o(y).catch(t())}),[e,y,t,o]);const E=l.useCallback((e=>{C.scribeAction("click"),m&&m(e)}),[m,C]),Z=!!b,T=u&&(0,s.D$)(u,g,e),P=T&&(0,s.rl)(T);return l.createElement(r.ZP.Provider,{value:{isEditTweetConsumptionEnabled:()=>v.isTrue("responsive_web_edit_tweet_enabled")||v.isTrue("subscriptions_feature_labs_1004")}},l.createElement(i.Z,(0,n.Z)({},_,{loggedInUserId:g,onAvatarClick:f,onMediaClick:w,onPress:E,onScreenNameClick:h,shouldShowAltLabelAlways:!0,socialContextProps:P,tweet:u,withBirdwatchPivot:Z})))}))},668843:(e,t,o)=>{o.d(t,{Z:()=>h,C:()=>b});var n=o(202784),l=o(154003),r=o(392237),i=o(111677),a=o.n(i),s=o(416276),c=o(725405),d=o(443781),u=o(668214);const f=(e,t)=>{const o=t.module.selectMetadata(e),n=!!t.focalTweet?.article;return!!o?.reader_mode_config?.is_reader_mode_available&&!n},w=(0,u.Z)().propsFromState((()=>({readerModeAvailable:f}))),m=a().b8f3500a,h=({focalTweet:e,isExpanded:t,readerModeAvailable:o})=>{const{featureSwitches:r,userClaims:i}=n.useContext(d.rC),a=r.isTrue("longform_reader_mode_view_in_reader_mode_entry_button_enabled"),u=(0,c.Z)(),f=o&&i?.isTrueAndEnabled("subscriptions_feature_1005"),w=e?.id_str,h=e?.user?.screen_name,b=()=>{u.scribe({action:"click",element:t?"view_in_reader_mode_button":"reader_mode_header_icon_enable",page:"thread",section:"reader_mode",data:{tweet_id:w}})};return f?(()=>{if(w&&h){const e=`/${h}/thread/${w}`;return t?a?n.createElement(l.ZP,{link:e,onClick:b,style:p.button,testID:"viewInReaderLabel",type:"primaryOutlined"},m):null:n.createElement(l.ZP,{icon:n.createElement(s.default,{style:p.icon}),link:e,onClick:b,type:"brandText"})}return null})():null},p=r.default.create((e=>({button:{marginTop:e.spaces.space8,marginBottom:e.spaces.space20},icon:{color:e.colors.text,weight:"bold"}}))),b=w((({focalTweet:e,isExpanded:t,readerModeAvailable:o})=>n.createElement(h,{focalTweet:e,isExpanded:t,readerModeAvailable:o})))},512110:(e,t,o)=>{o.d(t,{ZP:()=>I});var n=o(807896),l=o(202784),r=o(325686),i=o(154003),a=o(995145),s=o(373926),c=o(392237),d=o(111677),u=o.n(d),f=o(837020),w=o(516951),m=o(323265),h=o(290402),p=o(808692),b=o(503229),_=o(668214),v=o(836255),g=o(312771);const C=(e,t)=>{const{tweetId:o}=t;return o?v.Z.selectHydrated(e,o):void 0},y=(e,t)=>{const{hasPostPreloaded:o,isPostBatchingEnabled:n,tweetId:l}=t,r=n?o?void 0:g.iF.LOADING:void 0;return l?r??v.Z.selectFetchStatus(e,l):void 0},E=(0,_.Z)().propsFromState((()=>({tweet:C,fetchStatus:y}))).propsFromActions((()=>({fetchTweetIfNeeded:v.Z.fetchOneIfNeeded}))),Z=u().e68b09b4,T=c.default.create((e=>({container:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.medium,borderWidth:e.borderWidths.small,boxShadow:e.boxShadows.xSmall,flexDirection:"row",width:"100%",overflow:"hidden"},tweet:{flex:1},iconClose:{color:e.colors.gray300},removeTweetButton:{alignSelf:"flex-start",marginEnd:e.spaces.space4,marginTop:e.spaces.space4},tombstoneContainer:{display:"flex"}}))),P=l.createElement(f.default,{style:T.iconClose}),I=E((0,b.Z)((({fetchStatus:e,fetchTweetIfNeeded:t,hasPostPreloaded:o,isPostBatchingEnabled:c,onClick:d,onRemove:u,style:f,tweet:b,tweetId:_,withActionsDisabled:v})=>{const g=m.ZP.isTwitterApp(),C=l.useCallback((()=>{t(_)}),[_,t]);l.useEffect((()=>{_&&(!c||o)&&C()}),[C,_,c,o]);const y=()=>{d&&d()},E=u?l.createElement(i.ZP,{icon:P,onPress:u,preventFocusShift:!0,size:"small",style:T.removeTweetButton,testID:"remove-button",type:"primaryText"}):null,I=e=>{const{link:t}=e,o="string"==typeof t?{pathname:t,state:{}}:t,r=o?{...o,anchorless:!1,external:!0,openInSameFrame:!1}:void 0;return l.createElement(a.Z.Timestamp,(0,n.Z)({},e,{link:r}))},F=b?.permalink;return l.createElement(h.Z,{fetchStatus:e,render:()=>b?l.createElement(r.Z,{style:[T.container,f],testID:"simpleTweet"},l.createElement(r.Z,{style:T.tweet},v?l.createElement(a.Z,{onPress:y,renderTimestamp:I,tweet:b}):l.createElement(p.ZP,{onAnalyticsClick:w.Z,onAvatarClick:w.Z,onClick:y,onEngagementsClick:w.Z,onEntityClick:w.Z,onMediaClick:w.Z,onReplyContextClick:w.Z,to:F,tweet:b,withActions:!g})),E):null,renderFailure:()=>l.createElement(r.Z,{style:[T.tombstoneContainer,f],testID:"tombstone"},l.createElement(s.Z,{actionText:Z,onActionClick:u,withFooterGap:!1,withHeader:!1,withHorizontalPadding:!1})),retryable:!1})})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.ReaderMode~bundle.Birdwatch~bundle.TwitterArticles~bundle.Compose~bundle.Settings~bund-f3039e62.133feaaa.js.map